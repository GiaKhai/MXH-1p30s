{"version":3,"sources":["redux/actions/postAction.js","pages sync /^/.*$","redux/actions/notifyAction.js","redux/actions/messageAction.js","components/Avatar.js","../node_modules/peerjs/dist sync","components/NotFound.js","customRouter/PageRender.js","customRouter/PrivateRouter.js","components/alert/Loading.js","components/alert/Toast.js","components/alert/Alert.js","components/NotifyModal.js","images/notice.png","components/header/Menu.js","components/header/Search.js","components/header/Header.js","components/StatusModal.js","audio/got-it-done-613.mp3","SocketClient.js","audio/chuong.mp3","components/message/CallModal.js","App.js","reportWebVitals.js","redux/reducers/authReducer.js","redux/reducers/alertReducer.js","redux/reducers/themeReducer.js","redux/reducers/profileReducer.js","redux/reducers/statusReducer.js","redux/reducers/postReducer.js","redux/reducers/modalReducer.js","redux/reducers/detailPostReducer.js","redux/reducers/suggestionsReducer.js","redux/reducers/socketReducer.js","redux/reducers/notifyReducer.js","redux/reducers/messageReducer.js","redux/reducers/onlineReducer.js","redux/reducers/callReducer.js","redux/reducers/peerReducer.js","redux/reducers/index.js","redux/store.js","index.js","redux/actions/profileAction.js","images/loading.gif","components/UserCard.js","utils/mediaShow.js","redux/actions/globalTypes.js","utils/imageUpload.js","components/FollowBtn.js","utils/valid.js","redux/actions/authAction.js","redux/actions/suggestionsAction.js","components/Icons.js","pages/message/index.js","pages/login.js","pages/register.js","components/home/Status.js","components/home/Posts.js","components/home/RightSideBar.js","pages/home.js","components/LoadMoreBtn.js","components/message/LeftSide.js","components/home/post_card/CardHeader.js","components/Carousel.js","components/home/post_card/CardBody.js","images/send.svg","components/LikeButton.js","components/ShareModal.js","components/home/post_card/CardFooter.js","utils/config.js","redux/actions/commentAction.js","components/home/comments/CommentMenu.js","components/home/InputComment.js","components/home/comments/CommentCard.js","components/home/comments/CommentDisplay.js","components/home/Comments.js","components/PostCard.js","utils/fetchData.js","pages/post/[id].js","components/profile/EditProfile.js","components/profile/Followers.js","components/profile/Following.js","components/profile/Info.js","components/PostThumb.js","components/profile/Posts.js","pages/profile/[id].js","components/message/Times.js","components/message/MsgDisplay.js","components/message/RightSide.js","pages/message/[id].js"],"names":["POST_TYPES","CREATE_POST","LOADING_POST","GET_POSTS","UPDATE_POST","GET_POST","DELETE_POST","createPost","content","images","auth","socket","dispatch","a","media","type","GLOBALTYPES","ALERT","payload","loading","length","imageUpload","postDataAPI","token","res","data","newPost","user","msg","id","_id","text","recipients","followers","url","image","createNotify","getPosts","getDataAPI","page","error","response","updatePost","status","imgNewUrl","filter","img","imgOldUrl","patchDataAPI","success","likePost","post","likes","emit","unLikePost","like","removeNotify","getPost","detailPost","every","deletePost","deleteDataAPI","savePost","newUser","AUTH","unSavePost","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","NOTIFY_TYPES","GET_NOTIFIES","CREATE_NOTIFY","REMOVE_NOTIFY","UPDATE_NOTIFY","UPDATE_SOUND","DELETE_ALL_NOTIFIES","notify","username","avatar","getNotifies","notifies","isReadNotify","isRead","deleteAllNotifies","MESS_TYPES","ADD_USER","ADD_MESSAGE","GET_CONVERSATIONS","GET_MESSAGES","UPDATE_MESSAGES","DELETE_MESSAGES","DELETE_CONVERSATION","CHECK_ONLINE_OFFLINE","addMessage","fullname","getConversations","newArr","conversations","forEach","item","cv","push","call","result","getMessages","newData","messages","reverse","loadMoreMessages","deleteMessages","DeleteData","recipient","deleteConversation","Avatar","src","size","theme","useSelector","state","alt","className","style","webpackEmptyContext","NotFound","minHeight","top","left","transform","PageRender","useParams","pageName","React","createElement","require","default","err","generatePage","PrivateRouter","props","localStorage","getItem","to","Loading","background","color","zIndex","width","height","viewBox","stroke","strokeWidth","fill","points","x","y","Toast","handleShow","bgColor","right","minWidth","title","data-dismiss","outline","onClick","body","Notify","alert","useDispatch","NotifyModal","maxHeight","overflow","index","handleIsRead","slice","match","moment","createdAt","fromNow","cursor","window","confirm","Menu","pathname","useLocation","isActive","pn","label","icon","path","link","opacity","role","data-toggle","aria-haspopup","aria-expanded","aria-labelledby","htmlFor","THEME","logout","Search","useState","search","setSearch","users","setUsers","load","setLoad","handleSearch","preventDefault","handleClose","onSubmit","name","value","onChange","target","toLowerCase","replace","display","LoadIcon","UserCard","border","Header","scrollTo","StatusModal","setContent","setImages","stream","setStream","videoRef","useRef","refCanvas","tracks","setTracks","useEffect","onEdit","stop","STATUS","placeholder","Icons","camera","imageShow","videoShow","URL","createObjectURL","splice","deleteImages","autoPlay","muted","ref","current","clientWidth","clientHeight","setAttribute","getContext","drawImage","toDataURL","navigator","mediaDevices","getUserMedia","video","then","mediaStream","srcObject","play","track","getTracks","catch","console","log","multiple","accept","files","newImages","file","SocketClient","online","audioRef","on","off","sound","Notification","onclick","open","includes","ONLINE","OFFLINE","CALL","controls","audiobell","CallModal","peer","hours","setHours","mins","setMins","second","setSecond","total","setTotal","answer","setAnswer","youVideo","otherVideo","newCall","setNewCall","setTime","t","setTimeout","parseInt","addCallMessage","useCallback","times","disconnect","sender","Date","toISOString","handleEndCall","close","timer","clearTimeout","openStream","config","audio","playStream","tag","handleAnswer","peerId","remoteStream","removeListener","pauseAudio","newAudio","pause","currentTime","Audio","RingRing","playAudio","padding","toString","playsInline","App","modal","refreshToken","io","SOCKET","getSuggestions","permission","requestPermission","newPeer","Peer","undefined","secure","PEER","Alert","exact","component","Home","Login","Register","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","authReducer","action","alertReducer","themeReducer","ids","posts","profileReducer","PROFILE_TYPES","LOADING","GET_USER","FOLLOW","UNFOLLOW","EditData","GET_ID","statusReducer","postReducer","modalReducer","MODAL","detailPostReducer","suggestionsReducer","SUGGES_TYPES","GET_USERS","socketReducer","notifyReducer","resultUsers","firstLoad","messageReducer","onlineReducer","callReducer","peerReducer","combineReducers","profile","homePosts","suggestions","message","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","DataProvider","children","ReactDOM","render","StrictMode","document","getElementById","getProfileUsers","res1","updateProfileUser","userData","story","follow","following","unfollow","setShowFollowers","setShowFollowing","showMsg","checkImage","imgArr","formData","FormData","append","fetch","API_URL","method","json","public_id","secure_url","FollowBtn","followed","setFollowed","find","handleFollow","handleUnFollow","valid","email","password","cf_password","test","validateEmail","errMsg","errLength","login","access_token","setItem","register","check","removeItem","location","href","Message","fontSize","setUserData","typePass","setTypePass","history","useHistory","handleChangeInput","aria-describedby","disabled","gender","typeCfPass","setTypeCfPass","defaultChecked","Status","Posts","handleLoadMore","PostCard","LoadMoreBtn","RightSideBar","scroll","addEventListener","pageYOffset","behavior","LeftSide","searchUsers","setSearchUsers","pageEnd","setPage","handleAddUser","IntersectionObserver","entries","isIntersecting","p","threshold","observe","CardHeader","Carousel","data-ride","data-target","data-slide-to","data-slide","aria-hidden","CardBody","readMore","setReadMore","LikeButton","isLike","handleLike","handleUnLike","ShareModal","FacebookShareButton","FacebookIcon","round","TwitterShareButton","TwitterIcon","EmailShareButton","EmailIcon","RedditShareButton","RedditIcon","TelegramShareButton","TelegramIcon","WhatsappShareButton","WhatsappIcon","CardFooter","setIsLike","loadLike","setLoadLike","isShare","setIsShare","setSaved","saved","Send","comments","likeComment","comment","newComment","newComments","unLikeComment","CommentMenu","setOnEdit","handleRemove","deleteArr","cm","reply","da","deleteComment","MenuItem","InputComment","onReply","setOnReply","trim","commentId","postId","postUserId","createComment","CommentCard","styleCard","pointerEvents","rows","updateComment","CommentDisplay","replyCm","showRep","setShowRep","next","setNext","Comments","setComments","showComments","setShowComments","replyComments","setReplyComments","newCm","newRep","axios","get","headers","Authorization","patch","delete","Post","setPost","EditProfile","mobile","address","website","setAvatar","handleInput","cols","Followers","Following","Info","showFollowers","showFollowing","rel","PostThumb","setPosts","setResult","Profile","saveTab","setSaveTab","Times","MsgDisplay","borderRadius","toLocaleTimeString","toLocaleString","RightSide","setUser","setText","setMedia","loadMedia","setLoadMedia","refDisplay","setData","isLoadMore","setIsLoadMore","scrollIntoView","block","handleSubmit","getMessagesData","caller","callUser","marginTop","handleDeleteMedia","newMedia","Conversation"],"mappings":"4fAKaA,EAAa,CACtBC,YAAa,cACbC,aAAc,eACdC,UAAW,YACXC,YAAa,cACbC,SAAU,WACVC,YAAa,eAIJC,EAAa,SAAC,GAAD,IAAEC,EAAF,EAAEA,QAASC,EAAX,EAAWA,OAAQC,EAAnB,EAAmBA,KAAMC,EAAzB,EAAyBA,OAAzB,8CAAqC,WAAOC,GAAP,mBAAAC,EAAA,yDACvDC,EAAQ,GAD+C,SAGvDF,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACC,SAAS,OACpDV,EAAOW,OAAS,GAJoC,gCAInBC,YAAYZ,GAJO,OAIjCK,EAJiC,8BAMrCQ,YAAY,QAAS,CAAEd,UAASC,OAAQK,GAASJ,EAAKa,OANjB,OAMjDC,EANiD,OAQvDZ,EAAS,CACLG,KAAMf,EAAWC,YACjBiB,QAAQ,2BAAKM,EAAIC,KAAKC,SAAf,IAAwBC,KAAMjB,EAAKiB,SAG9Cf,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACC,SAAS,KAGjDS,EAAM,CACRC,GAAIL,EAAIC,KAAKC,QAAQI,IACrBC,KAAM,sCACNC,WAAYR,EAAIC,KAAKC,QAAQC,KAAKM,UAClCC,IAAI,SAAD,OAAWV,EAAIC,KAAKC,QAAQI,KAC/BtB,UACA2B,MAAOrB,EAAM,GAAGoB,KAGpBtB,EAASwB,YAAa,CAACR,MAAKlB,OAAMC,YAzBqB,4GAArC,uDAmCb0B,EAAW,SAACd,GAAD,8CAAW,WAAOX,GAAP,eAAAC,EAAA,sEAE3BD,EAAS,CAAEG,KAAMf,EAAWE,aAAcgB,SAAS,IAFxB,SAGToB,YAAW,QAASf,GAHX,OAGrBC,EAHqB,OAK3BZ,EAAS,CACLG,KAAMf,EAAWG,UACjBe,QAAQ,2BAAKM,EAAIC,MAAV,IAAgBc,KAAM,MAGjC3B,EAAS,CAAEG,KAAMf,EAAWE,aAAcgB,SAAS,IAVxB,gDAY3BN,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAdZ,yDAAX,uDAmBXc,EAAa,SAAC,GAAD,IAAElC,EAAF,EAAEA,QAASC,EAAX,EAAWA,OAAQC,EAAnB,EAAmBA,KAAMiC,EAAzB,EAAyBA,OAAzB,8CAAqC,WAAO/B,GAAP,qBAAAC,EAAA,yDACvDC,EAAQ,GACN8B,EAAYnC,EAAOoC,QAAO,SAAAC,GAAG,OAAKA,EAAIZ,OACtCa,EAAYtC,EAAOoC,QAAO,SAAAC,GAAG,OAAIA,EAAIZ,OAExCS,EAAOnC,UAAYA,GACM,IAArBoC,EAAUxB,QACV2B,EAAU3B,SAAWuB,EAAOlC,OAAOW,OAPiB,6DAWvDR,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACC,SAAS,OACpDyB,EAAUxB,OAAS,GAZiC,kCAYhBC,YAAYuB,GAZI,QAY9B9B,EAZ8B,gCAcrCkC,YAAa,QAAD,OAASL,EAAOb,KAAO,CACjDtB,UAASC,OAAO,GAAD,mBAAMsC,GAAN,YAAoBjC,KACpCJ,EAAKa,OAhB+C,QAcjDC,EAdiD,OAkBvDZ,EAAS,CAAEG,KAAMf,EAAWI,YAAac,QAASM,EAAIC,KAAKC,UAE3Dd,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAAC+B,QAASzB,EAAIC,KAAKG,OApBT,kDAsBvDhB,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAxBgB,0DAArC,uDA6BbsB,EAAW,SAAC,GAAD,IAAEC,EAAF,EAAEA,KAAMzC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,OAAd,8CAA0B,WAAOC,GAAP,iBAAAC,EAAA,6DACxCa,EADwC,2BAC1ByB,GAD0B,IACpBC,MAAM,GAAD,mBAAMD,EAAKC,OAAX,CAAkB1C,EAAKiB,SACtDf,EAAS,CAAEG,KAAMf,EAAWI,YAAac,QAASQ,IAElDf,EAAO0C,KAAK,WAAY3B,GAJsB,kBAOpCsB,YAAa,QAAD,OAASG,EAAKrB,IAAd,SAA0B,KAAMpB,EAAKa,OAPb,OAUpCK,EAAM,CACRC,GAAInB,EAAKiB,KAAKG,IACdC,KAAM,2CACNC,WAAY,CAACmB,EAAKxB,KAAKG,KACvBI,IAAI,SAAD,OAAWiB,EAAKrB,KACnBtB,QAAS2C,EAAK3C,QACd2B,MAAOgB,EAAK1C,OAAO,GAAGyB,KAG1BtB,EAASwB,YAAa,CAACR,MAAKlB,OAAMC,YAnBQ,kDAsB1CC,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAxBG,0DAA1B,uDA6BX0B,EAAa,SAAC,GAAD,IAAEH,EAAF,EAAEA,KAAMzC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,OAAd,8CAA0B,WAAOC,GAAP,iBAAAC,EAAA,6DAC1Ca,EAD0C,2BAC5ByB,GAD4B,IACtBC,MAAOD,EAAKC,MAAMP,QAAO,SAAAU,GAAI,OAAIA,EAAKzB,MAAQpB,EAAKiB,KAAKG,SAClFlB,EAAS,CAAEG,KAAMf,EAAWI,YAAac,QAASQ,IAElDf,EAAO0C,KAAK,aAAc3B,GAJsB,kBAOtCsB,YAAa,QAAD,OAASG,EAAKrB,IAAd,WAA4B,KAAMpB,EAAKa,OAPb,OAUtCK,EAAM,CACRC,GAAInB,EAAKiB,KAAKG,IACdC,KAAM,2CACNC,WAAY,CAACmB,EAAKxB,KAAKG,KACvBI,IAAI,SAAD,OAAWiB,EAAKrB,MAEvBlB,EAAS4C,YAAa,CAAC5B,MAAKlB,OAAMC,YAhBU,kDAmB5CC,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OArBK,0DAA1B,uDA0Bb6B,EAAU,SAAC,GAAD,IAAEC,EAAF,EAAEA,WAAY7B,EAAd,EAAcA,GAAInB,EAAlB,EAAkBA,KAAlB,8CAA4B,WAAOE,GAAP,eAAAC,EAAA,0DAC5C6C,EAAWC,OAAM,SAAAR,GAAI,OAAIA,EAAKrB,MAAQD,KADM,0CAGrBS,YAAW,QAAD,OAAST,GAAMnB,EAAKa,OAHT,OAGjCC,EAHiC,OAIvCZ,EAAS,CAAEG,KAAMf,EAAWK,SAAUa,QAASM,EAAIC,KAAK0B,OAJjB,gDAMvCvC,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OARA,yDAA5B,uDAcVgC,EAAa,SAAC,GAAD,IAAET,EAAF,EAAEA,KAAMzC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,OAAd,8CAA0B,WAAOC,GAAP,iBAAAC,EAAA,6DAChDD,EAAS,CAAEG,KAAMf,EAAWM,YAAaY,QAASiC,IADF,kBAI1BU,YAAc,QAAD,OAASV,EAAKrB,KAAOpB,EAAKa,OAJb,OAItCC,EAJsC,OAOtCI,EAAM,CACRC,GAAIsB,EAAKrB,IACTC,KAAM,gDACNC,WAAYR,EAAIC,KAAKC,QAAQC,KAAKM,UAClCC,IAAI,SAAD,OAAWiB,EAAKrB,MAEvBlB,EAAS4C,YAAa,CAAC5B,MAAKlB,OAAMC,YAbU,gDAgB5CC,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAlBK,yDAA1B,uDAuBbkC,EAAW,SAAC,GAAD,IAAEX,EAAF,EAAEA,KAAMzC,EAAR,EAAQA,KAAR,8CAAkB,WAAOE,GAAP,eAAAC,EAAA,6DAChCkD,EADgC,eAClBrD,EAAKiB,MACzBf,EAAS,CAAEG,KAAMC,IAAYgD,KAAM9C,QAAQ,2BAAKR,GAAN,IAAYiB,KAAMoC,MAFtB,kBAK5Bf,YAAa,YAAD,OAAaG,EAAKrB,KAAO,KAAMpB,EAAKa,OALpB,uDAOlCX,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OATL,yDAAlB,uDAcXqC,EAAa,SAAC,GAAD,IAAEd,EAAF,EAAEA,KAAMzC,EAAR,EAAQA,KAAR,8CAAkB,WAAOE,GAAP,eAAAC,EAAA,6DAClCkD,EADkC,eACpBrD,EAAKiB,MACzBf,EAAS,CAAEG,KAAMC,IAAYgD,KAAM9C,QAAQ,2BAAKR,GAAN,IAAYiB,KAAMoC,MAFpB,kBAK9Bf,YAAa,cAAD,OAAeG,EAAKrB,KAAO,KAAMpB,EAAKa,OALpB,uDAOpCX,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OATH,yDAAlB,wD,0CC5M1B,IAAIsC,EAAM,CACT,SAAU,GACV,YAAa,GACb,UAAW,GACX,aAAc,GACd,YAAa,GACb,aAAc,GACd,iBAAkB,GAClB,oBAAqB,GACrB,kBAAmB,GACnB,qBAAsB,GACtB,cAAe,GACf,iBAAkB,GAClB,iBAAkB,GAClB,oBAAqB,GACrB,aAAc,GACd,gBAAiB,IAIlB,SAASC,EAAeC,GACvB,IAAIvC,EAAKwC,EAAsBD,GAC/B,OAAOE,EAAoBzC,GAE5B,SAASwC,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAEL,EAAKE,GAAM,CACpC,IAAII,EAAI,IAAIC,MAAM,uBAAyBL,EAAM,KAEjD,MADAI,EAAEE,KAAO,mBACHF,EAEP,OAAON,EAAIE,GAEZD,EAAeQ,KAAO,WACrB,OAAOC,OAAOD,KAAKT,IAEpBC,EAAeU,QAAUR,EACzBS,EAAOC,QAAUZ,EACjBA,EAAetC,GAAK,K,4RClCPmD,EAAe,CACxBC,aAAc,eACdC,cAAe,gBACfC,cAAe,gBACfC,cAAe,gBACfC,aAAc,eACdC,oBAAqB,uBAGZlD,EAAe,SAAC,GAAD,IAAER,EAAF,EAAEA,IAAKlB,EAAP,EAAOA,KAAMC,EAAb,EAAaA,OAAb,8CAAyB,WAAOC,GAAP,eAAAC,EAAA,+EAE3BS,YAAY,SAAUM,EAAKlB,EAAKa,OAFL,OAEvCC,EAFuC,OAI7Cb,EAAO0C,KAAK,eAAZ,2BACO7B,EAAIC,KAAK8D,QADhB,IAEI5D,KAAM,CACF6D,SAAU9E,EAAKiB,KAAK6D,SACpBC,OAAQ/E,EAAKiB,KAAK8D,WARmB,gDAY7C7E,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAZzB,yDAAzB,uDAgBf4B,EAAe,SAAC,GAAD,IAAE5B,EAAF,EAAEA,IAAKlB,EAAP,EAAOA,KAAMC,EAAb,EAAaA,OAAb,8CAAyB,WAAOC,GAAP,SAAAC,EAAA,+EAEvCgD,YAAc,UAAD,OAAWjC,EAAIC,GAAf,gBAAyBD,EAAIM,KAAOxB,EAAKa,OAFf,OAI7CZ,EAAO0C,KAAK,eAAgBzB,GAJiB,+CAM7ChB,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OANzB,wDAAzB,uDAUf8D,EAAc,SAACnE,GAAD,8CAAW,WAAOX,GAAP,eAAAC,EAAA,+EAEZyB,YAAW,WAAYf,GAFX,OAExBC,EAFwB,OAI9BZ,EAAS,CAAEG,KAAMiE,EAAaC,aAAc/D,QAASM,EAAIC,KAAKkE,WAJhC,gDAM9B/E,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OANxC,yDAAX,uDAWdgE,EAAe,SAAC,GAAD,IAAEhE,EAAF,EAAEA,IAAKlB,EAAP,EAAOA,KAAP,8CAAiB,WAAOE,GAAP,SAAAC,EAAA,6DACzCD,EAAS,CAACG,KAAMiE,EAAaI,cAAelE,QAAQ,2BAAKU,GAAN,IAAWiE,QAAQ,MAD7B,kBAG/B7C,YAAa,iBAAD,OAAkBpB,EAAIE,KAAO,KAAMpB,EAAKa,OAHrB,sDAKrCX,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OALjC,wDAAjB,uDASfkE,EAAoB,SAACvE,GAAD,8CAAW,WAAOX,GAAP,SAAAC,EAAA,6DACxCD,EAAS,CAACG,KAAMiE,EAAaM,oBAAqBpE,QAAS,KADnB,kBAG9B2C,YAAc,kBAAmBtC,GAHH,sDAKpCX,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OALlC,wDAAX,wD,8TCvDpBmE,EAAa,CACtBC,SAAU,WACVC,YAAa,cACbC,kBAAmB,oBACnBC,aAAc,eACdC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,oBAAqB,sBACrBC,qBAAsB,wBAKbC,EAAa,SAAC,GAAD,IAAE5E,EAAF,EAAEA,IAAKlB,EAAP,EAAOA,KAAMC,EAAb,EAAaA,OAAb,8CAAyB,WAAOC,GAAP,uBAAAC,EAAA,6DAC/CD,EAAS,CAACG,KAAMgF,EAAWE,YAAa/E,QAASU,IADF,EAGHlB,EAAKiB,KAAzCG,EAHuC,EAGvCA,IAAK2D,EAHkC,EAGlCA,OAAQgB,EAH0B,EAG1BA,SAAUjB,EAHgB,EAGhBA,SAC/B7E,EAAO0C,KAAK,aAAZ,2BAA8BzB,GAA9B,IAAmCD,KAAM,CAAEG,MAAK2D,SAAQgB,WAAUjB,eAJnB,kBAOrClE,YAAY,UAAWM,EAAKlB,EAAKa,OAPI,uDAS3CX,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAT3B,yDAAzB,uDAab8E,EAAmB,SAAC,GAAD,IAAEhG,EAAF,EAAEA,KAAF,IAAQ6B,YAAR,MAAe,EAAf,gDAAsB,WAAO3B,GAAP,iBAAAC,EAAA,+EAE5ByB,YAAW,uBAAD,OAA+B,EAAPC,GAAY7B,EAAKa,OAFvB,OAExCC,EAFwC,OAI1CmF,EAAS,GACbnF,EAAIC,KAAKmF,cAAcC,SAAQ,SAAAC,GAC3BA,EAAK9E,WAAW6E,SAAQ,SAAAE,GACjBA,EAAGjF,MAAQpB,EAAKiB,KAAKG,KACpB6E,EAAOK,KAAP,2BAAgBD,GAAhB,IAAoBhF,KAAM+E,EAAK/E,KAAMjB,MAAOgG,EAAKhG,MAAOmG,KAAMH,EAAKG,cAK/ErG,EAAS,CACLG,KAAMgF,EAAWG,kBACjBhF,QAAS,CAACyF,SAAQO,OAAQ1F,EAAIC,KAAKyF,UAfO,gDAmB9CtG,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAnBxB,yDAAtB,uDAuBnBuF,EAAc,SAAC,GAAD,IAAEzG,EAAF,EAAEA,KAAMmB,EAAR,EAAQA,GAAR,IAAYU,YAAZ,MAAmB,EAAnB,gDAA0B,WAAO3B,GAAP,iBAAAC,EAAA,+EAE3ByB,YAAW,WAAD,OAAYT,EAAZ,kBAA+B,EAAPU,GAAY7B,EAAKa,OAFxB,OAEvCC,EAFuC,OAGvC4F,EAHuC,2BAGzB5F,EAAIC,MAHqB,IAGf4F,SAAU7F,EAAIC,KAAK4F,SAASC,YAE1D1G,EAAS,CAACG,KAAMgF,EAAWI,aAAcjF,QAAQ,2BAAKkG,GAAN,IAAetF,IAAKD,EAAIU,WAL3B,gDAO7C3B,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAPzB,yDAA1B,uDAWd2F,EAAmB,SAAC,GAAD,IAAE7G,EAAF,EAAEA,KAAMmB,EAAR,EAAQA,GAAR,IAAYU,YAAZ,MAAmB,EAAnB,gDAA0B,WAAO3B,GAAP,iBAAAC,EAAA,+EAEhCyB,YAAW,WAAD,OAAYT,EAAZ,kBAA+B,EAAPU,GAAY7B,EAAKa,OAFnB,OAE5CC,EAF4C,OAG5C4F,EAH4C,2BAG9B5F,EAAIC,MAH0B,IAGpB4F,SAAU7F,EAAIC,KAAK4F,SAASC,YAE1D1G,EAAS,CAACG,KAAMgF,EAAWK,gBAAiBlF,QAAQ,2BAAKkG,GAAN,IAAetF,IAAKD,EAAIU,WALzB,gDAOlD3B,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAPpB,yDAA1B,uDAWnB4F,EAAiB,SAAC,GAAD,IAAE5F,EAAF,EAAEA,IAAKH,EAAP,EAAOA,KAAMf,EAAb,EAAaA,KAAb,8CAAuB,WAAOE,GAAP,eAAAC,EAAA,6DAC3CuG,EAAUK,YAAWhG,EAAMG,EAAIE,KACrClB,EAAS,CAACG,KAAMgF,EAAWM,gBAAiBnF,QAAS,CAACkG,UAAStF,IAAKF,EAAI8F,aAFvB,kBAIvC7D,YAAc,WAAD,OAAYjC,EAAIE,KAAOpB,EAAKa,OAJF,uDAM7CX,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OANzB,yDAAvB,uDAUjB+F,EAAqB,SAAC,GAAD,IAAEjH,EAAF,EAAEA,KAAMmB,EAAR,EAAQA,GAAR,8CAAgB,WAAOjB,GAAP,SAAAC,EAAA,6DAC9CD,EAAS,CAACG,KAAMgF,EAAWO,oBAAqBpF,QAASW,IADX,kBAGpCgC,YAAc,gBAAD,OAAiBhC,GAAMnB,EAAKa,OAHL,sDAK1CX,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAL5B,wDAAhB,wD,yDCxEnBgG,IATA,SAAC,GAAiB,IAAhBC,EAAe,EAAfA,IAAKC,EAAU,EAAVA,KACVC,EAAUC,aAAY,SAAAC,GAAK,OAAIA,KAA/BF,MAER,OACI,qBAAKF,IAAKA,EAAKK,IAAI,SAASC,UAAWL,EACvCM,MAAO,CAACvF,OAAO,GAAD,OAAKkF,EAAQ,YAAc,kB,kBCRjD,SAASM,EAAoBjE,GAC5B,IAAII,EAAI,IAAIC,MAAM,uBAAyBL,EAAM,KAEjD,MADAI,EAAEE,KAAO,mBACHF,EAEP6D,EAAoB1D,KAAO,WAAa,MAAO,IAC/C0D,EAAoBxD,QAAUwD,EAC9BvD,EAAOC,QAAUsD,EACjBA,EAAoBxG,GAAK,K,6GCKVyG,EAXE,WACb,OACI,qBAAKH,UAAU,oBAAoBC,MAAO,CAACG,UAAW,sBAAtD,SACI,oBAAIJ,UAAU,mCACdC,MAAO,CAACI,IAAK,MAAOC,KAAM,MAAOC,UAAW,yBAD5C,iF,OC2BGC,EAjBI,WAAO,IAAD,EACFC,cAAZrG,EADc,EACdA,KAAMV,EADQ,EACRA,GAGTgH,EAAW,GAUf,OAZiBb,aAAY,SAAAC,GAAK,OAAIA,KAA9BvH,KAIAa,QAEAsH,EADDhH,EACS,UAAMU,EAAN,SAEA,UAAMA,IApBL,SAACsG,GAGlB,IACI,OAAOC,IAAMC,cAHOC,OAAQ,YAAYH,IAAYI,SAItD,MAAOC,GACL,OAAO,cAAC,EAAD,KAkBJC,CAAaN,I,OCtBTO,EALO,SAACC,GAEnB,OADmBC,aAAaC,QAAQ,cACpB,cAAC,IAAD,eAAWF,IAAY,cAAC,IAAD,CAAUG,GAAG,O,+BCa7CC,EAfC,WACZ,OACI,qBAAKtB,UAAU,iDACfC,MAAO,CAACsB,WAAY,QAASC,MAAO,QAASnB,IAAK,EAAGC,KAAM,EAAGmB,OAAQ,IADtE,SAGI,sBAAKC,MAAM,MAAMC,OAAO,MAAMC,QAAQ,YAAtC,UACI,yBAASC,OAAO,OAAOC,YAAY,IAAIC,KAAK,OAC5CC,OAAO,oBACP,sBAAMD,KAAK,OAAOE,EAAE,IAAIC,EAAE,KAA1B,sCCWDC,EAnBD,SAAC,GAAgC,IAA/B1I,EAA8B,EAA9BA,IAAK2I,EAAyB,EAAzBA,WAAYC,EAAa,EAAbA,QAC7B,OACI,sBAAKrC,UAAS,+CAA0CqC,GACxDpC,MAAO,CAACI,IAAK,MAAOiC,MAAO,MAAOC,SAAU,QAASd,OAAQ,IAD7D,UAEI,sBAAKzB,UAAS,kCAA6BqC,GAA3C,UACI,wBAAQrC,UAAU,qBAAlB,SAAwCvG,EAAI+I,QAC5C,wBAAQxC,UAAU,6BAClByC,eAAa,QAAQxC,MAAO,CAACyC,QAAS,QACtCC,QAASP,EAFT,qBAMJ,qBAAKpC,UAAU,aAAf,SACKvG,EAAImJ,WCiBNC,EAzBA,WAAO,IACVC,EAAUjD,aAAY,SAAAC,GAAK,OAAIA,KAA/BgD,MACFrK,EAAWsK,cAEjB,OACI,gCACKD,EAAM9J,SAAW,cAAC,EAAD,IAGd8J,EAAMzI,OACN,cAAC,EAAD,CAAOZ,IAAK,CAAC+I,MAAO,WAAOI,KAAME,EAAMzI,OACvC+H,WAAY,kBAAM3J,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,MAC9DsJ,QAAQ,cAIRS,EAAMhI,SACN,cAAC,EAAD,CAAOrB,IAAK,CAAC+I,MAAO,mBAAcI,KAAME,EAAMhI,SAC9CsH,WAAY,kBAAM3J,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,MAC9DsJ,QAAQ,mB,yCCiETW,EAnFK,WAAO,IAAD,EACGnD,aAAY,SAAAC,GAAK,OAAIA,KAAtCvH,EADc,EACdA,KAAM6E,EADQ,EACRA,OACR3E,EAAWsK,cAmBjB,OACI,sBAAK9C,MAAO,CAACsC,SAAU,SAAvB,UACI,qBAAKvC,UAAU,yDAAf,SACI,mDAEJ,oBAAIA,UAAU,SAGa,IAAvB5C,EAAO9D,KAAKL,QACZ,qBAAKyG,ICtCN,qoLDsCqBK,IAAI,WAAWC,UAAU,UAGjD,qBAAKC,MAAO,CAACgD,UAAW,sBAAuBC,SAAU,QAAzD,SAEQ9F,EAAO9D,KAAKyC,KAAI,SAACtC,EAAK0J,GAAN,OACZ,sBAAiBnD,UAAU,YAA3B,UACI,eAAC,IAAD,CAAMqB,GAAE,UAAK5H,EAAIM,KAAOiG,UAAU,sCAClC2C,QAAS,kBAlCZ,SAAClJ,GAClBhB,EAASgF,YAAa,CAAChE,MAAKlB,UAiCO6K,CAAa3J,IAD5B,UAEI,cAACgG,EAAA,EAAD,CAAQC,IAAKjG,EAAID,KAAK8D,OAAQqC,KAAK,eAEnC,sBAAKK,UAAU,iBAAf,UACI,gCACI,wBAAQA,UAAU,OAAlB,SAA0BvG,EAAID,KAAK6D,WACnC,+BAAO5D,EAAIG,UAEdH,EAAIpB,SAAW,kCAAQoB,EAAIpB,QAAQgL,MAAM,EAAE,IAA5B,YAIhB5J,EAAIO,OACJ,qBAAKiG,MAAO,CAACyB,MAAO,QAApB,SAEQjI,EAAIO,MAAMsJ,MAAM,UACd,uBAAO5D,IAAKjG,EAAIO,MAAO0H,MAAM,SAC7B,cAACjC,EAAA,EAAD,CAAQC,IAAKjG,EAAIO,MAAO2F,KAAK,uBAM/C,wBAAOK,UAAU,iDAAjB,UACKuD,IAAO9J,EAAI+J,WAAWC,WAElBhK,EAAIiE,QAAU,mBAAGsC,UAAU,oCA5B9BmD,QAqCtB,oBAAInD,UAAU,SACd,qBAAKA,UAAU,8BAA8BC,MAAO,CAACyD,OAAQ,WAC7Df,QA/DgB,WACpB,IAAMnE,EAASpB,EAAO9D,KAAKoB,QAAO,SAAAiE,GAAI,OAAoB,IAAhBA,EAAKjB,UAC/C,OAAqB,IAAlBc,EAAOvF,QAEP0K,OAAOC,QAAP,yBAAyBpF,EAAOvF,OAAhC,kFAF4BR,EAASkF,YAAkBpF,EAAKa,aAE/D,GA0DI,iCEIGyK,EA9EF,WACT,IADe,EAMiBhE,aAAY,SAAAC,GAAK,OAAIA,KAA7CvH,EANO,EAMPA,KAAMqH,EANC,EAMDA,MAAOxC,EANN,EAMMA,OACf3E,EAAWsK,cACTe,EAAaC,cAAbD,SAEFE,EAAW,SAACC,GACd,GAAGA,IAAOH,EAAU,MAAO,UAG/B,OACI,qBAAK9D,UAAU,OAAf,SACI,qBAAIA,UAAU,sBAAd,UAfS,CACb,CAAEkE,MAAO,OAAQC,KAAM,OAAQC,KAAM,KACrC,CAAEF,MAAO,UAAWC,KAAM,UAAWC,KAAM,aAetBrI,KAAI,SAACsI,EAAMlB,GAAP,OACT,oBAAInD,UAAS,wBAAmBgE,EAASK,EAAKD,OAA9C,SACI,cAAC,IAAD,CAAMpE,UAAU,WAAWqB,GAAIgD,EAAKD,KAApC,SACI,sBAAMpE,UAAU,iBAAhB,SAAkCqE,EAAKF,UAFahB,MAQpE,qBAAInD,UAAU,oBAAoBC,MAAO,CAACqE,QAAS,GAAnD,UACI,uBAAMtE,UAAU,6BAA6BtG,GAAG,iBAChD6K,KAAK,SAASC,cAAY,WAAWC,gBAAc,OAAOC,gBAAc,QADxE,UAGI,sBAAM1E,UAAU,iBAChBC,MAAO,CAACuB,MAAOpE,EAAO9D,KAAKL,OAAS,EAAI,UAAY,IADpD,2BAKA,sBAAM+G,UAAU,gBAAhB,SAAiC5C,EAAO9D,KAAKL,YAIjD,qBAAK+G,UAAU,gBAAgB2E,kBAAgB,iBAC/C1E,MAAO,CAACM,UAAW,oBADnB,SAEI,cAAC,EAAD,SAMR,qBAAIP,UAAU,oBAAoBC,MAAO,CAACqE,QAAS,GAAnD,UACI,sBAAMtE,UAAU,2BAA2BtG,GAAG,iBAC9C6K,KAAK,SAASC,cAAY,WAAWC,gBAAc,OAAOC,gBAAc,QADxE,SAEI,cAACjF,EAAA,EAAD,CAAQC,IAAKnH,EAAKiB,KAAK8D,OAAQqC,KAAK,oBAGxC,sBAAKK,UAAU,gBAAgB2E,kBAAgB,iBAA/C,UACA,cAAC,IAAD,CAAM3E,UAAU,gBAAgBqB,GAAE,mBAAc9I,EAAKiB,KAAKG,KAA1D,iCAEA,uBAAOiL,QAAQ,QAAQ5E,UAAU,gBACjC2C,QAAS,kBAAMlK,EAAS,CACpBG,KAAMC,IAAYgM,MAAO9L,SAAU6G,KAFvC,SAKKA,EAAQ,gCAAgB,mCAG7B,qBAAKI,UAAU,qBACf,cAAC,IAAD,CAAMA,UAAU,gBAAgBqB,GAAG,IACnCsB,QAAS,kBAAMlK,EAASqM,gBADxB,kD,qDCFLC,EAjEA,WAAO,IAAD,EACWC,mBAAS,IADpB,mBACVC,EADU,KACFC,EADE,OAESF,mBAAS,IAFlB,mBAEVG,EAFU,KAEHC,EAFG,KAIT7M,EAASsH,aAAY,SAAAC,GAAK,OAAIA,KAA9BvH,KACFE,EAAWsK,cALA,EAMOiC,oBAAS,GANhB,mBAMVK,EANU,KAMJC,EANI,KASXC,EAAY,uCAAG,WAAOlJ,GAAP,eAAA3D,EAAA,yDACjB2D,EAAEmJ,iBACEP,EAFa,iEAKbK,GAAQ,GALK,SAMKnL,YAAW,mBAAD,OAAoB8K,GAAU1M,EAAKa,OANlD,OAMPC,EANO,OAOb+L,EAAS/L,EAAIC,KAAK6L,OAClBG,GAAQ,GARK,kDAUb7M,EAAS,CACLG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAXnD,0DAAH,sDAgBZgM,EAAc,WAChBP,EAAU,IACVE,EAAS,KAGb,OACI,uBAAMpF,UAAU,cAAc0F,SAAUH,EAAxC,UACI,uBAAO3M,KAAK,OAAO+M,KAAK,SAASC,MAAOX,EAAQvL,GAAG,SAAS8I,MAAM,kBAClEqD,SAAU,SAAAxJ,GAAC,OAAI6I,EAAU7I,EAAEyJ,OAAOF,MAAMG,cAAcC,QAAQ,KAAM,QAEpE,sBAAKhG,UAAU,cAAcC,MAAO,CAACqE,QAASW,EAAS,EAAI,IAA3D,UACI,sBAAMjF,UAAU,iBAAhB,oBACA,wDAGJ,qBAAKA,UAAU,eAAe2C,QAAS8C,EACvCxF,MAAO,CAACqE,QAA0B,IAAjBa,EAAMlM,OAAe,EAAI,GAD1C,kBAKA,wBAAQL,KAAK,SAASqH,MAAO,CAACgG,QAAS,QAAvC,oBAEEZ,GAAQ,qBAAKrF,UAAU,UAAUN,IAAKwG,IAAUnG,IAAI,YAEtD,qBAAKC,UAAU,QAAf,SAEQiF,GAAUE,EAAMpJ,KAAI,SAAAvC,GAAI,OACpB,cAAC2M,EAAA,EAAD,CAEA3M,KAAMA,EACN4M,OAAO,SACPX,YAAaA,GAHRjM,EAAKG,cCjCnB0M,EAtBA,WAEX,OACI,qBAAKrG,UAAU,kBAAf,SACI,sBAAKA,UAAU,wFAAf,UAGI,cAAC,IAAD,CAAMqB,GAAG,IAAIrB,UAAU,OAAvB,SACI,oBAAIA,UAAU,sCACd2C,QAAS,kBAAMgB,OAAO2C,SAAS,CAACjG,IAAK,KADrC,qBAMJ,cAAC,EAAD,IAEA,cAAC,EAAD,U,+BCqLDkG,EAnMK,WAAO,IAAD,EACkB1G,aAAY,SAAAC,GAAK,OAAIA,KAArDvH,EADc,EACdA,KAAMqH,EADQ,EACRA,MAAOpF,EADC,EACDA,OAAQhC,EADP,EACOA,OACvBC,EAAWsK,cAFK,EAIQiC,mBAAS,IAJjB,mBAIf3M,EAJe,KAINmO,EAJM,OAKMxB,mBAAS,IALf,mBAKf1M,EALe,KAKPmO,EALO,OAOMzB,oBAAS,GAPf,mBAOf0B,EAPe,KAOPC,EAPO,KAQhBC,EAAWC,mBACXC,EAAYD,mBATI,EAUM7B,mBAAS,IAVf,mBAUf+B,EAVe,KAUPC,EAVO,KAmGtB,OAVAC,qBAAU,WACHzM,EAAO0M,SACNV,EAAWhM,EAAOnC,SAClBoO,EAAUjM,EAAOlC,WAEvB,CAACkC,IAMC,qBAAKwF,UAAU,eAAf,SACI,uBAAM0F,SAhCO,SAACrJ,GAElB,GADAA,EAAEmJ,iBACmB,IAAlBlN,EAAOW,OACV,OAAOR,EAAS,CACZG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,gCAG3CG,EAAO0M,OACNzO,EAAS8B,YAAW,CAAClC,UAASC,SAAQC,OAAMiC,YAE5C/B,EAASL,YAAW,CAACC,UAASC,SAAQC,OAAMC,YAIhDgO,EAAW,IACXC,EAAU,IACPM,GAAQA,EAAOI,OAClB1O,EAAS,CAAEG,KAAMC,IAAYuO,OAAQrO,SAAS,KAe1C,UACI,sBAAKiH,UAAU,gBAAf,UACI,oBAAIA,UAAU,MAAd,sBACA,sBAAM2C,QAAS,kBAAMlK,EAAS,CAC1BG,KAAMC,IAAYuO,OAAQrO,SAAS,KADvC,qBAOJ,sBAAKiH,UAAU,cAAf,UACI,0BAAU2F,KAAK,UAAUC,MAAOvN,EAChCgP,YAAW,UAAK9O,EAAKiB,KAAK6D,SAAf,yCACXwI,SAAU,SAAAxJ,GAAC,OAAImK,EAAWnK,EAAEyJ,OAAOF,QACnC3F,MAAO,CACHvF,OAAQkF,EAAQ,YAAc,YAC9B4B,MAAO5B,EAAQ,QAAU,OACzB2B,WAAY3B,EAAQ,kBAAoB,MAG5C,sBAAKI,UAAU,SAAf,UACI,qBAAKA,UAAU,cACf,cAACsH,EAAA,EAAD,CAAOd,WAAYA,EAAYnO,QAASA,EAASuH,MAAOA,OAG5D,qBAAKI,UAAU,cAAf,SAEQ1H,EAAOyD,KAAI,SAACpB,EAAKwI,GAAN,OACP,sBAAiBzJ,GAAG,WAApB,UAEQiB,EAAI4M,OAASC,YAAU7M,EAAI4M,OAAQ3H,GACjCjF,EAAIZ,IACD,mCAEOY,EAAIZ,IAAIuJ,MAAM,UACZmE,YAAU9M,EAAIZ,IAAK6F,GACnB4H,YAAU7M,EAAIZ,IAAK6F,KAG5B,mCAEOjF,EAAI/B,KAAK0K,MAAM,UACbmE,YAAUC,IAAIC,gBAAgBhN,GAAMiF,GACpC4H,YAAUE,IAAIC,gBAAgBhN,GAAMiF,KAItD,sBAAM+C,QAAS,kBArH1B,SAACQ,GAClB,IAAM3E,EAAM,YAAOlG,GACnBkG,EAAOoJ,OAAOzE,EAAO,GACrBsD,EAAUjI,GAkHuCqJ,CAAa1E,IAAlC,oBAnBMA,QA0BlBuD,GACA,sBAAK1G,UAAU,2BAAf,UACI,uBAAO8H,UAAQ,EAACC,OAAK,EAACC,IAAKpB,EAAUlF,MAAM,OAAOC,OAAO,OACzD1B,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,eAEtC,sBAAM+C,QAhGL,WACrBoE,EAAOI,OACPR,GAAU,IA8FU,kBACA,wBAAQqB,IAAKlB,EAAW7G,MAAO,CAACgG,QAAS,aAIjD,qBAAKjG,UAAU,eAAf,SAEQ0G,EACE,mBAAG1G,UAAU,gBAAgB2C,QArHjC,WAClB,IAAMjB,EAAQkF,EAASqB,QAAQC,YACzBvG,EAASiF,EAASqB,QAAQE,aAEhCrB,EAAUmB,QAAQG,aAAa,QAAS1G,GACxCoF,EAAUmB,QAAQG,aAAa,SAAUzG,GAE7BmF,EAAUmB,QAAQI,WAAW,MACrCC,UAAU1B,EAASqB,QAAS,EAAG,EAAGvG,EAAOC,GAC7C,IAAI+F,EAAMZ,EAAUmB,QAAQM,YAC5B9B,EAAU,GAAD,mBAAKnO,GAAL,CAAa,CAACiP,OAAQG,SA4GT,qCACE,mBAAG1H,UAAU,gBAAgB2C,QArIpC,WACjBgE,GAAU,GACP6B,UAAUC,cAAgBD,UAAUC,aAAaC,cAChDF,UAAUC,aAAaC,aAAa,CAACC,OAAO,IAC3CC,MAAK,SAAAC,GACFjC,EAASqB,QAAQa,UAAYD,EAC7BjC,EAASqB,QAAQc,OAEjB,IAAMC,EAAQH,EAAYI,YAC1BjC,EAAUgC,EAAM,OACjBE,OAAM,SAAAnI,GAAG,OAAIoI,QAAQC,IAAIrI,SA6HR,sBAAKf,UAAU,cAAf,UACI,mBAAGA,UAAU,iBACb,uBAAOpH,KAAK,OAAO+M,KAAK,OAAOjM,GAAG,OAClC2P,UAAQ,EAACC,OAAO,kBAAkBzD,SAnKvC,SAAAxJ,GACvB,IAAMkN,EAAK,YAAOlN,EAAEyJ,OAAOyD,OACvBxI,EAAM,GACNyI,EAAY,GAEhBD,EAAM7K,SAAQ,SAAA+K,GACV,OAAIA,EAEDA,EAAK9J,KAAO,SACJoB,EAAM,iEAGVyI,EAAU3K,KAAK4K,GANL1I,EAAM,qCASxBA,GAAKtI,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO0G,KAC7D0F,EAAU,GAAD,mBAAKnO,GAAWkR,kBA4JjB,qBAAKxJ,UAAU,gBAAf,SACI,wBAAQA,UAAU,0BAA0BpH,KAAK,SAAjD,2C,kCChML,MAA0B,4CCoM1B8Q,EA9KM,WAAO,IAAD,EACwB7J,aAAY,SAAAC,GAAK,OAAIA,KAA5DvH,EADe,EACfA,KAAMC,EADS,EACTA,OAAQ4E,EADC,EACDA,OAAQuM,EADP,EACOA,OAAQ7K,EADf,EACeA,KAChCrG,EAAWsK,cAEX6G,EAAW/C,mBAiKjB,OA9JAI,qBAAU,WACNzO,EAAO0C,KAAK,WAAY3C,EAAKiB,QAC/B,CAAChB,EAAQD,EAAKiB,OAGhByN,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,gBAAgB,SAAAtQ,GACtBd,EAAS,CAACG,KAAMf,IAAWI,YAAac,QAASQ,OAG9C,kBAAMf,EAAOsR,IAAI,mBAC1B,CAACtR,EAAQC,IAEXwO,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,kBAAkB,SAAAtQ,GACxBd,EAAS,CAACG,KAAMf,IAAWI,YAAac,QAASQ,OAG9C,kBAAMf,EAAOsR,IAAI,qBAC1B,CAACtR,EAAQC,IAIXwO,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,yBAAyB,SAAAtQ,GAC/Bd,EAAS,CAACG,KAAMf,IAAWI,YAAac,QAASQ,OAG9C,kBAAMf,EAAOsR,IAAI,4BAC1B,CAACtR,EAAQC,IAEXwO,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,yBAAyB,SAAAtQ,GAC/Bd,EAAS,CAACG,KAAMf,IAAWI,YAAac,QAASQ,OAG9C,kBAAMf,EAAOsR,IAAI,4BAC1B,CAACtR,EAAQC,IAIXwO,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,kBAAkB,SAAAjO,GACxBnD,EAAS,CAACG,KAAMC,IAAYgD,KAAM9C,QAAQ,2BAAKR,GAAN,IAAYiB,KAAMoC,SAGxD,kBAAMpD,EAAOsR,IAAI,qBAC1B,CAACtR,EAAQC,EAAUF,IAErB0O,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,oBAAoB,SAAAjO,GAC1BnD,EAAS,CAACG,KAAMC,IAAYgD,KAAM9C,QAAQ,2BAAKR,GAAN,IAAYiB,KAAMoC,SAGxD,kBAAMpD,EAAOsR,IAAI,uBAC1B,CAACtR,EAAQC,EAAUF,IAIrB0O,qBAAU,WAaN,OAZAzO,EAAOqR,GAAG,wBAAwB,SAAApQ,GA/EhB,IAACmJ,EAAMuB,EAAMpK,EAgF3BtB,EAAS,CAACG,KAAMiE,IAAaE,cAAehE,QAASU,IAElD2D,EAAO2M,OAAOH,EAAS3B,QAAQc,OAlFnBnG,EAoFXnJ,EAAID,KAAK6D,SAAW,IAAM5D,EAAIG,KApFbuK,EAqFjB1K,EAAID,KAAK8D,OArFcvD,EAsFvBN,EAAIM,IAlFR,IAAIiQ,aAmFA,cAtFE,CACVpH,OAAMuB,SAIR8F,QAAU,SAAA5N,GACRA,EAAEmJ,iBACF7B,OAAOuG,KAAKnQ,EAAK,cAmFV,kBAAMvB,EAAOsR,IAAI,2BAC1B,CAACtR,EAAQC,EAAU2E,EAAO2M,QAE5B9C,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,wBAAwB,SAAApQ,GAC9BhB,EAAS,CAACG,KAAMiE,IAAaG,cAAejE,QAASU,OAGlD,kBAAMjB,EAAOsR,IAAI,2BAC1B,CAACtR,EAAQC,IAIXwO,qBAAU,WAcN,OAbAzO,EAAOqR,GAAG,sBAAsB,SAAApQ,GAC5BhB,EAAS,CAACG,KAAMgF,IAAWE,YAAa/E,QAASU,IAEjDhB,EAAS,CACLG,KAAMgF,IAAWC,SACjB9E,QAAQ,2BACDU,EAAID,MADJ,IAEHI,KAAMH,EAAIG,KACVjB,MAAOc,EAAId,aAKhB,kBAAMH,EAAOsR,IAAI,yBAC1B,CAACtR,EAAQC,IAGXwO,qBAAU,WACNzO,EAAO0C,KAAK,kBAAmB3C,EAAKiB,QACtC,CAAChB,EAAQD,EAAKiB,OAEhByN,qBAAU,WASN,OARAzO,EAAOqR,GAAG,uBAAuB,SAAAvQ,GAC7BA,EAAKoF,SAAQ,SAAAC,GACLgL,EAAOQ,SAASxL,EAAKjF,KACrBjB,EAAS,CAACG,KAAMC,IAAYuR,OAAQrR,QAAS4F,EAAKjF,WAKvD,kBAAMlB,EAAOsR,IAAI,0BAC1B,CAACtR,EAAQC,EAAUkR,IAErB1C,qBAAU,WAON,OANAzO,EAAOqR,GAAG,2BAA2B,SAAAnQ,GAC7BiQ,EAAOQ,SAASzQ,IAChBjB,EAAS,CAACG,KAAMC,IAAYuR,OAAQrR,QAASW,OAI9C,kBAAMlB,EAAOsR,IAAI,8BAC1B,CAACtR,EAAQC,EAAUkR,IAGrB1C,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,oBAAoB,SAAAnQ,GAC1BjB,EAAS,CAACG,KAAMC,IAAYwR,QAAStR,QAASW,OAG3C,kBAAMlB,EAAOsR,IAAI,uBAC1B,CAACtR,EAAQC,IAIXwO,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,oBAAoB,SAAAvQ,GAC1Bb,EAAS,CAACG,KAAMC,IAAYyR,KAAMvR,QAASO,OAGxC,kBAAMd,EAAOsR,IAAI,uBAC1B,CAACtR,EAAQC,IAEXwO,qBAAU,WAKN,OAJAzO,EAAOqR,GAAG,YAAY,SAAAvQ,GAClBb,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAM,GAAD,OAAKyE,EAAKzB,SAAV,mBAG/C,kBAAM7E,EAAOsR,IAAI,eAC1B,CAACtR,EAAQC,EAAUqG,IAKjB,mCACI,uBAAOyL,UAAQ,EAACvC,IAAK4B,EAAU3J,MAAO,CAACgG,QAAS,QAAhD,SACI,wBAAQvG,IAAK8K,EAAW5R,KAAK,mBC9L9B,MAA0B,mCCsR1B6R,EA/QG,WAAO,IAAD,EACwB5K,aAAY,SAAAC,GAAK,OAAIA,KAAzDhB,EADY,EACZA,KAAMvG,EADM,EACNA,KAAMmS,EADA,EACAA,KAAMlS,EADN,EACMA,OAAQoH,EADd,EACcA,MAC5BnH,EAAWsK,cAFG,EAIMiC,mBAAS,GAJf,mBAIb2F,EAJa,KAINC,EAJM,OAKI5F,mBAAS,GALb,mBAKb6F,EALa,KAKPC,EALO,OAMQ9F,mBAAS,GANjB,mBAMb+F,EANa,KAMLC,EANK,OAOMhG,mBAAS,GAPf,mBAObiG,EAPa,KAONC,EAPM,OASQlG,oBAAS,GATjB,mBASbmG,EATa,KASLC,EATK,KAUdC,EAAWxE,mBACXyE,EAAazE,mBAXC,EAYQ7B,mBAAS,MAZjB,mBAYb+B,EAZa,KAYLC,EAZK,OAaUhC,mBAAS,MAbnB,mBAabuG,EAba,KAaJC,EAbI,KAgBpBvE,qBAAU,WAON,OANgB,SAAVwE,IACFP,GAAS,SAAAQ,GAAC,OAAIA,EAAI,KAClBC,WAAWF,EAAS,KAExBA,GAEO,kBAAMP,EAAS,MACxB,IAEFjE,qBAAU,WACN+D,EAAUC,EAAM,IAChBH,EAAQc,SAASX,EAAM,KACvBL,EAASgB,SAASX,EAAM,SAC1B,CAACA,IAIH,IAAMY,EAAiBC,uBAAY,SAAChN,EAAMiN,EAAOC,GAC7C,GAAGlN,EAAKS,YAAchH,EAAKiB,KAAKG,KAAOqS,EAAW,CAC9C,IAAMvS,EAAM,CACRwS,OAAQnN,EAAKmN,OACb1M,UAAWT,EAAKS,UAChB3F,KAAM,GACNjB,MAAO,GACPmG,KAAM,CAAC6J,MAAO7J,EAAK6J,MAAOoD,SAC1BvI,WAAW,IAAI0I,MAAOC,eAE1B1T,EAAS4F,YAAW,CAAC5E,MAAKlB,OAAMC,eAEtC,CAACD,EAAME,EAAUD,IAEb4T,EAAgB,WAClBrF,GAAUA,EAAOrI,SAAQ,SAAAsK,GAAK,OAAIA,EAAM7B,UACrCoE,GAASA,EAAQc,QACpB,IAAIN,EAAQZ,EAASF,EAAQ,EAC7BzS,EAAO0C,KAAK,UAAZ,2BAA2B4D,GAA3B,IAAiCiN,WAEjCF,EAAe/M,EAAMiN,GACrBtT,EAAS,CAACG,KAAMC,IAAYyR,KAAMvR,QAAS,QAG/CkO,qBAAU,WACN,IAAGkE,EAEE,CACD,IAAMmB,EAAQX,YAAW,WACrBnT,EAAO0C,KAAK,UAAZ,2BAA2B4D,GAA3B,IAAiCiN,MAAO,KACxCF,EAAe/M,EAAM,GACrBrG,EAAS,CAACG,KAAMC,IAAYyR,KAAMvR,QAAS,SAC5C,MAEH,OAAO,kBAAMwT,aAAaD,IAR1BpB,EAAS,KAWf,CAACzS,EAAU0S,EAAQrM,EAAMtG,EAAQqT,IAEnC5E,qBAAU,WAQN,OAPAzO,EAAOqR,GAAG,mBAAmB,SAAAvQ,GACzByN,GAAUA,EAAOrI,SAAQ,SAAAsK,GAAK,OAAIA,EAAM7B,UACrCoE,GAASA,EAAQc,QACpBR,EAAevS,EAAMA,EAAKyS,OAC1BtT,EAAS,CAAEG,KAAMC,IAAYyR,KAAMvR,QAAS,UAGzC,kBAAMP,EAAOsR,IAAI,sBAC1B,CAACtR,EAAQC,EAAUsO,EAAQ8E,EAAgBN,IAI7C,IAAMiB,EAAa,SAAC7D,GAChB,IAAM8D,EAAS,CAAEC,OAAO,EAAM/D,SAC9B,OAAOH,UAAUC,aAAaC,aAAa+D,IAGzCE,EAAa,SAACC,EAAKlG,GACrB,IAAIiC,EAAQiE,EACZjE,EAAMG,UAAYpC,EAClBiC,EAAMI,QAIJ8D,EAAe,WACjBL,EAAW1N,EAAK6J,OAAOC,MAAK,SAAAlC,GACxBiG,EAAWtB,EAASpD,QAASvB,GAC7B,IAAMsC,EAAQtC,EAAOuC,YACrBjC,EAAUgC,GAEV,IAAMuC,EAAUb,EAAK5L,KAAKA,EAAKgO,OAAQpG,GACvC6E,EAAQ1B,GAAG,UAAU,SAASkD,GAC1BJ,EAAWrB,EAAWrD,QAAS8E,MAEnC3B,GAAU,GACVI,EAAWD,OAInBtE,qBAAU,WAmBN,OAlBAyD,EAAKb,GAAG,QAAQ,SAAA0B,GACZiB,EAAW1N,EAAK6J,OAAOC,MAAK,SAAAlC,GACrB2E,EAASpD,SACR0E,EAAWtB,EAASpD,QAASvB,GAEjC,IAAMsC,EAAQtC,EAAOuC,YACrBjC,EAAUgC,GAEVuC,EAAQJ,OAAOzE,GACf6E,EAAQ1B,GAAG,UAAU,SAASkD,GACvBzB,EAAWrD,SACV0E,EAAWrB,EAAWrD,QAAS8E,MAGvC3B,GAAU,GACVI,EAAWD,SAGZ,kBAAMb,EAAKsC,eAAe,WACnC,CAACtC,EAAM5L,EAAK6J,QAGd1B,qBAAU,WAeN,OAdAzO,EAAOqR,GAAG,oBAAoB,WAC1B9C,GAAUA,EAAOrI,SAAQ,SAAAsK,GAAK,OAAIA,EAAM7B,UACrCoE,GAASA,EAAQc,QAEpBR,EAAe/M,EADHqM,EAASF,EAAQ,GACD,GAE5BxS,EAAS,CAACG,KAAMC,IAAYyR,KAAMvR,QAAS,OAE3CN,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAM,OAAD,OAASyE,EAAKzB,SAAd,qBAIhB,kBAAM7E,EAAOsR,IAAI,uBAC1B,CAACtR,EAAQuO,EAAQtO,EAAUqG,EAAM+M,EAAgBV,EAAQF,EAAOM,IAGlE,IAIM0B,EAAa,SAACC,GAChBA,EAASC,QACTD,EAASE,YAAc,GAe3B,OAZAnG,qBAAU,WACN,IAAIiG,EAAW,IAAIG,MAAMC,GAOzB,OANGnC,EACC8B,EAAWC,GAZD,SAACA,GACfA,EAASnE,OAaLwE,CAAUL,GAGP,kBAAMD,EAAWC,MAC1B,CAAC/B,IAIC,sBAAKnL,UAAU,aAAf,UACI,sBAAKA,UAAU,WAAWC,MAAO,CAC7BgG,QAAUkF,GAAUrM,EAAK6J,MAAS,OAAS,QAD/C,UAII,sBAAK3I,UAAU,cAAcC,MAAO,CAACuN,QAAS,UAA9C,UACI,cAAC/N,EAAA,EAAD,CAAQC,IAAKZ,EAAKxB,OAAQqC,KAAK,kBAC/B,6BAAKb,EAAKzB,WACV,6BAAKyB,EAAKR,WAGN6M,EACE,gCACE,+BAAQR,EAAM8C,WAAWxU,OAAS,EAAI,IAAM0R,EAAQA,IACpD,qCACA,+BAAQE,EAAK4C,WAAWxU,OAAS,EAAI,IAAM4R,EAAOA,IAClD,qCACA,+BAAQE,EAAO0C,WAAWxU,OAAS,EAAI,IAAM8R,EAASA,OAExD,8BAEMjM,EAAK6J,MACH,+DACA,0EAQbwC,GACD,sBAAKnL,UAAU,QAAf,UACI,gCAAS6K,EAAK4C,WAAWxU,OAAS,EAAI,IAAM4R,EAAOA,IACnD,sCACA,gCAASE,EAAO0C,WAAWxU,OAAS,EAAI,IAAM8R,EAASA,OAK/D,sBAAK/K,UAAU,YAAf,UACI,wBAAQA,UAAU,6BAClB2C,QAASyJ,EADT,sBAMKtN,EAAKS,YAAchH,EAAKiB,KAAKG,MAAQwR,GACtC,mCAEQrM,EAAK6J,MACH,wBAAQ3I,UAAU,8BACpB2C,QAASkK,EADP,sBAIA,wBAAQ7M,UAAU,8BACpB2C,QAASkK,EADP,0BAYtB,sBAAK7M,UAAU,aAAaC,MAAO,CAC/BqE,QAAU6G,GAAUrM,EAAK6J,MAAS,IAAM,IACxCjO,OAAQkF,EAAQ,YAAc,aAFlC,UAKI,uBAAOoI,IAAKqD,EAAUrL,UAAU,YAAY0N,aAAW,EAAC3F,OAAK,IAC7D,uBAAOC,IAAKsD,EAAYtL,UAAU,cAAc0N,aAAW,IAE3D,sBAAK1N,UAAU,aAAf,UACI,+BAAQ2K,EAAM8C,WAAWxU,OAAS,EAAI,IAAM0R,EAAQA,IACpD,qCACA,+BAAQE,EAAK4C,WAAWxU,OAAS,EAAI,IAAM4R,EAAOA,IAClD,qCACA,+BAAQE,EAAO0C,WAAWxU,OAAS,EAAI,IAAM8R,EAASA,OAG1D,wBAAQ/K,UAAU,sCAClB2C,QAASyJ,EADT,6B,kBC7KDuB,MAnEf,WAAgB,IAAD,EACyB9N,aAAY,SAAAC,GAAK,OAAIA,KAAnDvH,EADK,EACLA,KAAMiC,EADD,EACCA,OAAQoT,EADT,EACSA,MAAO9O,EADhB,EACgBA,KACvBrG,EAAWsK,cAyCjB,OAvCAkE,qBAAU,WACRxO,EAASoV,eAET,IAAMrV,EAASsV,MAEf,OADArV,EAAS,CAACG,KAAMC,IAAYkV,OAAQhV,QAASP,IACtC,kBAAMA,EAAO6T,WACpB,CAAC5T,IAEHwO,qBAAU,WACL1O,EAAKa,QACNX,EAASyB,YAAS3B,EAAKa,QACvBX,EAASuV,YAAezV,EAAKa,QAC7BX,EAAS8E,YAAYhF,EAAKa,WAE3B,CAACX,EAAUF,EAAKa,QAGnB6N,qBAAU,WACF,iBAAkBtD,OAGa,YAA5BqG,aAAaiE,YACe,WAA5BjE,aAAaiE,YACpBjE,aAAakE,oBAAoBtF,MAAK,SAAUqF,OAJhDnL,MAAM,iGAQR,IAGFmE,qBAAU,WACR,IAAMkH,EAAU,IAAIC,SAAKC,EAAW,CAClCjK,KAAM,IAAKkK,QAAQ,IAGrB7V,EAAS,CAAEG,KAAMC,IAAY0V,KAAMxV,QAASoV,MAC5C,CAAC1V,IAID,eAAC,IAAD,WACE,cAAC+V,EAAD,IAEA,uBAAO5V,KAAK,WAAWc,GAAG,UAC1B,qBAAKsG,UAAS,eAAUxF,GAAUoT,IAAU,QAA5C,SACE,sBAAK5N,UAAU,OAAf,UACGzH,EAAKa,OAAS,cAAC,EAAD,IACdoB,GAAU,cAAC,EAAD,IACVjC,EAAKa,OAAS,cAAC,EAAD,IACd0F,GAAQ,cAAC,EAAD,IAET,cAAC,IAAD,CAAO2P,OAAK,EAACrK,KAAK,IAAIsK,UAAWnW,EAAKa,MAAQuV,UAAOC,YACrD,cAAC,IAAD,CAAOH,OAAK,EAACrK,KAAK,YAAYsK,UAAWG,YAEzC,cAAC,EAAD,CAAeJ,OAAK,EAACrK,KAAK,SAASsK,UAAWlO,IAC9C,cAAC,EAAD,CAAeiO,OAAK,EAACrK,KAAK,aAAasK,UAAWlO,aC1E7CsO,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBpG,MAAK,YAAkD,IAA/CqG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,mBCLRO,GAAe,GAYNC,GAVK,WAAmC,IAAlCzP,EAAiC,uDAAzBwP,GAAcE,EAAW,uCAClD,OAAQA,EAAO5W,MACX,KAAKC,IAAYgD,KACb,OAAO2T,EAAOzW,QAClB,QACI,OAAO+G,ICPbwP,GAAe,GAYNG,GAVM,WAAmC,IAAlC3P,EAAiC,uDAAzBwP,GAAcE,EAAW,uCACnD,OAAQA,EAAO5W,MACX,KAAKC,IAAYC,MACb,OAAO0W,EAAOzW,QAClB,QACI,OAAO+G,ICKJ4P,GAVM,WAAmC,IAAlC5P,EAAiC,wDAAX0P,EAAW,uCACnD,OAAQA,EAAO5W,MACX,KAAKC,IAAYgM,MACb,OAAO2K,EAAOzW,QAClB,QACI,OAAO+G,I,SCNbwP,GAAe,CACjBtW,SAAS,EACT2W,IAAK,GACLxK,MAAO,GACPyK,MAAO,IA6CIC,GA1CQ,WAAmC,IAAlC/P,EAAiC,uDAAzBwP,GAAcE,EAAW,uCACrD,OAAQA,EAAO5W,MACX,KAAKkX,KAAcC,QACf,OAAO,2BACAjQ,GADP,IAEI9G,QAASwW,EAAOzW,UAExB,KAAK+W,KAAcE,SACf,OAAO,2BACAlQ,GADP,IAEIqF,MAAM,GAAD,mBAAMrF,EAAMqF,OAAZ,CAAmBqK,EAAOzW,QAAQS,SAE/C,KAAKsW,KAAcG,OAKnB,KAAKH,KAAcI,SACf,OAAO,2BACApQ,GADP,IAEIqF,MAAOgL,YAASrQ,EAAMqF,MAAOqK,EAAOzW,QAAQY,IAAK6V,EAAOzW,WAEhE,KAAK+W,KAAcM,OACf,OAAO,2BACAtQ,GADP,IAEI6P,IAAI,GAAD,mBAAM7P,EAAM6P,KAAZ,CAAiBH,EAAOzW,YAEnC,KAAK+W,KAAc9X,UACf,OAAO,2BACA8H,GADP,IAEI8P,MAAM,GAAD,mBAAM9P,EAAM8P,OAAZ,CAAmBJ,EAAOzW,YAEvC,KAAK+W,KAAc7X,YACf,OAAO,2BACA6H,GADP,IAEI8P,MAAOO,YAASrQ,EAAM8P,MAAOJ,EAAOzW,QAAQY,IAAK6V,EAAOzW,WAEhE,QACI,OAAO+G,ICnCJuQ,GAVO,WAA4B,IAA3BvQ,EAA0B,wDAAX0P,EAAW,uCAC7C,OAAQA,EAAO5W,MACX,KAAKC,IAAYuO,OACb,OAAOoI,EAAOzW,QAClB,QACI,OAAO+G,ICLbwP,GAAe,CACjBtW,SAAS,EACT4W,MAAO,GACP7Q,OAAQ,EACR3E,KAAM,GAqCKkW,GAlCK,WAAmC,IAAlCxQ,EAAiC,uDAAzBwP,GAAcE,EAAW,uCAClD,OAAQA,EAAO5W,MACX,KAAKf,IAAWC,YACZ,OAAO,2BACAgI,GADP,IAEI8P,MAAM,CAAEJ,EAAOzW,SAAV,mBAAsB+G,EAAM8P,UAEzC,KAAK/X,IAAWE,aACZ,OAAO,2BACA+H,GADP,IAEI9G,QAASwW,EAAOzW,UAExB,KAAKlB,IAAWG,UACZ,OAAO,2BACA8H,GADP,IAEI8P,MAAOJ,EAAOzW,QAAQ6W,MACtB7Q,OAAQyQ,EAAOzW,QAAQgG,OACvB3E,KAAMoV,EAAOzW,QAAQqB,OAE7B,KAAKvC,IAAWI,YACZ,OAAO,2BACA6H,GADP,IAEI8P,MAAOO,YAASrQ,EAAM8P,MAAOJ,EAAOzW,QAAQY,IAAK6V,EAAOzW,WAEhE,KAAKlB,IAAWM,YACZ,OAAO,2BACA2H,GADP,IAEI8P,MAAOtQ,YAAWQ,EAAM8P,MAAOJ,EAAOzW,QAAQY,OAEtD,QACI,OAAOmG,IC1BJyQ,GAVM,WAAmC,IAAlCzQ,EAAiC,wDAAX0P,EAAW,uCACnD,OAAQA,EAAO5W,MACX,KAAKC,IAAY2X,MACb,OAAOhB,EAAOzW,QAClB,QACI,OAAO+G,ICMJ2Q,GAZW,WAAyB,IAAxB3Q,EAAuB,uDAAf,GAAI0P,EAAW,uCAC9C,OAAQA,EAAO5W,MACX,KAAKf,IAAWK,SACZ,MAAM,GAAN,mBAAW4H,GAAX,CAAkB0P,EAAOzW,UAC7B,KAAKlB,IAAWI,YACZ,OAAOkY,YAASrQ,EAAO0P,EAAOzW,QAAQY,IAAK6V,EAAOzW,SACtD,QACI,OAAO+G,ICRbwP,GAAe,CACjBtW,SAAS,EACTmM,MAAO,IAqBIuL,GAjBY,WAAmC,IAAlC5Q,EAAiC,uDAAzBwP,GAAcE,EAAW,uCACzD,OAAQA,EAAO5W,MACX,KAAK+X,IAAaZ,QACd,OAAO,2BACAjQ,GADP,IAEI9G,QAASwW,EAAOzW,UAExB,KAAK4X,IAAaC,UACd,OAAO,2BACA9Q,GADP,IAEIqF,MAAOqK,EAAOzW,QAAQoM,QAE9B,QACI,OAAOrF,ICRJ+Q,GAVO,WAAyB,IAAxB/Q,EAAuB,uDAAf,GAAI0P,EAAW,uCAC1C,OAAQA,EAAO5W,MACX,KAAKC,IAAYkV,OACb,OAAOyB,EAAOzW,QAClB,QACI,OAAO+G,ICLbwP,GAAe,CACjBtW,SAAS,EACTM,KAAM,GACNyQ,OAAO,GA2CI+G,GAxCO,WAAmC,IAAlChR,EAAiC,uDAAzBwP,GAAcE,EAAW,uCACpD,OAAQA,EAAO5W,MACX,KAAKiE,IAAaC,aACd,OAAO,2BACAgD,GADP,IAEIxG,KAAMkW,EAAOzW,UAErB,KAAK8D,IAAaE,cACd,OAAO,2BACA+C,GADP,IAEIxG,KAAK,CAAEkW,EAAOzW,SAAV,mBAAsB+G,EAAMxG,SAExC,KAAKuD,IAAaG,cACd,OAAO,2BACA8C,GADP,IAEIxG,KAAMwG,EAAMxG,KAAKoB,QAAO,SAAAiE,GAAI,OACxBA,EAAKjF,KAAO8V,EAAOzW,QAAQW,IAAMiF,EAAK5E,MAAQyV,EAAOzW,QAAQgB,SAGzE,KAAK8C,IAAaI,cACd,OAAO,2BACA6C,GADP,IAEIxG,KAAM6W,YAASrQ,EAAMxG,KAAMkW,EAAOzW,QAAQY,IAAK6V,EAAOzW,WAE9D,KAAK8D,IAAaK,aACd,OAAO,2BACA4C,GADP,IAEIiK,MAAOyF,EAAOzW,UAEtB,KAAK8D,IAAaM,oBACd,OAAO,2BACA2C,GADP,IAEIxG,KAAMkW,EAAOzW,UAErB,QACI,OAAO+G,ICzCbwP,GAAe,CACjBnK,MAAO,GACP4L,YAAa,EACbzX,KAAM,GACN0X,WAAW,GAkFAC,GA/EQ,WAAmC,IAAlCnR,EAAiC,uDAAzBwP,GAAcE,EAAW,uCACrD,OAAQA,EAAO5W,MACX,KAAKgF,IAAWC,SACZ,OAAGiC,EAAMqF,MAAM3J,OAAM,SAAAmD,GAAI,OAAIA,EAAKhF,MAAQ6V,EAAOzW,QAAQY,OAC9C,2BACAmG,GADP,IAEIqF,MAAM,CAAEqK,EAAOzW,SAAV,mBAAsB+G,EAAMqF,UAGlCrF,EACX,KAAKlC,IAAWE,YACZ,OAAO,2BACAgC,GADP,IAEIxG,KAAMwG,EAAMxG,KAAKyC,KAAI,SAAA4C,GAAI,OACrBA,EAAKhF,MAAQ6V,EAAOzW,QAAQwG,WAAaZ,EAAKhF,MAAQ6V,EAAOzW,QAAQkT,OAArE,2BAEOtN,GAFP,IAGIO,SAAS,GAAD,mBAAMP,EAAKO,UAAX,CAAqBsQ,EAAOzW,UACpCgG,OAAQJ,EAAKI,OAAS,IAExBJ,KAENwG,MAAOrF,EAAMqF,MAAMpJ,KAAI,SAAAvC,GAAI,OACvBA,EAAKG,MAAQ6V,EAAOzW,QAAQwG,WAAa/F,EAAKG,MAAQ6V,EAAOzW,QAAQkT,OAArE,2BAEOzS,GAFP,IAGII,KAAM4V,EAAOzW,QAAQa,KACrBjB,MAAO6W,EAAOzW,QAAQJ,MACtBmG,KAAM0Q,EAAOzW,QAAQ+F,OAEvBtF,OAGd,KAAKoE,IAAWG,kBACZ,OAAO,2BACA+B,GADP,IAEIqF,MAAOqK,EAAOzW,QAAQyF,OACtBuS,YAAavB,EAAOzW,QAAQgG,OAC5BiS,WAAW,IAEnB,KAAKpT,IAAWI,aACZ,OAAO,2BACA8B,GADP,IAEIxG,KAAK,GAAD,mBAAMwG,EAAMxG,MAAZ,CAAkBkW,EAAOzW,YAErC,KAAK6E,IAAWK,gBACZ,OAAO,2BACA6B,GADP,IAEIxG,KAAM6W,YAASrQ,EAAMxG,KAAMkW,EAAOzW,QAAQY,IAAK6V,EAAOzW,WAE9D,KAAK6E,IAAWM,gBACZ,OAAO,2BACA4B,GADP,IAEIxG,KAAMwG,EAAMxG,KAAKyC,KAAI,SAAA4C,GAAI,OACrBA,EAAKhF,MAAQ6V,EAAOzW,QAAQY,IAA5B,2BACMgF,GADN,IACYO,SAAUsQ,EAAOzW,QAAQkG,UACnCN,OAGd,KAAKf,IAAWO,oBACZ,OAAO,2BACA2B,GADP,IAEIqF,MAAO7F,YAAWQ,EAAMqF,MAAOqK,EAAOzW,SACtCO,KAAMgG,YAAWQ,EAAMxG,KAAMkW,EAAOzW,WAE5C,KAAK6E,IAAWQ,qBACZ,OAAO,2BACA0B,GADP,IAEIqF,MAAOrF,EAAMqF,MAAMpJ,KAAI,SAAAvC,GAAI,OACvBgW,EAAOzW,QAAQoR,SAAS3Q,EAAKG,KAA7B,2BACMH,GADN,IACYmQ,QAAQ,IADpB,2BAEMnQ,GAFN,IAEYmQ,QAAQ,SAGhC,QACI,OAAO7J,ICtEJoR,GAZO,WAAyB,IAAxBpR,EAAuB,uDAAf,GAAI0P,EAAW,uCAC1C,OAAQA,EAAO5W,MACX,KAAKC,IAAYuR,OACb,MAAM,GAAN,mBAAWtK,GAAX,CAAkB0P,EAAOzW,UAC7B,KAAKF,IAAYwR,QACb,OAAOvK,EAAMpF,QAAO,SAAAiE,GAAI,OAAIA,IAAS6Q,EAAOzW,WAChD,QACI,OAAO+G,ICGJqR,GAVK,WAA2B,IAA1BrR,EAAyB,uDAAjB,KAAM0P,EAAW,uCAC1C,OAAQA,EAAO5W,MACX,KAAKC,IAAYyR,KACb,OAAOkF,EAAOzW,QAClB,QACI,OAAO+G,ICKJsR,GAVK,WAA2B,IAA1BtR,EAAyB,uDAAjB,KAAM0P,EAAW,uCAC1C,OAAQA,EAAO5W,MACX,KAAKC,IAAY0V,KACb,OAAOiB,EAAOzW,QAClB,QACI,OAAO+G,ICUJuR,8BAAgB,CAC3B9Y,QACAuK,SACAlD,SACA0R,WACA9W,UACA+W,aACA3D,SACArS,cACAiW,eACAhZ,UACA4E,UACAqU,WACA9H,UACA7K,QACA4L,U,UCzBEgH,GAAQC,uBACVC,GACAC,+BAAoBC,2BAAgBC,QAWzBC,GARM,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SACnB,OACI,cAAC,IAAD,CAAUP,MAAOA,GAAjB,SACKO,KCTbC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,UACE,cAAC,EAAD,QAGJC,SAASC,eAAe,SAI1BxD,M,iRCXagB,EAAgB,CACzBC,QAAS,kBACTC,SAAU,mBACVC,OAAQ,SACRC,SAAU,WACVE,OAAQ,iBACRpY,UAAW,oBACXC,YAAa,uBAIJsa,EAAkB,SAAC,GAAD,IAAE7Y,EAAF,EAAEA,GAAInB,EAAN,EAAMA,KAAN,8CAAgB,WAAOE,GAAP,qBAAAC,EAAA,6DAC3CD,EAAS,CAACG,KAAMkX,EAAcM,OAAQrX,QAASW,IADJ,SAIvCjB,EAAS,CAACG,KAAMkX,EAAcC,QAAShX,SAAS,IAC1CM,EAAMc,YAAW,SAAD,OAAUT,GAAMnB,EAAKa,OACrCoZ,EAAOrY,YAAW,eAAD,OAAgBT,GAAMnB,EAAKa,OANX,SAQnBC,EARmB,cAQjC8L,EARiC,iBASnBqN,EATmB,QASjC5C,EATiC,OAWvCnX,EAAS,CACLG,KAAMkX,EAAcE,SACpBjX,QAASoM,EAAM7L,OAGnBb,EAAS,CACLG,KAAMkX,EAAc9X,UACpBe,QAAQ,2BAAK6W,EAAMtW,MAAZ,IAAkBK,IAAKD,EAAIU,KAAM,MAG5C3B,EAAS,CAACG,KAAMkX,EAAcC,QAAShX,SAAS,IArBT,kDAuBvCN,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAzBA,0DAAhB,uDAgClBgZ,EAAoB,SAAC,GAAD,IAAEC,EAAF,EAAEA,SAAUpV,EAAZ,EAAYA,OAAQ/E,EAApB,EAAoBA,KAApB,8CAA8B,WAAOE,GAAP,iBAAAC,EAAA,yDACvDga,EAASpU,SAD8C,yCAEpD7F,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,mEAFA,YAIxDqY,EAASpU,SAASrF,OAAS,IAJ6B,yCAKpDR,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,qCALA,YAOxDqY,EAASC,MAAM1Z,OAAS,KAPgC,yCAQpDR,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,sCARA,mBAYvD5B,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACC,SAAS,MAEnDsE,EAdoD,kCAc9BpE,YAAY,CAACoE,IAdiB,QAc5C3E,EAd4C,gCAgBrCkC,YAAa,OAAD,YAAC,eACxB6X,GADuB,IAE1BpV,OAAQA,EAAS3E,EAAM,GAAGoB,IAAMxB,EAAKiB,KAAK8D,SAC3C/E,EAAKa,OAnB+C,QAgBjDC,EAhBiD,OAqBvDZ,EAAS,CACLG,KAAMC,IAAYgD,KAClB9C,QAAQ,2BACDR,GADA,IAEHiB,KAAK,uCACEjB,EAAKiB,MAASkZ,GADjB,IAEApV,OAAQA,EAAS3E,EAAM,GAAGoB,IAAMxB,EAAKiB,KAAK8D,aAKtD7E,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAAC+B,QAASzB,EAAIC,KAAKG,OAhCR,kDAkCvDhB,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OApCgB,0DAA9B,uDAyCpBmZ,EAAS,SAAC,GAAD,IAAEzN,EAAF,EAAEA,MAAO3L,EAAT,EAASA,KAAMjB,EAAf,EAAeA,KAAMC,EAArB,EAAqBA,OAArB,8CAAiC,WAAOC,GAAP,mBAAAC,EAAA,6DAGhDyM,EAAM3J,OAAM,SAAAmD,GAAI,OAAIA,EAAKhF,MAAQH,EAAKG,OACrCiC,EAAO,2BAAOpC,GAAP,IAAaM,UAAU,GAAD,mBAAMN,EAAKM,WAAX,CAAsBvB,EAAKiB,SAExD2L,EAAMzG,SAAQ,SAAAC,GACPA,EAAKhF,MAAQH,EAAKG,MACjBiC,EAAO,2BAAO+C,GAAP,IAAa7E,UAAU,GAAD,mBAAM6E,EAAK7E,WAAX,CAAsBvB,EAAKiB,aAKpEf,EAAS,CAAEG,KAAMkX,EAAcG,OAAQlX,QAAS6C,IAEhDnD,EAAS,CACLG,KAAMC,IAAYgD,KAClB9C,QAAQ,2BACDR,GADA,IAEHiB,KAAK,2BAAKjB,EAAKiB,MAAX,IAAiBqZ,UAAU,GAAD,mBAAMta,EAAKiB,KAAKqZ,WAAhB,CAA2BjX,UAnBd,kBAyB7Bf,YAAa,QAAD,OAASrB,EAAKG,IAAd,WAA4B,KAAMpB,EAAKa,OAzBtB,OAyBzCC,EAzByC,OA0B/Cb,EAAO0C,KAAK,SAAU7B,EAAIC,KAAKsC,SAGzBnC,EAAM,CACRC,GAAInB,EAAKiB,KAAKG,IACdC,KAAM,+CACNC,WAAY,CAAC+B,EAAQjC,KACrBI,IAAI,YAAD,OAAcxB,EAAKiB,KAAKG,MAG/BlB,EAASwB,YAAa,CAACR,MAAKlB,OAAMC,YApCa,kDAuC/CC,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAzCQ,0DAAjC,uDA8CTqZ,EAAW,SAAC,GAAD,IAAE3N,EAAF,EAAEA,MAAO3L,EAAT,EAASA,KAAMjB,EAAf,EAAeA,KAAMC,EAArB,EAAqBA,OAArB,8CAAiC,WAAOC,GAAP,mBAAAC,EAAA,6DAIlDyM,EAAM3J,OAAM,SAAAmD,GAAI,OAAIA,EAAKhF,MAAQH,EAAKG,OACrCiC,EAAO,2BAAOpC,GAAP,IAAaM,UAAWwF,YAAW9F,EAAKM,UAAWvB,EAAKiB,KAAKG,OAEpEwL,EAAMzG,SAAQ,SAAAC,GACPA,EAAKhF,MAAQH,EAAKG,MACjBiC,EAAO,2BAAO+C,GAAP,IAAa7E,UAAWwF,YAAWX,EAAK7E,UAAWvB,EAAKiB,KAAKG,WAKhFlB,EAAS,CAAEG,KAAMkX,EAAcI,SAAUnX,QAAS6C,IAElDnD,EAAS,CACLG,KAAMC,IAAYgD,KAClB9C,QAAQ,2BACDR,GADA,IAEHiB,KAAK,2BACEjB,EAAKiB,MADR,IAEAqZ,UAAWvT,YAAW/G,EAAKiB,KAAKqZ,UAAWjX,EAAQjC,WAtBV,kBA6B/BkB,YAAa,QAAD,OAASrB,EAAKG,IAAd,aAA8B,KAAMpB,EAAKa,OA7BtB,OA6B3CC,EA7B2C,OA8BjDb,EAAO0C,KAAK,WAAY7B,EAAIC,KAAKsC,SAG3BnC,EAAM,CACRC,GAAInB,EAAKiB,KAAKG,IACdC,KAAM,8CACNC,WAAY,CAAC+B,EAAQjC,KACrBI,IAAI,YAAD,OAAcxB,EAAKiB,KAAKG,MAG/BlB,EAAS4C,YAAa,CAAC5B,MAAKlB,OAAMC,YAxCe,kDA2CjDC,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OA7CU,0DAAjC,wD,gCCxIT,QAA0B,qC,yECsE1B0M,IAjEE,SAAC,GAAoF,IAAnF8L,EAAkF,EAAlFA,SAAUzY,EAAwE,EAAxEA,KAAM4M,EAAkE,EAAlEA,OAAQX,EAA0D,EAA1DA,YAAasN,EAA6C,EAA7CA,iBAAkBC,EAA2B,EAA3BA,iBAAkBvZ,EAAS,EAATA,IAEhFmG,EAAUC,aAAY,SAAAC,GAAK,OAAIA,KAA/BF,MAoCR,OACI,sBAAKI,UAAS,sEAAiEoG,GAA/E,UACI,8BACI,eAAC,IAAD,CAAM/E,GAAE,mBAAc7H,EAAKG,KAAOgJ,QArCvB,WAChB8C,GAAaA,IACbsN,GAAkBA,GAAiB,GACnCC,GAAkBA,GAAiB,IAmC9BhT,UAAU,4BADV,UAGI,cAAC,IAAD,CAAQN,IAAKlG,EAAK8D,OAAQqC,KAAK,eAE/B,sBAAKK,UAAU,OAAOC,MAAO,CAACM,UAAW,oBAAzC,UACI,sBAAMP,UAAU,UAAhB,SAA2BxG,EAAK6D,WAEhC,uBAAO4C,MAAO,CAACqE,QAAS,IAAxB,SAEQ7K,EAzCZ,SAACD,GACb,OACI,qCACI,qBAAKyG,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,aAA3C,SACKpG,EAAKI,OAGNJ,EAAKb,MAAMM,OAAS,GACpB,gCACKO,EAAKb,MAAMM,OADhB,IACwB,mBAAG+G,UAAU,oBAKrCxG,EAAKsF,MACL,sBAAMkB,UAAU,iBAAhB,SAE4B,IAApBxG,EAAKsF,KAAKiN,MACRvS,EAAKsF,KAAK6J,MAAQ,eAAiB,iBACnCnP,EAAKsF,KAAK6J,MAAQ,qBAAuB,YAuBrCsK,CAAQzZ,GACRA,EAAK8E,mBAO1B2T,O,+GCjEAzK,EAAY,SAAC9H,EAAKE,GAC3B,OACI,qBAAKF,IAAKA,EAAKK,IAAI,SAASC,UAAU,gBACtCC,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,gBAIjC6H,EAAY,SAAC/H,EAAKE,GAC3B,OACI,uBAAO2K,UAAQ,EAAC7K,IAAKA,EAAKK,IAAI,SAASC,UAAU,gBACjDC,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,iB,+BCV9C,sGAAO,IAAM/G,EAAc,CACvBgD,KAAM,OACN/C,MAAO,QACP+L,MAAO,QACPuC,OAAQ,SACRoJ,MAAO,QACPzC,OAAQ,SACR3D,OAAQ,SACRC,QAAS,UACTC,KAAM,OACNiE,KAAM,QAGG4B,EAAW,SAAC7W,EAAMI,EAAIsB,GAI/B,OAHgB1B,EAAKyC,KAAI,SAAA4C,GAAI,OACxBA,EAAKhF,MAAQD,EAAKsB,EAAO2D,MAKrBW,EAAa,SAAChG,EAAMI,GAE7B,OADgBJ,EAAKoB,QAAO,SAAAiE,GAAI,OAAIA,EAAKhF,MAAQD,O,uICrBxCwZ,EAAa,SAACzJ,GACzB,IAAI1I,EAAM,GACV,OAAK0I,GAEDA,EAAK9J,KAAO,UAEdoB,EAAM,oCAEU,eAAd0I,EAAK7Q,MAAuC,cAAd6Q,EAAK7Q,OACrCmI,EAAM,uEAEDA,GATkB,mCAYd7H,EAAW,uCAAG,WAAOZ,GAAP,2BAAAI,EAAA,sDACrBya,EAAS,GADY,cAEN7a,GAFM,gEAEdqG,EAFc,QAGjByU,EAAW,IAAIC,SAEjB1U,EAAK4I,OACP6L,EAASE,OAAO,OAAQ3U,EAAK4I,QAE7B6L,EAASE,OAAO,OAAQ3U,GAEV,wBAVO,UAYL4U,MAAMC,8CAAoC,CAC1DC,OAAQ,OACR7Q,KAAMwQ,IAde,eAYjB/Z,EAZiB,iBAiBJA,EAAIqa,OAjBA,QAiBjBpa,EAjBiB,OAkBvB6Z,EAAOtU,KAAK,CAAE8U,UAAWra,EAAKqa,UAAW5Z,IAAKT,EAAKsa,aAlB5B,wKAoBlBT,GApBkB,gEAAH,uD,+FCwCTU,IAlDG,SAAC,GAAY,IAAXra,EAAU,EAAVA,KAAU,EACMwL,oBAAS,GADf,mBACnB8O,EADmB,KACTC,EADS,OAGQlU,aAAY,SAAAC,GAAK,OAAIA,KAA/CvH,EAHkB,EAGlBA,KAAM+Y,EAHY,EAGZA,QAAS9Y,EAHG,EAGHA,OACjBC,EAAWsK,cAJS,EAMFiC,oBAAS,GANP,mBAMnBK,EANmB,KAMbC,EANa,KAQ1B2B,qBAAU,WAIN,OAHG1O,EAAKiB,KAAKqZ,UAAUmB,MAAK,SAAArV,GAAI,OAAIA,EAAKhF,MAAQH,EAAKG,QAClDoa,GAAY,GAET,kBAAMA,GAAY,MAC1B,CAACxb,EAAKiB,KAAKqZ,UAAWrZ,EAAKG,MAE9B,IAAMsa,EAAY,uCAAI,sBAAAvb,EAAA,0DACf2M,EADe,wDAGlB0O,GAAY,GACZzO,GAAQ,GAJU,SAKZ7M,EAASma,YAAO,CAACzN,MAAOmM,EAAQnM,MAAO3L,OAAMjB,OAAMC,YALvC,OAMlB8M,GAAQ,GANU,2CAAJ,qDASZ4O,EAAc,uCAAG,sBAAAxb,EAAA,0DAChB2M,EADgB,wDAGnB0O,GAAY,GACZzO,GAAQ,GAJW,SAKb7M,EAASqa,YAAS,CAAC3N,MAAOmM,EAAQnM,MAAO3L,OAAMjB,OAAMC,YALxC,OAMnB8M,GAAQ,GANW,2CAAH,qDASpB,OACI,mCAEIwO,EACE,wBAAQ9T,UAAU,yBACpB2C,QAASuR,EADP,kCAIA,wBAAQlU,UAAU,uBACpB2C,QAASsR,EADP,6B,iNCACE,MA7CD,SAAC,GAAwD,IAAvD7V,EAAsD,EAAtDA,SAAUjB,EAA4C,EAA5CA,SAAU+W,EAAkC,EAAlCA,MAAOC,EAA2B,EAA3BA,SAAUC,EAAiB,EAAjBA,YAC3CvT,EAAM,GA8BZ,OA5BIzC,EAEKA,EAASrF,OAAS,KACvB8H,EAAIzC,SAAW,6CAFfyC,EAAIzC,SAAW,wEAKfjB,EAEKA,EAAS2I,QAAQ,KAAM,IAAI/M,OAAS,KACzC8H,EAAI1D,SAAW,6CAFf0D,EAAI1D,SAAW,mDAKf+W,EAwBR,SAAuBA,GAGnB,MADW,4JACDG,KAAKH,GAzBLI,CAAcJ,KACpBrT,EAAIqT,MAAQ,4DAFZrT,EAAIqT,MAAQ,4CAKZC,EAEKA,EAASpb,OAAS,IACvB8H,EAAIsT,SAAW,yDAFftT,EAAIsT,SAAW,uCAKhBA,IAAaC,IACZvT,EAAIuT,YAAc,yEAGf,CACHG,OAAQ1T,EACR2T,UAAWjY,OAAOD,KAAKuE,GAAK9H,SC5BvB0b,EAAQ,SAACrb,GAAD,8CAAU,WAAOb,GAAP,eAAAC,EAAA,sEAEvBD,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACC,SAAS,KAFhC,SAGLG,YAAY,QAASG,GAHhB,OAGjBD,EAHiB,OAIvBZ,EAAS,CACLG,KAAMC,IAAYgD,KAClB9C,QAAS,CACLK,MAAOC,EAAIC,KAAKsb,aAChBpb,KAAMH,EAAIC,KAAKE,QAIvB2H,aAAa0T,QAAQ,cAAc,GACnCpc,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CACL+B,QAASzB,EAAIC,KAAKG,OAhBH,kDAqBvBhB,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CACLsB,MAAO,KAAIC,SAAShB,KAAKG,OAxBV,0DAAV,uDA+BRoU,EAAe,yDAAM,WAAOpV,GAAP,eAAAC,EAAA,0DACXyI,aAAaC,QAAQ,cADV,wBAG1B3I,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACC,SAAS,KAH7B,kBAMJG,YAAY,iBANR,OAMhBE,EANgB,OAOtBZ,EAAS,CACLG,KAAMC,IAAYgD,KAClB9C,QAAS,CACLK,MAAOC,EAAIC,KAAKsb,aAChBpb,KAAMH,EAAIC,KAAKE,QAIvBf,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,KAfvB,kDAkBtBN,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CACLsB,MAAO,KAAIC,SAAShB,KAAKG,OArBX,0DAAN,uDA4Bfqb,EAAW,SAACxb,GAAD,8CAAU,WAAOb,GAAP,iBAAAC,EAAA,4DACxBqc,EAAQZ,EAAM7a,IACXob,UAAY,GAFS,yCAGvBjc,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAASgc,EAAMN,UAH3B,uBAM1Bhc,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACC,SAAS,KAN5B,SAQRG,YAAY,WAAYG,GARhB,OAQpBD,EARoB,OAS1BZ,EAAS,CACLG,KAAMC,IAAYgD,KAClB9C,QAAS,CACLK,MAAOC,EAAIC,KAAKsb,aAChBpb,KAAMH,EAAIC,KAAKE,QAIvB2H,aAAa0T,QAAQ,cAAc,GACnCpc,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CACL+B,QAASzB,EAAIC,KAAKG,OArBA,kDAyB1BhB,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CACLsB,MAAO,KAAIC,SAAShB,KAAKG,OA5BP,0DAAV,uDAmCXqL,EAAS,yDAAM,WAAOrM,GAAP,SAAAC,EAAA,sEAEpByI,aAAa6T,WAAW,cAFJ,SAGd7b,YAAY,UAHE,OAIpBwK,OAAOsR,SAASC,KAAO,IAJH,gDAMpBzc,EAAS,CACLG,KAAMC,IAAYC,MAClBC,QAAS,CACLsB,MAAO,KAAIC,SAAShB,KAAKG,OATb,yDAAN,wD,6IChGTkX,EAAe,CACxBZ,QAAS,iBACTa,UAAW,oBAGF5C,EAAiB,SAAC5U,GAAD,8CAAW,WAAOX,GAAP,eAAAC,EAAA,sEAEjCD,EAAS,CAAEG,KAAM+X,EAAaZ,QAAShX,SAAS,IAFf,SAIfoB,YAAW,kBAAmBf,GAJf,OAI3BC,EAJ2B,OAKjCZ,EAAS,CAAEG,KAAM+X,EAAaC,UAAW7X,QAASM,EAAIC,OAEtDb,EAAS,CAAEG,KAAM+X,EAAaZ,QAAShX,SAAS,IAPf,gDAUjCN,EAAS,CAACG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAVrC,yDAAX,wD,gDC0Bf6N,IAhCD,SAAC,GAAkC,IAAjCd,EAAgC,EAAhCA,WAAYnO,EAAoB,EAApBA,QAASuH,EAAW,EAAXA,MAOjC,OACI,sBAAKI,UAAU,oBACfC,MAAO,CAAEqE,QAAS,EAAG5J,OAAQkF,EAAQ,YAAc,aADnD,UAGI,sBAAMI,UAAU,kCAAkCtG,GAAG,iBACrD6K,KAAK,SAASC,cAAY,WAAWC,gBAAc,OAAOC,gBAAc,QADxE,SAEI,sBAAMzE,MAAO,CAACqE,QAAS,IAAvB,4BAGJ,qBAAKtE,UAAU,gBAAgB2E,kBAAgB,iBAA/C,SACI,qBAAK3E,UAAU,YAAf,SAhBM,CACd,eAAM,eAAM,eAAM,eAAM,eAAM,eAAM,eAAM,eAC1C,eAAM,eAAM,eAAM,eAAM,eAAM,eAAM,eAAM,eAC1C,eAAM,eAAM,eAAM,eAAM,eAAM,eAAM,eAAM,gBAehBjE,KAAI,SAAAoI,GAAI,OACd,sBAAiBxB,QAAS,kBAAM6D,EAAWnO,EAAU8L,IAArD,SACKA,GADMA,e,iECExBgR,UArBC,WACZ,OACI,sBAAKnV,UAAU,iBAAf,UACI,qBAAKA,UAAU,6BAAf,SACI,cAAC,IAAD,MAGJ,qBAAKA,UAAU,2BAAf,SACI,sBAAKA,UAAU,wEAAf,UAGI,mBAAGA,UAAU,yCACbC,MAAO,CAACmV,SAAU,UAClB,yD,8GC2DLxG,UArED,WACV,IADgB,EAEgB5J,mBADX,CAAEoP,MAAO,GAAIC,SAAU,KAD5B,mBAET3B,EAFS,KAEC2C,EAFD,KAGRjB,EAAoB1B,EAApB0B,MAAOC,EAAa3B,EAAb2B,SAHC,EAKgBrP,oBAAS,GALzB,mBAKTsQ,EALS,KAKCC,EALD,KAORhd,EAASsH,aAAY,SAAAC,GAAK,OAAIA,KAA9BvH,KACFE,EAAWsK,cACXyS,EAAUC,cAEhBxO,qBAAU,WACH1O,EAAKa,OAAOoc,EAAQ3W,KAAK,OAC7B,CAACtG,EAAKa,MAAOoc,IAEhB,IAAME,EAAoB,SAAArZ,GAAM,IAAD,EACHA,EAAEyJ,OAAlBH,EADmB,EACnBA,KAAMC,EADa,EACbA,MACdyP,EAAY,2BAAI3C,GAAL,kBAAgB/M,EAAMC,MAQrC,OACI,qBAAK5F,UAAU,YAAf,SACI,uBAAM0F,SAPO,SAAArJ,GACjBA,EAAEmJ,iBACF/M,EAASkc,YAAMjC,KAKX,UACI,oBAAI1S,UAAU,kCAAd,yBAEA,sBAAKA,UAAU,aAAf,UACI,uBAAO4E,QAAQ,qBAAf,mBACA,uBAAOhM,KAAK,QAAQoH,UAAU,eAAetG,GAAG,qBAAqBiM,KAAK,QAC1EgQ,mBAAiB,YAAY9P,SAAU6P,EAAmB9P,MAAOwO,IAEjE,uBAAO1a,GAAG,YAAYsG,UAAU,uBAAhC,6EAKJ,sBAAKA,UAAU,aAAf,UACI,uBAAO4E,QAAQ,wBAAf,gCAEA,sBAAK5E,UAAU,OAAf,UAEI,uBAAOpH,KAAO0c,EAAW,OAAS,WAClCtV,UAAU,eAAetG,GAAG,wBAC5BmM,SAAU6P,EAAmB9P,MAAOyO,EAAU1O,KAAK,aAEnD,uBAAOhD,QAAS,kBAAM4S,GAAaD,IAAnC,SACKA,EAAW,UAAO,cAM/B,wBAAQ1c,KAAK,SAASoH,UAAU,qBAChC4V,UAAUxB,IAASC,EADnB,sCAKA,oBAAGrU,UAAU,OAAb,uEACgC,cAAC,IAAD,CAAMqB,GAAG,YAAYpB,MAAO,CAACuB,MAAO,WAApC,4C,8GCyEjCqN,UAxIE,WAAO,IAAD,EACKhP,aAAY,SAAAC,GAAK,OAAIA,KAArCvH,EADW,EACXA,KAAMuK,EADK,EACLA,MACRrK,EAAWsK,cACXyS,EAAUC,cAHG,EAQazQ,mBAHX,CACjB1G,SAAU,GAAIjB,SAAU,GAAI+W,MAAO,GAAIC,SAAU,GAAIC,YAAa,GAAIuB,OAAQ,SAN/D,mBAQZnD,EARY,KAQF2C,EARE,KASX/W,EAAqDoU,EAArDpU,SAAUjB,EAA2CqV,EAA3CrV,SAAU+W,EAAiC1B,EAAjC0B,MAAOC,EAA0B3B,EAA1B2B,SAAUC,EAAgB5B,EAAhB4B,YAT1B,EAWatP,oBAAS,GAXtB,mBAWZsQ,EAXY,KAWFC,EAXE,OAYiBvQ,oBAAS,GAZ1B,mBAYZ8Q,EAZY,KAYAC,EAZA,KAcnB9O,qBAAU,WACH1O,EAAKa,OAAOoc,EAAQ3W,KAAK,OAC7B,CAACtG,EAAKa,MAAOoc,IAGhB,IAAME,EAAoB,SAAArZ,GAAM,IAAD,EACHA,EAAEyJ,OAAlBH,EADmB,EACnBA,KAAMC,EADa,EACbA,MACdyP,EAAY,2BAAI3C,GAAL,kBAAgB/M,EAAMC,MAQrC,OACI,qBAAK5F,UAAU,YAAf,SACI,uBAAM0F,SAPO,SAAArJ,GACjBA,EAAEmJ,iBACF/M,EAASqc,YAASpC,KAKd,UACI,oBAAI1S,UAAU,kCAAd,yBAEA,sBAAKA,UAAU,aAAf,UACI,uBAAO4E,QAAQ,WAAf,kCACA,uBAAOhM,KAAK,OAAOoH,UAAU,eAAetG,GAAG,WAAWiM,KAAK,WAC/DE,SAAU6P,EAAmB9P,MAAOtH,EACpC2B,MAAO,CAACsB,WAAW,GAAD,OAAKuB,EAAMxE,SAAW,YAAc,OAEtD,uBAAO0B,UAAU,wBAAjB,SACK8C,EAAMxE,SAAWwE,EAAMxE,SAAW,QAI3C,sBAAK0B,UAAU,aAAf,UACI,uBAAO4E,QAAQ,WAAf,4CACA,uBAAOhM,KAAK,OAAOoH,UAAU,eAAetG,GAAG,WAAWiM,KAAK,WAC/DE,SAAU6P,EAAmB9P,MAAOvI,EAAS0I,cAAcC,QAAQ,KAAM,IACzE/F,MAAO,CAACsB,WAAW,GAAD,OAAKuB,EAAMzF,SAAW,YAAc,OAEtD,uBAAO2C,UAAU,wBAAjB,SACK8C,EAAMzF,SAAWyF,EAAMzF,SAAW,QAI3C,sBAAK2C,UAAU,aAAf,UACI,uBAAO4E,QAAQ,qBAAf,mBACA,uBAAOhM,KAAK,QAAQoH,UAAU,eAAetG,GAAG,qBAAqBiM,KAAK,QAC1EE,SAAU6P,EAAmB9P,MAAOwO,EACpCnU,MAAO,CAACsB,WAAW,GAAD,OAAKuB,EAAMsR,MAAQ,YAAc,OAEnD,uBAAOpU,UAAU,wBAAjB,SACK8C,EAAMsR,MAAQtR,EAAMsR,MAAQ,QAIrC,sBAAKpU,UAAU,aAAf,UACI,uBAAO4E,QAAQ,wBAAf,gCAEA,sBAAK5E,UAAU,OAAf,UAEI,uBAAOpH,KAAO0c,EAAW,OAAS,WAClCtV,UAAU,eAAetG,GAAG,wBAC5BmM,SAAU6P,EAAmB9P,MAAOyO,EAAU1O,KAAK,WACnD1F,MAAO,CAACsB,WAAW,GAAD,OAAKuB,EAAMuR,SAAW,YAAc,OAEtD,uBAAO1R,QAAS,kBAAM4S,GAAaD,IAAnC,SACKA,EAAW,UAAO,iBAI3B,uBAAOtV,UAAU,wBAAjB,SACK8C,EAAMuR,SAAWvR,EAAMuR,SAAW,QAI3C,sBAAKrU,UAAU,aAAf,UACI,uBAAO4E,QAAQ,cAAf,iDAEA,sBAAK5E,UAAU,OAAf,UAEI,uBAAOpH,KAAOkd,EAAa,OAAS,WACpC9V,UAAU,eAAetG,GAAG,cAC5BmM,SAAU6P,EAAmB9P,MAAO0O,EAAa3O,KAAK,cACtD1F,MAAO,CAACsB,WAAW,GAAD,OAAKuB,EAAMwR,YAAc,YAAc,OAEzD,uBAAO3R,QAAS,kBAAMoT,GAAeD,IAArC,SACKA,EAAa,UAAO,iBAI7B,uBAAO9V,UAAU,wBAAjB,SACK8C,EAAMwR,YAAcxR,EAAMwR,YAAc,QAIjD,sBAAKtU,UAAU,wCAAf,UACI,wBAAO4E,QAAQ,OAAf,mBACU,uBAAOhM,KAAK,QAAQc,GAAG,OAAOiM,KAAK,SACzCC,MAAM,OAAOoQ,gBAAc,EAACnQ,SAAU6P,OAG1C,wBAAO9Q,QAAQ,SAAf,uBACS,uBAAOhM,KAAK,QAAQc,GAAG,SAASiM,KAAK,SAC1CC,MAAM,SAASC,SAAU6P,OAG7B,wBAAO9Q,QAAQ,QAAf,sBACU,uBAAOhM,KAAK,QAAQc,GAAG,QAAQiM,KAAK,SAC1CC,MAAM,QAAQC,SAAU6P,UAIhC,wBAAQ9c,KAAK,SAASoH,UAAU,qBAAhC,kCAIA,oBAAGA,UAAU,OAAb,0DACyB,cAAC,IAAD,CAAMqB,GAAG,IAAIpB,MAAO,CAACuB,MAAO,WAA5B,gD,+ECjH1ByU,EAhBA,WAAO,IACV1d,EAASsH,aAAY,SAAAC,GAAK,OAAIA,KAA9BvH,KACFE,EAAWsK,cAEjB,OACI,sBAAK/C,UAAU,qBAAf,UACI,cAACP,EAAA,EAAD,CAAQC,IAAKnH,EAAKiB,KAAK8D,OAAQqC,KAAK,eAEpC,yBAAQK,UAAU,sBAClB2C,QAAS,kBAAMlK,EAAS,CAAEG,KAAMC,IAAYuO,OAAQrO,SAAS,KAD7D,UAEKR,EAAKiB,KAAK6D,SAFf,+C,4ECkCG6Y,EArCD,WAAO,IAAD,EACmBrW,aAAY,SAAAC,GAAK,OAAIA,KAAhDyR,EADQ,EACRA,UAAWhZ,EADH,EACGA,KAAMqH,EADT,EACSA,MACnBnH,EAAWsK,cAFD,EAIQiC,oBAAS,GAJjB,mBAITK,EAJS,KAIHC,EAJG,KAMV6Q,EAAc,uCAAG,4BAAAzd,EAAA,6DACnB4M,GAAQ,GADW,SAEDnL,YAAW,eAAD,OAAiC,EAAjBoX,EAAUnX,MAAY7B,EAAKa,OAFpD,OAEbC,EAFa,OAInBZ,EAAS,CACLG,KAAMf,IAAWG,UACjBe,QAAQ,2BAAKM,EAAIC,MAAV,IAAgBc,KAAMmX,EAAUnX,KAAO,MAGlDkL,GAAQ,GATW,2CAAH,qDAYpB,OACI,sBAAKtF,UAAU,QAAf,UAEQuR,EAAU3B,MAAM7T,KAAI,SAAAf,GAAI,OACpB,cAACob,EAAA,EAAD,CAAyBpb,KAAMA,EAAM4E,MAAOA,GAA7B5E,EAAKrB,QAKxB0L,GAAQ,qBAAK3F,IAAKwG,IAAUnG,IAAI,UAAUC,UAAU,oBAIxD,cAACqW,EAAA,EAAD,CAAatX,OAAQwS,EAAUxS,OAAQ3E,KAAMmX,EAAUnX,KACvDiL,KAAMA,EAAM8Q,eAAgBA,Q,wBCczBG,EAhDM,WAAO,IAAD,EACOzW,aAAY,SAAAC,GAAK,OAAIA,KAA3CvH,EADe,EACfA,KAAMiZ,EADS,EACTA,YACR/Y,EAAWsK,cAEjB,OACI,sBAAK/C,UAAU,OAAf,UACI,cAACmG,EAAA,EAAD,CAAU3M,KAAMjB,EAAKiB,OAErB,sBAAKwG,UAAU,yDAAf,UACI,oBAAIA,UAAU,cAAd,8CAEKwR,EAAYxY,SACb,mBAAGgH,UAAU,cAAcC,MAAO,CAACyD,OAAQ,WAC3Cf,QAAU,kBAAMlK,EAASuV,YAAezV,EAAKa,cAKjDoY,EAAYxY,QACV,qBAAK0G,IAAKwG,IAAUnG,IAAI,UAAUC,UAAU,yBAC5C,qBAAKA,UAAU,cAAf,SAEMwR,EAAYrM,MAAMpJ,KAAI,SAAAvC,GAAI,OACtB,cAAC2M,EAAA,EAAD,CAAyB3M,KAAMA,EAA/B,SACI,cAACqa,EAAA,EAAD,CAAWra,KAAMA,KADNA,EAAKG,UAQpC,sBAAKsG,MAAO,CAACqE,QAAS,IAAMtE,UAAU,OAAtC,UAEI,uBAAOA,UAAU,UAAjB,gFAGA,uBAAOA,UAAU,UAAjB,iEAGA,qDCrCZuW,EAAS,EAwCE5H,UAtCF,WAAO,IACR4C,EAAc1R,aAAY,SAAAC,GAAK,OAAIA,KAAnCyR,UAeR,OAbA5N,OAAO6S,iBAAiB,UAAU,WAC9B,GAAgC,MAA7B7S,OAAOsR,SAASnR,SAEf,OADAyS,EAAS5S,OAAO8S,eAKxBxP,qBAAU,WACN0E,YAAW,WACPhI,OAAO2C,SAAS,CAACjG,IAAKkW,EAAQG,SAAU,aACzC,OACL,IAGE,sBAAK1W,UAAU,gBAAf,UACI,sBAAKA,UAAU,WAAf,UACI,cAAC,EAAD,IAGIuR,EAAUvY,QACR,qBAAK0G,IAAKwG,IAAUnG,IAAI,UAAUC,UAAU,oBACtB,IAArBuR,EAAUxS,QAA2C,IAA3BwS,EAAU3B,MAAM3W,OACvC,oBAAI+G,UAAU,cAAd,6CACA,cAAC,EAAD,OAKd,qBAAKA,UAAU,WAAf,SACI,cAAC,EAAD,W,gDC1BDqW,IAhBK,SAAC,GAA0C,IAAzCtX,EAAwC,EAAxCA,OAAQ3E,EAAgC,EAAhCA,KAAMiL,EAA0B,EAA1BA,KAAM8Q,EAAoB,EAApBA,eACtC,OACI,mCAEQpX,EAAS,GAAK3E,EAAO,GAAK,IAEzBiL,GAAQ,wBAAQrF,UAAU,+BAC3B2C,QAASwT,EADA,yB,oIC8HVQ,IA7HE,WAAO,IAAD,EACe9W,aAAY,SAAAC,GAAK,OAAIA,KAA/CvH,EADW,EACXA,KAAMkZ,EADK,EACLA,QAAS9H,EADJ,EACIA,OACjBlR,EAAWsK,cAFE,EAISiC,mBAAS,IAJlB,mBAIZC,EAJY,KAIJC,EAJI,OAKmBF,mBAAS,IAL5B,mBAKZ4R,EALY,KAKCC,EALD,KAObrB,EAAUC,cACR/b,EAAO+G,cAAP/G,GAEFod,EAAUjQ,mBAVG,EAWK7B,mBAAS,GAXd,mBAWZ5K,EAXY,KAWN2c,EAXM,KAcbxR,EAAY,uCAAG,WAAMlJ,GAAN,eAAA3D,EAAA,yDACjB2D,EAAEmJ,iBACEP,EAFa,yCAEE4R,EAAe,KAFjB,gCAKK1c,YAAW,mBAAD,OAAoB8K,GAAU1M,EAAKa,OALlD,OAKPC,EALO,OAMbwd,EAAexd,EAAIC,KAAK6L,OANX,kDAQb1M,EAAS,CACLG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OATnD,0DAAH,sDAcZud,EAAgB,SAACxd,GAKnB,OAJA0L,EAAU,IACV2R,EAAe,IACfpe,EAAS,CAACG,KAAMgF,IAAWC,SAAU9E,QAAQ,2BAAKS,GAAN,IAAYI,KAAM,GAAIjB,MAAO,OACzEF,EAAS,CAACG,KAAMgF,IAAWQ,qBAAsBrF,QAAS4Q,IACnD6L,EAAQ3W,KAAR,mBAAyBrF,EAAKG,OAGnCqK,EAAW,SAACxK,GACd,OAAGE,IAAOF,EAAKG,IAAY,SACpB,IAmCX,OAhCAsN,qBAAU,WACHwK,EAAQT,WACXvY,EAAS8F,YAAiB,CAAChG,YAC7B,CAACE,EAAUF,EAAMkZ,EAAQT,YAG3B/J,qBAAU,WACW,IAAIgQ,sBAAqB,SAAAC,GACnCA,EAAQ,GAAGC,gBACVJ,GAAQ,SAAAK,GAAC,OAAIA,EAAI,OAEvB,CACEC,UAAW,KAGNC,QAAQR,EAAQ7O,WAC3B,CAAC8O,IAEH9P,qBAAU,WACHwK,EAAQV,aAA4B,GAAZ3W,EAAO,IAAUA,EAAO,GAC/C3B,EAAS8F,YAAiB,CAAChG,OAAM6B,YAEvC,CAACqX,EAAQV,YAAa3W,EAAM7B,EAAME,IAIpCwO,qBAAU,WACHwK,EAAQT,WACPvY,EAAS,CAACG,KAAMgF,IAAWQ,qBAAsBrF,QAAS4Q,MAEhE,CAACA,EAAQ8H,EAAQT,UAAWvY,IAG1B,qCACI,uBAAMuH,UAAU,iBAAiB0F,SAAUH,EAA3C,UACI,uBAAO3M,KAAK,OAAOgN,MAAOX,EAC1BoC,YAAY,qBACZxB,SAAU,SAAAxJ,GAAC,OAAI6I,EAAU7I,EAAEyJ,OAAOF,UAElC,wBAAQhN,KAAK,SAASqH,MAAO,CAACgG,QAAS,QAAvC,uBAGJ,sBAAKjG,UAAU,oBAAf,UAE+B,IAAvB4W,EAAY3d,OACT,mCAEK2d,EAAY7a,KAAI,SAAAvC,GAAI,OAChB,qBAAoBwG,UAAS,uBAAkBgE,EAASxK,IACxDmJ,QAAS,kBAAMqU,EAAcxd,IAD7B,SAEI,cAAC,IAAD,CAAUA,KAAMA,KAFVA,EAAKG,UAQzB,mCAEM8X,EAAQtM,MAAMpJ,KAAI,SAAAvC,GAAI,OAClB,qBAAoBwG,UAAS,uBAAkBgE,EAASxK,IACxDmJ,QAAS,kBAAMqU,EAAcxd,IAD7B,SAEI,cAAC,IAAD,CAAUA,KAAMA,EAAMC,KAAK,EAA3B,SAEQD,EAAKmQ,OACH,mBAAG3J,UAAU,+BACbzH,EAAKiB,KAAKqZ,UAAUmB,MAAK,SAAArV,GAAI,OAC3BA,EAAKhF,MAAQH,EAAKG,QACjB,mBAAGqG,UAAU,qBARpBxG,EAAKG,UAmBhC,wBAAQqO,IAAK8O,EAAS7W,MAAO,CAACqE,QAAS,GAAvC,iC,wHC7DAiT,EA1DI,SAAC,GAAY,IAAXvc,EAAU,EAAVA,KAAU,EACF6E,aAAY,SAAAC,GAAK,OAAIA,KAAtCvH,EADmB,EACnBA,KAAMC,EADa,EACbA,OACRC,EAAWsK,cAEXyS,EAAUC,cAahB,OACI,sBAAKzV,UAAU,cAAf,UACI,sBAAKA,UAAU,SAAf,UACI,cAACP,EAAA,EAAD,CAAQC,IAAK1E,EAAKxB,KAAK8D,OAAQqC,KAAK,eAEpC,sBAAKK,UAAU,YAAf,UACI,oBAAIA,UAAU,MAAd,SACI,cAAC,IAAD,CAAMqB,GAAE,mBAAcrG,EAAKxB,KAAKG,KAAOqG,UAAU,YAAjD,SACKhF,EAAKxB,KAAK6D,aAGnB,uBAAO2C,UAAU,aAAjB,SACKuD,IAAOvI,EAAKwI,WAAWC,kBAKpC,sBAAKzD,UAAU,oBAAf,UACI,sBAAMA,UAAU,iBAAiBtG,GAAG,WAAW8K,cAAY,WAA3D,wBAIA,qBAAKxE,UAAU,gBAAf,SAEQzH,EAAKiB,KAAKG,MAAQqB,EAAKxB,KAAKG,KAC5B,qCACI,sBAAKqG,UAAU,gBAAgB2C,QArChC,WACnBlK,EAAS,CAAEG,KAAMC,IAAYuO,OAAQrO,QAAQ,2BAAKiC,GAAN,IAAYkM,QAAQ,OAoC5C,UACI,sBAAMlH,UAAU,iBAAhB,oBADJ,gCAGA,sBAAKA,UAAU,gBAAgB2C,QApC9B,WACrB,GAAGgB,OAAOC,QAAQ,+DAEd,OADAnL,EAASgD,YAAW,CAACT,OAAMzC,OAAMC,YAC1Bgd,EAAQ3W,KAAK,MAiCJ,UACI,sBAAMmB,UAAU,iBAAhB,4BADJ,0C,OC2BbwX,EA/EE,SAAC,GAAoB,IAAlBlf,EAAiB,EAAjBA,OAAQoB,EAAS,EAATA,GACpBsK,EAAW,SAACb,GAChB,GAAc,IAAVA,EAAa,MAAO,UAE1BgG,QAAQC,IAAI9Q,GAEMuH,aAAY,SAACC,GAAD,OAAWA,KAAjCF,MAER,OACE,sBAAKlG,GAAE,eAAUA,GAAMsG,UAAU,iBAAiByX,YAAU,WAA5D,UACE,oBAAIzX,UAAU,sBAAsBC,MAAO,CAAEwB,OAAQ,GAArD,SACGnJ,EAAOyD,KAAI,SAACpB,EAAKwI,GAAN,OACV,oBAEEuU,cAAA,gBAAsBhe,GACtBie,gBAAexU,EACfnD,UAAWgE,EAASb,IAHfA,QAQX,qBAAKnD,UAAU,iBAAf,SACG1H,EAAOyD,KAAI,SAACpB,EAAKwI,GAAN,OACV,qBAAiBnD,UAAS,wBAAmBgE,EAASb,IAAtD,SACGxI,EAAIZ,IAAIuJ,MAAM,UACb,uBACEiH,UAAQ,EACR7K,IAAK/E,EAAIZ,IACTiG,UAAU,gBACVD,IAAKpF,EAAIZ,MAIX,qBACE2F,IAAK/E,EAAIZ,IACTiG,UAAU,gBACVD,IAAKpF,EAAIZ,OAbLoJ,QAqBb7K,EAAOW,OAAS,GACf,qCACE,oBACE+G,UAAU,wBACVkV,KAAI,gBAAWxb,GACf6K,KAAK,SACLqT,aAAW,OACX3X,MAAO,CAAEyB,MAAO,MALlB,UAOE,sBACE1B,UAAU,6BACV6X,cAAY,SAEd,sBAAM7X,UAAU,UAAhB,gCAGF,oBACEA,UAAU,wBACVkV,KAAI,gBAAWxb,GACf6K,KAAK,SACLqT,aAAW,OACX3X,MAAO,CAAEyB,MAAO,MALlB,UAOE,sBACE1B,UAAU,6BACV6X,cAAY,SAEd,sBAAM7X,UAAU,UAAhB,2BCrCG8X,EAlCE,SAAC,GAAqB,IAAnB9c,EAAkB,EAAlBA,KAAM4E,EAAY,EAAZA,MAAY,EACJoF,oBAAS,GADL,mBAC7B+S,EAD6B,KACnBC,EADmB,KAKpC,OAFA7O,QAAQC,IAAIpO,GAGV,sBAAKgF,UAAU,YAAf,UACE,sBACEA,UAAU,oBACVC,MAAO,CACLvF,OAAQkF,EAAQ,YAAc,YAC9B4B,MAAO5B,EAAQ,QAAU,QAJ7B,UAOE,+BACG5E,EAAK3C,QAAQY,OAAS,GACnB+B,EAAK3C,QACL0f,EACA/c,EAAK3C,QAAU,IACf2C,EAAK3C,QAAQgL,MAAM,EAAG,IAAM,UAEjCrI,EAAK3C,QAAQY,OAAS,IACrB,sBAAM+G,UAAU,WAAW2C,QAAS,kBAAMqV,GAAaD,IAAvD,SACGA,EAAW,UAAO,mBAIxB/c,EAAK1C,OAAOW,OAAS,GACpB,cAAC,EAAD,CAAUX,OAAQ0C,EAAK1C,OAAQoB,GAAIsB,EAAKrB,U,uBC/BjC,MAA0B,iCCkB1Bse,EAfI,SAAC,GAAwC,IAAvCC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,WAAYC,EAAkB,EAAlBA,aAC7BxY,EAAUC,aAAY,SAAAC,GAAK,OAAIA,KAA/BF,MAER,OACI,mCAEQsY,EACE,mBAAGlY,UAAU,2BAA2B2C,QAASyV,EACnDnY,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,eACpC,mBAAGI,UAAU,eAAe2C,QAASwV,O,4GC6BxCE,EA/BI,SAAC,GAAkB,IAAjBte,EAAgB,EAAhBA,IAAK6F,EAAW,EAAXA,MACtB,OACI,sBAAKI,UAAU,2CACfC,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,aADtC,UAEI,cAAC0Y,EAAA,EAAD,CAAqBve,IAAKA,EAA1B,SACI,cAACwe,EAAA,EAAD,CAAcC,OAAO,EAAM7Y,KAAM,OAGrC,cAAC8Y,EAAA,EAAD,CAAoB1e,IAAKA,EAAzB,SACI,cAAC2e,EAAA,EAAD,CAAaF,OAAO,EAAM7Y,KAAM,OAGpC,cAACgZ,EAAA,EAAD,CAAkB5e,IAAKA,EAAvB,SACI,cAAC6e,EAAA,EAAD,CAAWJ,OAAO,EAAM7Y,KAAM,OAGlC,cAACkZ,EAAA,EAAD,CAAmB9e,IAAKA,EAAxB,SACI,cAAC+e,EAAA,EAAD,CAAYN,OAAO,EAAM7Y,KAAM,OAGnC,cAACoZ,EAAA,EAAD,CAAqBhf,IAAKA,EAA1B,SACI,cAACif,EAAA,EAAD,CAAcR,OAAO,EAAM7Y,KAAM,OAGrC,cAACsZ,EAAA,EAAD,CAAqBlf,IAAKA,EAA1B,SACI,cAACmf,EAAA,EAAD,CAAcV,OAAO,EAAM7Y,KAAM,WC0ElCwZ,EAnGI,SAAC,GAAY,IAAXne,EAAU,EAAVA,KAAU,EACCgK,oBAAS,GADV,mBACpBkT,EADoB,KACZkB,EADY,OAEKpU,oBAAS,GAFd,mBAEpBqU,EAFoB,KAEVC,EAFU,OAIGtU,oBAAS,GAJZ,mBAIpBuU,EAJoB,KAIXC,EAJW,OAMK3Z,aAAY,SAAAC,GAAK,OAAIA,KAA7CvH,EANmB,EAMnBA,KAAMqH,EANa,EAMbA,MAAOpH,EANM,EAMNA,OACfC,EAAWsK,cAPU,EASDiC,oBAAS,GATR,mBASbyU,GATa,aAUKzU,oBAAS,GAVd,6BAa3BiC,qBAAU,WACHjM,EAAKC,MAAM+Y,MAAK,SAAA5Y,GAAI,OAAIA,EAAKzB,MAAQpB,EAAKiB,KAAKG,OAC9Cyf,GAAU,GAEVA,GAAU,KAEf,CAACpe,EAAKC,MAAO1C,EAAKiB,KAAKG,MAE1B,IAAMwe,EAAU,uCAAG,sBAAAzf,EAAA,0DACZ2gB,EADY,wDAGfC,GAAY,GAHG,SAIT7gB,EAASsC,YAAS,CAACC,OAAMzC,OAAMC,YAJtB,OAKf8gB,GAAY,GALG,2CAAH,qDAQVlB,EAAY,uCAAG,sBAAA1f,EAAA,0DACd2gB,EADc,wDAGjBC,GAAY,GAHK,SAIX7gB,EAAS0C,YAAW,CAACH,OAAMzC,OAAMC,YAJtB,OAKjB8gB,GAAY,GALK,2CAAH,qDAUlBrS,qBAAU,WACH1O,EAAKiB,KAAKkgB,MAAM1F,MAAK,SAAAta,GAAE,OAAIA,IAAOsB,EAAKrB,OACtC8f,GAAS,GAETA,GAAS,KAEf,CAAClhB,EAAKiB,KAAKkgB,MAAO1e,EAAKrB,MAkBzB,OACI,sBAAKqG,UAAU,cAAf,UACI,qBAAKA,UAAU,iBAAf,SACI,gCACI,cAAC,EAAD,CACAkY,OAAQA,EACRC,WAAYA,EACZC,aAAcA,IAGd,cAAC,IAAD,CAAM/W,GAAE,gBAAWrG,EAAKrB,KAAOqG,UAAU,YAAzC,SACI,mBAAGA,UAAU,qBAGjB,qBAAKN,IAAKia,EAAM5Z,IAAI,WAAM4C,QAAS,kBAAM6W,GAAYD,WAK7D,sBAAKvZ,UAAU,iCAAf,UACI,qBAAIC,MAAO,CAACuN,QAAS,SAAU9J,OAAQ,WAAvC,UACK1I,EAAKC,MAAMhC,OADhB,YAIA,qBAAIgH,MAAO,CAACuN,QAAS,SAAU9J,OAAQ,WAAvC,UACK1I,EAAK4e,SAAS3gB,OADnB,2BAMAsgB,GAAW,cAAC,EAAD,CAAYxf,IAAG,UCvGlB,GDuGkB,iBAAsBiB,EAAKrB,KAAOiG,MAAOA,Q,sBEpDtEia,EAAc,SAAC,GAAD,IAAEC,EAAF,EAAEA,QAAS9e,EAAX,EAAWA,KAAMzC,EAAjB,EAAiBA,KAAjB,8CAA2B,WAAOE,GAAP,mBAAAC,EAAA,6DAC5CqhB,EAD4C,2BAC3BD,GAD2B,IAClB7e,MAAM,GAAD,mBAAM6e,EAAQ7e,OAAd,CAAqB1C,EAAKiB,SAEzDwgB,EAAc7J,YAASnV,EAAK4e,SAAUE,EAAQngB,IAAKogB,GAEnDxgB,EAL4C,2BAK9ByB,GAL8B,IAKxB4e,SAAUI,IAEpCvhB,EAAS,CAAEG,KAAMf,IAAWI,YAAac,QAASQ,IAPA,kBAUxCsB,YAAa,WAAD,OAAYif,EAAQngB,IAApB,SAAgC,KAAMpB,EAAKa,OAVf,uDAY9CX,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAZzB,yDAA3B,uDAgBdwgB,EAAgB,SAAC,GAAD,IAAEH,EAAF,EAAEA,QAAS9e,EAAX,EAAWA,KAAMzC,EAAjB,EAAiBA,KAAjB,8CAA2B,WAAOE,GAAP,mBAAAC,EAAA,6DAE9CqhB,EAF8C,2BAE7BD,GAF6B,IAEpB7e,MAAOqE,YAAWwa,EAAQ7e,MAAO1C,EAAKiB,KAAKG,OAErEqgB,EAAc7J,YAASnV,EAAK4e,SAAUE,EAAQngB,IAAKogB,GAEnDxgB,EAN8C,2BAMhCyB,GANgC,IAM1B4e,SAAUI,IAEpCvhB,EAAS,CAAEG,KAAMf,IAAWI,YAAac,QAASQ,IARE,kBAW1CsB,YAAa,WAAD,OAAYif,EAAQngB,IAApB,WAAkC,KAAMpB,EAAKa,OAXf,uDAahDX,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OAbvB,yDAA3B,uDCVdygB,EArDK,SAAC,GAAgC,IAA/Blf,EAA8B,EAA9BA,KAAM8e,EAAwB,EAAxBA,QAASK,EAAe,EAAfA,UAAe,EAEvBta,aAAY,SAAAC,GAAK,OAAIA,KAAtCvH,EAFwC,EAExCA,KAAMC,EAFkC,EAElCA,OACRC,EAAWsK,cAEXqX,EAAe,WACdpf,EAAKxB,KAAKG,MAAQpB,EAAKiB,KAAKG,KAAOmgB,EAAQtgB,KAAKG,MAAQpB,EAAKiB,KAAKG,KACjElB,EDyEiB,SAAC,GAAD,IAAEuC,EAAF,EAAEA,KAAM8e,EAAR,EAAQA,QAASvhB,EAAjB,EAAiBA,KAAMC,EAAvB,EAAuBA,OAAvB,8CAAmC,WAAOC,GAAP,iBAAAC,EAAA,sDACtD2hB,EADsD,sBACtCrf,EAAK4e,SAASlf,QAAO,SAAA4f,GAAE,OAAIA,EAAGC,QAAUT,EAAQngB,QADV,CACgBmgB,IAEtEvgB,EAHsD,2BAIrDyB,GAJqD,IAKxD4e,SAAU5e,EAAK4e,SAASlf,QAAO,SAAA4f,GAAE,OAAKD,EAAUrG,MAAK,SAAAwG,GAAE,OAAIF,EAAG3gB,MAAQ6gB,EAAG7gB,YAG7ElB,EAAS,CAAEG,KAAMf,IAAWI,YAAac,QAASQ,IAElDf,EAAO0C,KAAK,gBAAiB3B,GAC7B,IACG8gB,EAAU3b,SAAQ,SAAAC,GACbjD,YAAc,WAAD,OAAYiD,EAAKhF,KAAOpB,EAAKa,OAE1C,IAAMK,EAAM,CACRC,GAAIiF,EAAKhF,IACTC,KAAMkgB,EAAQS,MAAQ,0DAAkC,2EACxD1gB,WAAYigB,EAAQS,MAAQ,CAACT,EAAQlN,IAAIjT,KAAO,CAACqB,EAAKxB,KAAKG,KAC3DI,IAAI,SAAD,OAAWiB,EAAKrB,MAGvBlB,EAAS4C,YAAa,CAAC5B,MAAKlB,OAAMC,eAExC,MAAOuI,GACLtI,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO0G,EAAIzG,SAAShB,KAAKG,OAzBf,2CAAnC,sDCzERghB,CAAc,CAACzf,OAAMzC,OAAMuhB,UAASthB,aAI/CkiB,EAAW,WACb,OACI,qCACI,sBAAK1a,UAAU,gBAAgB2C,QAAS,kBAAMwX,GAAU,IAAxD,UACI,sBAAMna,UAAU,iBAAhB,oBADJ,eAGA,sBAAKA,UAAU,gBAAgB2C,QAASyX,EAAxC,UACI,sBAAMpa,UAAU,iBAAhB,4BADJ,iBAQZ,OACI,qBAAKA,UAAU,OAAf,UAEShF,EAAKxB,KAAKG,MAAQpB,EAAKiB,KAAKG,KAAOmgB,EAAQtgB,KAAKG,MAAQpB,EAAKiB,KAAKG,MACnE,sBAAKqG,UAAU,oBAAf,UACI,sBAAMA,UAAU,iBAAiBtG,GAAG,WAAW8K,cAAY,WAA3D,uBAIA,qBAAKxE,UAAU,gBAAgB2E,kBAAgB,WAA/C,SAEQ3J,EAAKxB,KAAKG,MAAQpB,EAAKiB,KAAKG,IAC1BmgB,EAAQtgB,KAAKG,MAAQpB,EAAKiB,KAAKG,IAC3B+gB,IACA,sBAAK1a,UAAU,gBAAgB2C,QAASyX,EAAxC,UACE,sBAAMpa,UAAU,iBAAhB,4BADF,aAGJ8Z,EAAQtgB,KAAKG,MAAQpB,EAAKiB,KAAKG,KAAO+gB,Y,QCQrDC,EAjDM,SAAC,GAA2C,IAA1C1I,EAAyC,EAAzCA,SAAUjX,EAA+B,EAA/BA,KAAM4f,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,WAAgB,EAC9B7V,mBAAS,IADqB,mBACrD3M,EADqD,KAC5CmO,EAD4C,OAG5B3G,aAAY,SAAAC,GAAK,OAAIA,KAA7CvH,EAHoD,EAGpDA,KAAMC,EAH8C,EAG9CA,OAAQoH,EAHsC,EAGtCA,MAChBnH,EAAWsK,cAyBjB,OACI,uBAAM/C,UAAU,4BAA4B0F,SAxB3B,SAACrJ,GAElB,GADAA,EAAEmJ,kBACEnN,EAAQyiB,OACR,OAAGD,EAAmBA,GAAW,QACjC,EAGJrU,EAAW,IAEX,IAAMuT,EAAa,CACf1hB,UACA4C,MAAO,GACPzB,KAAMjB,EAAKiB,KACXgK,WAAW,IAAI0I,MAAOC,cACtBoO,MAAOK,GAAWA,EAAQG,UAC1BnO,IAAKgO,GAAWA,EAAQphB,MAK5B,OAFAf,EFvBqB,SAAC,GAAD,IAAEuC,EAAF,EAAEA,KAAM+e,EAAR,EAAQA,WAAYxhB,EAApB,EAAoBA,KAAMC,EAA1B,EAA0BA,OAA1B,8CAAsC,WAAOC,GAAP,yBAAAC,EAAA,6DACzDa,EADyD,2BAC3CyB,GAD2C,IACrC4e,SAAS,GAAD,mBAAM5e,EAAK4e,UAAX,CAAqBG,MAEvDthB,EAAS,CAAEG,KAAMf,IAAWI,YAAac,QAASQ,IAHa,SAMrDD,EANqD,2BAM1CygB,GAN0C,IAM9BiB,OAAQhgB,EAAKrB,IAAKshB,WAAYjgB,EAAKxB,KAAKG,MANV,SAOzCR,YAAY,UAAWG,EAAMf,EAAKa,OAPO,OAOrDC,EAPqD,OASrD4F,EATqD,2BASvC5F,EAAIC,KAAKygB,YAT8B,IASlBvgB,KAAMjB,EAAKiB,OAC9CD,EAVqD,2BAUvCyB,GAVuC,IAUjC4e,SAAS,GAAD,mBAAM5e,EAAK4e,UAAX,CAAqB3a,MACvDxG,EAAS,CAAEG,KAAMf,IAAWI,YAAac,QAASQ,IAGlDf,EAAO0C,KAAK,gBAAiB3B,GAGvBE,EAAM,CACRC,GAAIL,EAAIC,KAAKygB,WAAWpgB,IACxBC,KAAMmgB,EAAWQ,MAAQ,2DAAmC,2EAC5D1gB,WAAYkgB,EAAWQ,MAAQ,CAACR,EAAWnN,IAAIjT,KAAO,CAACqB,EAAKxB,KAAKG,KACjEI,IAAI,SAAD,OAAWiB,EAAKrB,KACnBtB,QAAS2C,EAAK3C,QACd2B,MAAOgB,EAAK1C,OAAO,GAAGyB,KAG1BtB,EAASwB,YAAa,CAACR,MAAKlB,OAAMC,YA1ByB,kDA6B3DC,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO,KAAIC,SAAShB,KAAKG,OA7BZ,0DAAtC,sDEuBZyhB,CAAc,CAAClgB,OAAM+e,aAAYxhB,OAAMC,YAE7CqiB,EAAmBA,GAAW,QAAjC,GAIA,UACK5I,EACD,uBAAOrZ,KAAK,OAAOyO,YAAY,kCAC/BzB,MAAOvN,EAASwN,SAAU,SAAAxJ,GAAC,OAAImK,EAAWnK,EAAEyJ,OAAOF,QACnD3F,MAAO,CACHvF,OAAQkF,EAAQ,YAAc,YAC9B4B,MAAO5B,EAAQ,QAAU,OACzB2B,WAAY3B,EAAQ,kBAAoB,MAG5C,cAAC0H,EAAA,EAAD,CAAOd,WAAYA,EAAYnO,QAASA,EAASuH,MAAOA,IAExD,wBAAQhH,KAAK,SAASoH,UAAU,UAAhC,0BCwHGmb,EA5JK,SAAC,GAA0C,IAAzClJ,EAAwC,EAAxCA,SAAU6H,EAA8B,EAA9BA,QAAS9e,EAAqB,EAArBA,KAAM+f,EAAe,EAAfA,UAAe,EAClClb,aAAY,SAAAC,GAAK,OAAIA,KAArCvH,EADkD,EAClDA,KAAMqH,EAD4C,EAC5CA,MACRnH,EAAWsK,cAFyC,EAI5BiC,mBAAS,IAJmB,mBAInD3M,EAJmD,KAI1CmO,EAJ0C,OAK1BxB,oBAAS,GALiB,mBAKnD+S,EALmD,KAKzCC,EALyC,OAO9BhT,oBAAS,GAPqB,mBAOnDkC,EAPmD,KAO3CiT,EAP2C,OAQ9BnV,oBAAS,GARqB,mBAQnDkT,EARmD,KAQ3CkB,EAR2C,OAS1BpU,oBAAS,GATiB,mBASnDqU,EATmD,KASzCC,EATyC,OAW5BtU,oBAAS,GAXmB,mBAWnD4V,EAXmD,KAW1CC,EAX0C,KAc1D5T,qBAAU,WACNT,EAAWsT,EAAQzhB,SACnB+gB,GAAU,GACVyB,GAAW,GACRf,EAAQ7e,MAAM+Y,MAAK,SAAA5Y,GAAI,OAAIA,EAAKzB,MAAQpB,EAAKiB,KAAKG,QACjDyf,GAAU,KAEhB,CAACU,EAASvhB,EAAKiB,KAAKG,MAEtB,IAUMwe,EAAU,uCAAG,sBAAAzf,EAAA,0DACZ2gB,EADY,wDAEfD,GAAU,GAEVE,GAAY,GAJG,SAKT7gB,EAASohB,EAAY,CAACC,UAAS9e,OAAMzC,UAL5B,OAMf+gB,GAAY,GANG,2CAAH,qDASVlB,EAAY,uCAAG,sBAAA1f,EAAA,0DACd2gB,EADc,wDAEjBD,GAAU,GAEVE,GAAY,GAJK,SAKX7gB,EAASwhB,EAAc,CAACH,UAAS9e,OAAMzC,UAL5B,OAMjB+gB,GAAY,GANK,2CAAH,qDAeZ8B,EAAY,CACd9W,QAASwV,EAAQngB,IAAM,EAAI,GAC3B0hB,cAAevB,EAAQngB,IAAM,UAAY,QAG7C,OACI,sBAAKqG,UAAU,oBAAoBC,MAAOmb,EAA1C,UACI,eAAC,IAAD,CAAM/Z,GAAE,mBAAcyY,EAAQtgB,KAAKG,KAAOqG,UAAU,mBAApD,UACI,cAACP,EAAA,EAAD,CAAQC,IAAKoa,EAAQtgB,KAAK8D,OAAQqC,KAAK,iBACvC,oBAAIK,UAAU,OAAd,SAAsB8Z,EAAQtgB,KAAK6D,cAGvC,sBAAK2C,UAAU,kBAAf,UACI,sBAAKA,UAAU,YACfC,MAAO,CACHvF,OAAQkF,EAAQ,YAAc,YAC9B4B,MAAO5B,EAAQ,QAAU,QAH7B,UAMQsH,EACE,0BAAUoU,KAAK,IAAI1V,MAAOvN,EAC5BwN,SAAU,SAAAxJ,GAAC,OAAImK,EAAWnK,EAAEyJ,OAAOF,UAEjC,gCAEMkU,EAAQlN,KAAOkN,EAAQlN,IAAIjT,MAAQmgB,EAAQtgB,KAAKG,KAChD,eAAC,IAAD,CAAM0H,GAAE,mBAAcyY,EAAQlN,IAAIjT,KAAOqG,UAAU,OAAnD,cACM8Z,EAAQlN,IAAIvP,YAGtB,+BAEQhF,EAAQY,OAAS,IAAMZ,EACvB0f,EAAW1f,EAAU,IAAMA,EAAQgL,MAAM,EAAG,KAAO,SAIvDhL,EAAQY,OAAS,KACjB,sBAAM+G,UAAU,WAAW2C,QAAS,kBAAMqV,GAAaD,IAAvD,SACKA,EAAW,UAAO,eAOnC,sBAAK9X,MAAO,CAACyD,OAAQ,WAArB,UACI,uBAAO1D,UAAU,kBAAjB,SACKuD,IAAOuW,EAAQtW,WAAWC,YAG/B,wBAAOzD,UAAU,wBAAjB,UACK8Z,EAAQ7e,MAAMhC,OADnB,YAKIiO,EACE,qCACE,uBAAOlH,UAAU,wBACjB2C,QA7FP,WACdmX,EAAQzhB,UAAYA,GACnBI,EHGiB,SAAC,GAAD,IAAEqhB,EAAF,EAAEA,QAAS9e,EAAX,EAAWA,KAAM3C,EAAjB,EAAiBA,QAASE,EAA1B,EAA0BA,KAA1B,8CAAoC,WAAOE,GAAP,iBAAAC,EAAA,sDACvDshB,EAAc7J,YAASnV,EAAK4e,SAAUE,EAAQngB,IAAxB,YAAC,eAAgCmgB,GAAjC,IAA0CzhB,aAChEkB,EAFuD,2BAEzCyB,GAFyC,IAEnC4e,SAAUI,IAEpCvhB,EAAS,CAAEG,KAAMf,IAAWI,YAAac,QAASQ,IAClD,IACIsB,YAAa,WAAD,OAAYif,EAAQngB,KAAO,CAAEtB,WAAWE,EAAKa,OAC3D,MAAO2H,GACLtI,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO0G,EAAIzG,SAAShB,KAAKG,OARd,2CAApC,sDGHR8hB,CAAc,CAACzB,UAAS9e,OAAM3C,UAASE,UAChD4hB,GAAU,IAEVA,GAAU,IAuFU,sBAIA,uBAAOna,UAAU,wBACjB2C,QAAS,kBAAMwX,GAAU,IADzB,yBAMF,uBAAOna,UAAU,wBACnB2C,QA1EJ,WAChB,GAAGiY,EAAS,OAAOC,GAAW,GAC9BA,EAAW,2BAAIf,GAAL,IAAciB,gBAuEF,SAEGH,EAAU,WAAO,4BASlC,sBAAK5a,UAAU,iCAAiCC,MAAO,CAACyD,OAAQ,WAAhE,UACI,cAAC,EAAD,CAAa1I,KAAMA,EAAM8e,QAASA,EAASK,UAAWA,IACtD,cAAC,EAAD,CAAYjC,OAAQA,EAAQC,WAAYA,EAAYC,aAAcA,UAKtEwC,GACA,cAAC,EAAD,CAAc5f,KAAMA,EAAM4f,QAASA,EAASC,WAAYA,EAAxD,SACI,eAAC,IAAD,CAAMxZ,GAAE,mBAAcuZ,EAAQphB,KAAKG,KAAOqG,UAAU,OAApD,cACM4a,EAAQphB,KAAK6D,SADnB,SAMP4U,MCpHEuJ,EA3CQ,SAAC,GAA8B,IAA7B1B,EAA4B,EAA5BA,QAAS9e,EAAmB,EAAnBA,KAAMygB,EAAa,EAAbA,QAAa,EACnBzW,mBAAS,IADU,mBAC1C0W,EAD0C,KACjCC,EADiC,OAEzB3W,mBAAS,GAFgB,mBAE1C4W,EAF0C,KAEpCC,EAFoC,KAQjD,OAJA5U,qBAAU,WACN0U,EAAWF,EAAQpY,MAAMoY,EAAQxiB,OAAS2iB,MAC5C,CAACH,EAASG,IAGR,qBAAK5b,UAAU,kBAAf,SACI,cAAC,EAAD,CAAa8Z,QAASA,EAAS9e,KAAMA,EAAM+f,UAAWjB,EAAQngB,IAA9D,SACI,sBAAKqG,UAAU,OAAf,UAEQ0b,EAAQ3f,KAAI,SAAC4C,EAAMwE,GAAP,OACRxE,EAAK4b,OACL,cAAC,EAAD,CAEAT,QAASnb,EACT3D,KAAMA,EACN+f,UAAWjB,EAAQngB,KAHdwJ,MASTsY,EAAQxiB,OAAS2iB,EAAO,EACtB,qBAAK3b,MAAO,CAACyD,OAAQ,UAAWlC,MAAO,WACzCmB,QAAS,kBAAMkZ,EAAQD,EAAO,KAD5B,6BAKAH,EAAQxiB,OAAS,GACnB,qBAAKgH,MAAO,CAACyD,OAAQ,UAAWlC,MAAO,WACvCmB,QAAS,kBAAMkZ,EAAQ,IADvB,0CCcTC,EA9CE,SAAC,GAAY,IAAX9gB,EAAU,EAAVA,KAAU,EACOgK,mBAAS,IADhB,mBAClB4U,EADkB,KACRmC,EADQ,OAEe/W,mBAAS,IAFxB,mBAElBgX,EAFkB,KAEJC,EAFI,OAGDjX,mBAAS,GAHR,mBAGlB4W,EAHkB,KAGZC,EAHY,OAKiB7W,mBAAS,IAL1B,mBAKlBkX,EALkB,KAKHC,EALG,KAkBzB,OAXAlV,qBAAU,WACN,IAAMmV,EAAQphB,EAAK4e,SAASlf,QAAO,SAAA4f,GAAE,OAAKA,EAAGC,SAC7CwB,EAAYK,GACZH,EAAgBG,EAAM/Y,MAAM+Y,EAAMnjB,OAAS2iB,MAC7C,CAAC5gB,EAAK4e,SAAUgC,IAElB3U,qBAAU,WACN,IAAMoV,EAASrhB,EAAK4e,SAASlf,QAAO,SAAA4f,GAAE,OAAIA,EAAGC,SAC7C4B,EAAiBE,KAClB,CAACrhB,EAAK4e,WAGL,sBAAK5Z,UAAU,WAAf,UAEQgc,EAAajgB,KAAI,SAAC+d,EAAS3W,GAAV,OACb,cAAC,EAAD,CAA4B2W,QAASA,EAAS9e,KAAMA,EACpDygB,QAASS,EAAcxhB,QAAO,SAAAiE,GAAI,OAAIA,EAAK4b,QAAUT,EAAQngB,QADxCwJ,MAMzByW,EAAS3gB,OAAS2iB,EAAO,EACvB,qBAAK5b,UAAU,iBACjBC,MAAO,CAACyD,OAAQ,UAAWlC,MAAO,WAClCmB,QAAS,kBAAMkZ,EAAQD,EAAO,KAF5B,6BAMAhC,EAAS3gB,OAAS,GACpB,qBAAK+G,UAAU,iBACfC,MAAO,CAACyD,OAAQ,UAAWlC,MAAO,WAClCmB,QAAS,kBAAMkZ,EAAQ,IAFvB,+CClBDzF,IAbE,SAAC,GAAmB,IAAlBpb,EAAiB,EAAjBA,KAAM4E,EAAW,EAAXA,MACrB,OACI,sBAAKI,UAAU,YAAf,UACI,cAAC,EAAD,CAAYhF,KAAMA,IAClB,cAAC,EAAD,CAAUA,KAAMA,EAAM4E,MAAOA,IAC7B,cAAC,EAAD,CAAY5E,KAAMA,IAElB,cAAC,EAAD,CAAUA,KAAMA,IAChB,cAAC,EAAD,CAAcA,KAAMA,S,mNCdnBb,EAAU,uCAAG,WAAOJ,EAAKX,GAAZ,eAAAV,EAAA,sEACJ4jB,IAAMC,IAAN,eAAkBxiB,GAAO,CACvCyiB,QAAS,CAAEC,cAAerjB,KAFR,cAChBC,EADgB,yBAIfA,GAJe,2CAAH,wDAOVF,EAAW,uCAAG,WAAOY,EAAKiB,EAAM5B,GAAlB,eAAAV,EAAA,sEACL4jB,IAAMthB,KAAN,eAAmBjB,GAAOiB,EAAM,CAC9CwhB,QAAS,CAAEC,cAAerjB,KAFP,cACjBC,EADiB,yBAIhBA,GAJgB,2CAAH,0DAcXwB,EAAY,uCAAG,WAAOd,EAAKiB,EAAM5B,GAAlB,eAAAV,EAAA,sEACN4jB,IAAMI,MAAN,eAAoB3iB,GAAOiB,EAAM,CAC/CwhB,QAAS,CAAEC,cAAerjB,KAFN,cAClBC,EADkB,yBAIjBA,GAJiB,2CAAH,0DAOZqC,EAAa,uCAAG,WAAO3B,EAAKX,GAAZ,eAAAV,EAAA,sEACP4jB,IAAMK,OAAN,eAAqB5iB,GAAO,CAC1CyiB,QAAS,CAAEC,cAAerjB,KAFL,cACnBC,EADmB,yBAIlBA,GAJkB,2CAAH,yD,uGCUXujB,UAhCF,WAAO,IACRljB,EAAO+G,cAAP/G,GADO,EAESsL,mBAAS,IAFlB,mBAERhK,EAFQ,KAEF6hB,EAFE,OAIchd,aAAY,SAAAC,GAAK,OAAIA,KAA1CvH,EAJO,EAIPA,KAAMgD,EAJC,EAIDA,WACR9C,EAAWsK,cAWjB,OATAkE,qBAAU,WAGN,GAFAxO,EAAS6C,YAAQ,CAACC,aAAY7B,KAAInB,UAE/BgD,EAAWtC,OAAS,EAAE,CACrB,IAAMuF,EAASjD,EAAWb,QAAO,SAAAM,GAAI,OAAIA,EAAKrB,MAAQD,KACtDmjB,EAAQre,MAEd,CAACjD,EAAY9C,EAAUiB,EAAInB,IAGzB,sBAAKyH,UAAU,QAAf,UAEwB,IAAhBhF,EAAK/B,QACL,qBAAKyG,IAAKwG,IAAUnG,IAAI,UAAUC,UAAU,yBAI5ChF,EAAKe,KAAI,SAAA4C,GAAI,OACT,cAAC,IAAD,CAAyB3D,KAAM2D,GAAhBA,EAAKhF,a,qHCuFzBmjB,EAlHK,SAAC,GAAiB,IAAhB3C,EAAe,EAAfA,UAAe,EAIDnV,mBAHd,CACd1G,SAAU,GAAIye,OAAQ,GAAIC,QAAS,GAAIC,QAAS,GAAItK,MAAO,GAAIkD,OAAQ,KAF1C,mBAI1BnD,EAJ0B,KAIhB2C,EAJgB,KAKzB/W,EAAsDoU,EAAtDpU,SAAUye,EAA4CrK,EAA5CqK,OAAQC,EAAoCtK,EAApCsK,QAASC,EAA2BvK,EAA3BuK,QAAStK,EAAkBD,EAAlBC,MAAOkD,EAAWnD,EAAXmD,OALlB,EAOL7Q,mBAAS,IAPJ,mBAO1B1H,EAP0B,KAOlB4f,EAPkB,OASTrd,aAAY,SAAAC,GAAK,OAAIA,KAArCvH,EATyB,EASzBA,KAAMqH,EATmB,EASnBA,MACRnH,EAAWsK,cAEjBkE,qBAAU,WACNoO,EAAY9c,EAAKiB,QAClB,CAACjB,EAAKiB,OAGT,IAWM2jB,EAAc,SAAA9gB,GAAM,IAAD,EACGA,EAAEyJ,OAAlBH,EADa,EACbA,KAAMC,EADO,EACPA,MACdyP,EAAY,2BAAK3C,GAAN,kBAAiB/M,EAAMC,MAQtC,OACI,sBAAK5F,UAAU,eAAf,UACI,wBAAQA,UAAU,2BAClB2C,QAAS,kBAAMwX,GAAU,IADzB,sBAKA,uBAAMzU,SAZO,SAAArJ,GACjBA,EAAEmJ,iBACF/M,EAASga,YAAkB,CAACC,WAAUpV,SAAQ/E,WAU1C,UACI,sBAAKyH,UAAU,cAAf,UACI,qBAAKN,IAAKpC,EAASoK,IAAIC,gBAAgBrK,GAAU/E,EAAKiB,KAAK8D,OAC3DyC,IAAI,SAASE,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,eACnD,iCACI,mBAAGI,UAAU,kBACb,mDACA,uBAAOpH,KAAK,OAAO+M,KAAK,OAAOjM,GAAG,UAClC4P,OAAO,UAAUzD,SApChB,SAACxJ,GAClB,IAAMoN,EAAOpN,EAAEyJ,OAAOyD,MAAM,GAEtBxI,EAAMmS,YAAWzJ,GACvB,GAAG1I,EAAK,OAAOtI,EAAS,CACpBG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO0G,KAG9Cmc,EAAUzT,YAgCF,sBAAKzJ,UAAU,aAAf,UACI,uBAAO4E,QAAQ,WAAf,kCACA,sBAAK5E,UAAU,oBAAf,UACI,uBAAOpH,KAAK,OAAOoH,UAAU,eAAetG,GAAG,WAC/CiM,KAAK,WAAWC,MAAOtH,EAAUuH,SAAUsX,IAC3C,wBAAOnd,UAAU,gCACjBC,MAAO,CAACI,IAAK,MAAOiC,MAAO,MAAO/B,UAAW,oBAD7C,UAEKjC,EAASrF,OAFd,eAOR,sBAAK+G,UAAU,aAAf,UACI,uBAAO4E,QAAQ,SAAf,+CACA,uBAAOhM,KAAK,OAAO+M,KAAK,SAASC,MAAOmX,EACxC/c,UAAU,eAAe6F,SAAUsX,OAGvC,sBAAKnd,UAAU,aAAf,UACI,uBAAO4E,QAAQ,UAAf,oCACA,uBAAOhM,KAAK,OAAO+M,KAAK,UAAUC,MAAOoX,EACzChd,UAAU,eAAe6F,SAAUsX,OAGvC,sBAAKnd,UAAU,aAAf,UACI,uBAAO4E,QAAQ,UAAf,qBACA,uBAAOhM,KAAK,OAAO+M,KAAK,UAAUC,MAAOqX,EACzCjd,UAAU,eAAe6F,SAAUsX,OAGvC,sBAAKnd,UAAU,aAAf,UACI,uBAAO4E,QAAQ,QAAf,wCACA,0BAAUe,KAAK,QAAQC,MAAO+M,EAAOyK,KAAK,KAAK9B,KAAK,IACpDtb,UAAU,eAAe6F,SAAUsX,IAEnC,wBAAOnd,UAAU,iCAAjB,UACK2S,EAAM1Z,OADX,aAKJ,uBAAO2L,QAAQ,SAAf,+BACA,qBAAK5E,UAAU,gCAAf,SACI,yBAAQ2F,KAAK,SAASjM,GAAG,SAASkM,MAAOiQ,EACzC7V,UAAU,gCACV6F,SAAUsX,EAFV,UAGI,wBAAQvX,MAAM,OAAd,iBACA,wBAAQA,MAAM,SAAd,qBACA,wBAAQA,MAAM,QAAd,0BAIR,wBAAQ5F,UAAU,qBAAqBpH,KAAK,SAA5C,6B,gBC/EDykB,EA9BG,SAAC,GAA+B,IAA9BlY,EAA6B,EAA7BA,MAAO4N,EAAsB,EAAtBA,iBACfxa,EAASsH,aAAY,SAAAC,GAAK,OAAIA,KAA9BvH,KACR,OACI,qBAAKyH,UAAU,SAAf,SACI,sBAAKA,UAAU,aAAf,UACI,oBAAIA,UAAU,cAAd,yCACA,uBAEA,qBAAKA,UAAU,iBAAf,SAEQmF,EAAMpJ,KAAI,SAAAvC,GAAI,OACV,cAAC2M,EAAA,EAAD,CAAyB3M,KAAMA,EAAMuZ,iBAAkBA,EAAvD,SAEQxa,EAAKiB,KAAKG,MAAQH,EAAKG,KAAO,cAACka,EAAA,EAAD,CAAWra,KAAMA,KAFxCA,EAAKG,UAUhC,qBAAKqG,UAAU,QAAQ2C,QAAS,kBAAMoQ,GAAiB,IAAvD,wBCQDuK,EA7BG,SAAC,GAA+B,IAA9BnY,EAA6B,EAA7BA,MAAO6N,EAAsB,EAAtBA,iBACfza,EAASsH,aAAY,SAAAC,GAAK,OAAIA,KAA9BvH,KACR,OACI,qBAAKyH,UAAU,SAAf,SACI,sBAAKA,UAAU,aAAf,UACI,oBAAIA,UAAU,cAAd,mCACA,uBAEA,qBAAKA,UAAU,iBAAf,SAEQmF,EAAMpJ,KAAI,SAAAvC,GAAI,OACV,cAAC2M,EAAA,EAAD,CAAyB3M,KAAMA,EAAMwZ,iBAAkBA,EAAvD,SAEQza,EAAKiB,KAAKG,MAAQH,EAAKG,KAAO,cAACka,EAAA,EAAD,CAAWra,KAAMA,KAFxCA,EAAKG,UAShC,qBAAKqG,UAAU,QAAQ2C,QAAS,kBAAMqQ,GAAiB,IAAvD,wBC2EDuK,EA5FF,SAAC,GAAmC,IAAlC7jB,EAAiC,EAAjCA,GAAInB,EAA6B,EAA7BA,KAAM+Y,EAAuB,EAAvBA,QAAS7Y,EAAc,EAAdA,SAAc,EACZuM,mBAAS,IADG,mBACrC0N,EADqC,KAC3B2C,EAD2B,OAEhBrQ,oBAAS,GAFO,mBAErCkC,EAFqC,KAE7BiT,EAF6B,OAIFnV,oBAAS,GAJP,mBAIrCwY,EAJqC,KAItBzK,EAJsB,OAKF/N,oBAAS,GALP,mBAKrCyY,EALqC,KAKtBzK,EALsB,KA0B5C,OAnBA/L,qBAAU,WACN,GAAGvN,IAAOnB,EAAKiB,KAAKG,IAChB0b,EAAY,CAAC9c,EAAKiB,WACjB,CACD,IAAMyF,EAAUqS,EAAQnM,MAAMzK,QAAO,SAAAlB,GAAI,OAAIA,EAAKG,MAAQD,KAC1D2b,EAAYpW,MAEjB,CAACvF,EAAInB,EAAME,EAAU6Y,EAAQnM,QAGhC8B,qBAAU,WAEFxO,EADD+kB,GAAiBC,GAAiBvW,EACxB,CAAEtO,KAAMC,IAAY2X,MAAOzX,SAAS,GAEpC,CAAEH,KAAMC,IAAY2X,MAAOzX,SAAS,MAEnD,CAACykB,EAAeC,EAAevW,EAAQzO,IAIrC,qBAAKuH,UAAU,OAAf,SAEQ0S,EAAS3W,KAAI,SAAAvC,GAAI,OACb,sBAAKwG,UAAU,iBAAf,UACI,cAACP,EAAA,EAAD,CAAQC,IAAKlG,EAAK8D,OAAQqC,KAAK,kBAE/B,sBAAKK,UAAU,eAAf,UACI,sBAAKA,UAAU,qBAAf,UACI,6BAAKxG,EAAK6D,WAEN7D,EAAKG,MAAQpB,EAAKiB,KAAKG,IACpB,wBAAQqG,UAAU,uBACrB2C,QAAS,kBAAMwX,GAAU,IADtB,6CAKD,cAACtG,EAAA,EAAD,CAAWra,KAAMA,OAM3B,sBAAKwG,UAAU,aAAf,UACI,uBAAMA,UAAU,OAAO2C,QAAS,kBAAMoQ,GAAiB,IAAvD,UACKvZ,EAAKM,UAAUb,OADpB,kCAGA,uBAAM+G,UAAU,OAAO2C,QAAS,kBAAMqQ,GAAiB,IAAvD,UACKxZ,EAAKqZ,UAAU5Z,OADpB,+BAKJ,+BAAKO,EAAK8E,SAAV,IAAoB,sBAAM0B,UAAU,cAAhB,SAA+BxG,EAAKujB,YACxD,mBAAG/c,UAAU,MAAb,SAAoBxG,EAAKwjB,UACzB,oBAAIhd,UAAU,MAAd,SAAqBxG,EAAK4a,QAC1B,mBAAGc,KAAM1b,EAAKyjB,QAASnX,OAAO,SAAS4X,IAAI,aAA3C,SACKlkB,EAAKyjB,UAEV,4BAAIzjB,EAAKmZ,WAITzL,GAAU,cAAC,EAAD,CAAaiT,UAAWA,IAIlCqD,GACA,cAAC,EAAD,CACArY,MAAO3L,EAAKM,UACZiZ,iBAAkBA,IAIlB0K,GACA,cAAC,EAAD,CACAtY,MAAO3L,EAAKqZ,UACZG,iBAAkBA,MApDWxZ,EAAKG,W,+BCG/CgkB,EArCG,SAAC,GAAuB,IAArB/N,EAAoB,EAApBA,MAAO7Q,EAAa,EAAbA,OAClBa,EAAUC,aAAY,SAACC,GAAD,OAAWA,KAAjCF,MAER,OAAe,IAAXb,EACK,oBAAIiB,UAAU,0BAAd,kDAGP,qBAAKA,UAAU,aAAf,SACG4P,EAAM7T,KAAI,SAACf,GAAD,OACT,cAAC,IAAD,CAAqBqG,GAAE,gBAAWrG,EAAKrB,KAAvC,SACE,sBAAKqG,UAAU,qBAAf,UACGhF,EAAK1C,OAAO,GAAGyB,IAAIuJ,MAAM,UACxB,uBACEiH,UAAQ,EACR7K,IAAK1E,EAAK1C,OAAO,GAAGyB,IACpBgG,IAAK/E,EAAK1C,OAAO,GAAGyB,IACpBkG,MAAO,CAAEvF,OAAQkF,EAAQ,YAAc,eAGzC,qBACEF,IAAK1E,EAAK1C,OAAO,GAAGyB,IACpBgG,IAAK/E,EAAK1C,OAAO,GAAGyB,IACpBkG,MAAO,CAAEvF,OAAQkF,EAAQ,YAAc,eAI3C,sBAAKI,UAAU,kBAAf,UACE,mBAAGA,UAAU,eAAb,SAA6BhF,EAAKC,MAAMhC,SACxC,mBAAG+G,UAAU,iBAAb,SAA+BhF,EAAK4e,SAAS3gB,gBAnBxC+B,EAAKrB,W,uBCkCTuc,EAxCD,SAAC,GAAmC,IAAlC3d,EAAiC,EAAjCA,KAAMmB,EAA2B,EAA3BA,GAAIjB,EAAuB,EAAvBA,SAAU6Y,EAAa,EAAbA,QAAa,EACnBtM,mBAAS,IADU,mBACtC4K,EADsC,KAC/BgO,EAD+B,OAEjB5Y,mBAAS,GAFQ,mBAEtCjG,EAFsC,KAE9B8e,EAF8B,OAGrB7Y,mBAAS,GAHY,mBAGtC5K,EAHsC,KAGhC2c,EAHgC,OAIrB/R,oBAAS,GAJY,mBAItCK,EAJsC,KAIhCC,EAJgC,KAM7C2B,qBAAU,WACNqK,EAAQ1B,MAAMlR,SAAQ,SAAApF,GACfA,EAAKK,MAAQD,IACZkkB,EAAStkB,EAAKsW,OACdiO,EAAUvkB,EAAKyF,QACfgY,EAAQzd,EAAKc,YAGvB,CAACkX,EAAQ1B,MAAOlW,IAElB,IAAMyc,EAAc,uCAAG,8BAAAzd,EAAA,6DACnB4M,GAAQ,GADW,SAEDnL,YAAW,cAAD,OAAeT,EAAf,kBAAkC,EAAPU,GAAY7B,EAAKa,OAFrD,OAEbC,EAFa,OAGb4F,EAHa,2BAGC5F,EAAIC,MAHL,IAGWc,KAAMA,EAAO,EAAGT,IAAKD,IACnDjB,EAAS,CAACG,KAAMkX,IAAc7X,YAAac,QAASkG,IACpDqG,GAAQ,GALW,2CAAH,qDAQpB,OACI,gCACI,cAAC,EAAD,CAAWsK,MAAOA,EAAO7Q,OAAQA,IAG7BsG,GAAQ,qBAAK3F,IAAKwG,IAAUnG,IAAI,UAAUC,UAAU,oBAIxD,cAACqW,EAAA,EAAD,CAAatX,OAAQA,EAAQ3E,KAAMA,EACnCiL,KAAMA,EAAM8Q,eAAgBA,Q,QCQzB2H,UAvCC,WAAO,IAAD,EACMje,aAAY,SAACC,GAAD,OAAWA,KAAzCwR,EADY,EACZA,QAAS/Y,EADG,EACHA,KACXE,EAAWsK,cAETrJ,EAAO+G,cAAP/G,GAJY,EAKUsL,oBAAS,GALnB,mBAKb+Y,EALa,KAKJC,EALI,KAapB,OANA/W,qBAAU,WACJqK,EAAQ3B,IAAInU,OAAM,SAACmD,GAAD,OAAUA,IAASjF,MACvCjB,EAAS8Z,YAAgB,CAAE7Y,KAAInB,YAEhC,CAACmB,EAAInB,EAAME,EAAU6Y,EAAQ3B,MAG9B,sBAAK3P,UAAU,UAAf,UACE,cAAC,EAAD,CAAMzH,KAAMA,EAAM+Y,QAASA,EAAS7Y,SAAUA,EAAUiB,GAAIA,IAE3DnB,EAAKiB,KAAKG,MAAQD,GACjB,qBAAKsG,UAAU,cAAf,SACE,wBACEA,UAAW+d,EAAU,GAAK,SAC1Bpb,QAAS,kBAAMqb,GAAW,IAF5B,qCASH1M,EAAQtY,QACP,qBAAKgH,UAAU,kBAAkBN,IAAKwG,IAAUnG,IAAI,YAEpD,mCACI,cAAC,EAAD,CAAOxH,KAAMA,EAAM+Y,QAASA,EAAS7Y,SAAUA,EAAUiB,GAAIA,W,qJCR1DukB,EAhCD,SAAC,GAAa,IAAZhT,EAAW,EAAXA,MACZ,OACI,gCACI,+BAESW,SAASX,EAAM,MAAOwC,WAAWxU,OAAS,EACzC,IAAO2S,SAASX,EAAM,MACrBW,SAASX,EAAM,QAG1B,qCAEA,+BAESW,SAASX,EAAM,IAAKwC,WAAWxU,OAAS,EACvC,IAAO2S,SAASX,EAAM,IACrBW,SAASX,EAAM,MAG1B,qCAEA,gCAESA,EAAM,IAAIwC,WAAWxU,OAAS,EAC7B,IAAOgS,EAAM,GAAM,IAClBA,EAAM,GAAM,UCmEpBiT,EAvFI,SAAC,GAA8B,IAA7B1kB,EAA4B,EAA5BA,KAAMC,EAAsB,EAAtBA,IAAKmG,EAAiB,EAAjBA,MAAOtG,EAAU,EAAVA,KAC3Bf,EAASsH,aAAY,SAAAC,GAAK,OAAIA,KAA9BvH,KACFE,EAAWsK,cAUjB,OACI,qCACI,sBAAK/C,UAAU,aAAf,UACI,cAACP,EAAA,EAAD,CAAQC,IAAKlG,EAAK8D,OAAQqC,KAAK,iBAC/B,+BAAOnG,EAAK6D,cAGhB,sBAAK2C,UAAU,cAAf,UAEQxG,EAAKG,MAAQpB,EAAKiB,KAAKG,KACvB,mBAAGqG,UAAU,2BACb2C,QAnBa,WACrBrJ,GAEDqK,OAAOC,QAAQ,mEACdnL,EAAS4G,YAAe,CAAC5F,MAAKH,OAAMf,aAkBhC,gCAEQkB,EAAIG,MACJ,qBAAKoG,UAAU,YACfC,MAAO,CAACvF,OAAQkF,EAAQ,YAAc,aADtC,SAEKnG,EAAIG,OAITH,EAAId,MAAMoD,KAAI,SAAC4C,EAAMwE,GAAP,OACV,8BAEQxE,EAAK5E,IAAIuJ,MAAM,UACbmE,YAAU9I,EAAK5E,IAAK6F,GACpB4H,YAAU7I,EAAK5E,IAAK6F,IAJpBuD,SAYlB1J,EAAIqF,MACJ,yBAAQkB,UAAU,qCAClBC,MAAO,CAACsB,WAAY,OAAQ4c,aAAc,QAD1C,UAGI,sBAAMne,UAAU,uCAChBC,MAAO,CACHmV,SAAU,SAAU5T,MAA0B,IAAnB/H,EAAIqF,KAAKiN,MAAc,UAAY,QAC9DrR,OAAQkF,EAAQ,YAAc,aAHlC,SAM2B,IAAnBnG,EAAIqF,KAAKiN,MACPtS,EAAIqF,KAAK6J,MAAQ,eAAiB,iBAClClP,EAAIqF,KAAK6J,MAAQ,qBAAuB,SAIlD,sBAAK3I,UAAU,YAAf,UACI,6BAAKvG,EAAIqF,KAAK6J,MAAQ,aAAe,eACrC,gCAEQlP,EAAIqF,KAAKiN,MAAQ,EACf,cAAC,EAAD,CAAOd,MAAOxR,EAAIqF,KAAKiN,QACvB,IAAIG,KAAKzS,EAAI+J,WAAW4a,gCAUlD,qBAAKpe,UAAU,YAAf,SACK,IAAIkM,KAAKzS,EAAI+J,WAAW6a,uB,+BCgM1BC,EA5QG,WAAO,IAAD,EAC2Bze,aAAY,SAAAC,GAAK,OAAIA,KAA5DvH,EADY,EACZA,KAAMkZ,EADM,EACNA,QAAS7R,EADH,EACGA,MAAOpH,EADV,EACUA,OAAQkS,EADlB,EACkBA,KAChCjS,EAAWsK,cAETrJ,EAAO+G,cAAP/G,GAJY,EAKIsL,mBAAS,IALb,mBAKbxL,EALa,KAKP+kB,EALO,OAMIvZ,mBAAS,IANb,mBAMbpL,EANa,KAMP4kB,EANO,OAOMxZ,mBAAS,IAPf,mBAObrM,EAPa,KAON8lB,EAPM,OAQczZ,oBAAS,GARvB,mBAQb0Z,EARa,KAQFC,EARE,KAUdC,EAAa/X,mBACbiQ,EAAUjQ,mBAXI,EAaI7B,mBAAS,IAbb,mBAab1L,EAba,KAaPulB,EAbO,OAcQ7Z,mBAAS,GAdjB,mBAcbjG,EAda,KAcL8e,EAdK,OAeI7Y,mBAAS,GAfb,mBAeb5K,EAfa,KAeP2c,EAfO,QAgBgB/R,mBAAS,GAhBzB,qBAgBb8Z,GAhBa,MAgBDC,GAhBC,MAkBdvJ,GAAUC,cAEhBxO,qBAAU,WACN,IAAMhI,EAAUwS,EAAQnY,KAAK0a,MAAK,SAAArV,GAAI,OAAIA,EAAKhF,MAAQD,KACpDuF,IACC4f,EAAQ5f,EAAQC,UAChB2e,EAAU5e,EAAQF,QAClBgY,EAAQ9X,EAAQ7E,SAEtB,CAACqX,EAAQnY,KAAMI,IAEjBuN,qBAAU,WACN,GAAGvN,GAAM+X,EAAQtM,MAAMlM,OAAS,EAAE,CAC9B0S,YAAW,WACPiT,EAAW3W,QAAQ+W,eAAe,CAACtI,SAAU,SAAUuI,MAAO,UAChE,IAEF,IAAMrjB,EAAU6V,EAAQtM,MAAM6O,MAAK,SAAAxa,GAAI,OAAIA,EAAKG,MAAQD,KACrDkC,GAAS2iB,EAAQ3iB,MAEzB,CAAC6V,EAAQtM,MAAOzL,IAEnB,IAyBMwlB,GAAY,uCAAG,WAAO7iB,GAAP,iBAAA3D,EAAA,yDACjB2D,EAAEmJ,iBACE5L,EAAKkhB,QAA2B,IAAjBniB,EAAMM,OAFR,oDAGjBulB,EAAQ,IACRC,EAAS,IACTE,GAAa,GAETngB,EAAS,KACV7F,EAAMM,OAAS,GARD,kCAQmBC,YAAYP,GAR/B,QAQI6F,EARJ,sBAUX/E,EAAM,CACRwS,OAAQ1T,EAAKiB,KAAKG,IAClB4F,UAAW7F,EACXE,OACAjB,MAAO6F,EACPgF,WAAW,IAAI0I,MAAOC,eAG1BwS,GAAa,GAlBI,UAmBXlmB,EAAS4F,YAAW,CAAC5E,MAAKlB,OAAMC,YAnBrB,QAoBdomB,EAAW3W,SACV2W,EAAW3W,QAAQ+W,eAAe,CAACtI,SAAU,SAAUuI,MAAO,QArBjD,4CAAH,sDAyBlBhY,qBAAU,YACe,uCAAG,sBAAAvO,EAAA,0DACjB+Y,EAAQnY,KAAKkC,OAAM,SAAAmD,GAAI,OAAIA,EAAKhF,MAAQD,KADvB,gCAEVjB,EAASuG,YAAY,CAACzG,OAAMmB,QAFlB,OAGhBiS,YAAW,WACPiT,EAAW3W,QAAQ+W,eAAe,CAACtI,SAAU,SAAUuI,MAAO,UAChE,IALc,2CAAH,qDAQrBE,KACF,CAACzlB,EAAIjB,EAAUF,EAAMkZ,EAAQnY,OAI/B2N,qBAAU,WACW,IAAIgQ,sBAAqB,SAAAC,GACnCA,EAAQ,GAAGC,gBACV4H,IAAc,SAAA3H,GAAC,OAAIA,EAAI,OAE7B,CACEC,UAAW,KAGNC,QAAQR,EAAQ7O,WAC3B,CAAC8W,KAEH9X,qBAAU,WACH6X,GAAa,GACT/f,GAAiB,EAAP3E,IACT3B,EAAS2G,YAAiB,CAAC7G,OAAMmB,KAAIU,KAAMA,EAAO,KAClD2kB,GAAc,MAIxB,CAACD,KAEH,IAQMM,GAAS,SAAC,GAAa,IAAZzW,EAAW,EAAXA,MACLhP,EAAoCH,EAApCG,IAAK2D,EAA+B9D,EAA/B8D,OAAQD,EAAuB7D,EAAvB6D,SAAUiB,EAAa9E,EAAb8E,SAEzB7E,EAAM,CACRwS,OAAQ1T,EAAKiB,KAAKG,IAClB4F,UAAW5F,EACX2D,SAAQD,WAAUiB,WAAUqK,SAEhClQ,EAAS,CAAEG,KAAMC,IAAYyR,KAAMvR,QAASU,KAG1C4lB,GAAW,SAAC,GAAa,IAAZ1W,EAAW,EAAXA,MAAW,EACkBpQ,EAAKiB,KAAzCG,EADkB,EAClBA,IAAK2D,EADa,EACbA,OAAQD,EADK,EACLA,SAAUiB,EADL,EACKA,SAEzB7E,EAAM,CACRwS,OAAQtS,EACR4F,UAAW/F,EAAKG,IAChB2D,SAAQD,WAAUiB,WAAUqK,SAG7B+B,EAAKR,OAAMzQ,EAAIqT,OAASpC,EAAK/Q,KAEhCnB,EAAO0C,KAAK,WAAYzB,IAa5B,OACI,qCACI,qBAAKuG,UAAU,iBAAiBC,MAAO,CAACyD,OAAQ,WAAhD,SAEwB,IAAhBlK,EAAKP,QACL,cAACkN,EAAA,EAAD,CAAU3M,KAAMA,EAAhB,SACI,gCACI,mBAAGwG,UAAU,mBACb2C,QAlBA,WACpByc,GAAO,CAACzW,OAAO,IACf0W,GAAS,CAAC1W,OAAO,OAkBG,mBAAG3I,UAAU,oBACb2C,QAhBA,WACpByc,GAAO,CAACzW,OAAO,IACf0W,GAAS,CAAC1W,OAAO,OAgBG,mBAAG3I,UAAU,2BACb2C,QAzDS,WAC7B,GAAGgB,OAAOC,QAAQ,iFAEd,OADAnL,EAAS+G,YAAmB,CAACjH,OAAMmB,QAC5B8b,GAAQ3W,KAAK,sBA4DpB,qBAAKmB,UAAU,iBACfC,MAAO,CAAC0B,OAAQhJ,EAAMM,OAAS,EAAI,qBAAuB,IAD1D,SAEI,sBAAK+G,UAAU,eAAegI,IAAK4W,EAAnC,UACI,wBAAQ3e,MAAO,CAACqf,UAAW,QAAShb,QAAS,GAAI0D,IAAK8O,EAAtD,yBAKIxd,EAAKyC,KAAI,SAACtC,EAAK0J,GAAN,OACD,gCAEQ1J,EAAIwS,SAAW1T,EAAKiB,KAAKG,KACzB,qBAAKqG,UAAU,yBAAf,SACI,cAAC,EAAD,CAAYxG,KAAMA,EAAMC,IAAKA,EAAKmG,MAAOA,MAK7CnG,EAAIwS,SAAW1T,EAAKiB,KAAKG,KACzB,qBAAKqG,UAAU,uBAAf,SACI,cAAC,EAAD,CAAYxG,KAAMjB,EAAKiB,KAAMC,IAAKA,EAAKmG,MAAOA,EAAOtG,KAAMA,QAX7D6J,MAoBnBub,GACA,qBAAK1e,UAAU,uBAAf,SACI,qBAAKN,IAAKwG,IAAUnG,IAAI,mBAOvC,qBAAKC,UAAU,aAAaC,MAAO,CAACgG,QAAStN,EAAMM,OAAS,EAAI,OAAS,QAAzE,SAEQN,EAAMoD,KAAI,SAAC4C,EAAMwE,GAAP,OACN,sBAAiBzJ,GAAG,aAApB,UAEQiF,EAAK/F,KAAK0K,MAAM,UACdmE,YAAUC,IAAIC,gBAAgBhJ,GAAOiB,GACrC4H,YAAUE,IAAIC,gBAAgBhJ,GAAOiB,GAE3C,sBAAM+C,QAAS,kBAjLb,SAACQ,GACvB,IAAM3E,EAAM,YAAO7F,GACnB6F,EAAOoJ,OAAOzE,EAAO,GACrBsb,EAASjgB,GA8KgC+gB,CAAkBpc,IAAvC,oBANMA,QAYtB,uBAAMnD,UAAU,aAAa0F,SAAUwZ,GAAvC,UACI,uBAAOtmB,KAAK,OAAOyO,YAAY,uBAC/BzB,MAAOhM,EAAMiM,SAAU,SAAAxJ,GAAC,OAAImiB,EAAQniB,EAAEyJ,OAAOF,QAC7C3F,MAAO,CACHvF,OAAQkF,EAAQ,YAAc,YAC9B2B,WAAY3B,EAAQ,UAAY,GAChC4B,MAAO5B,EAAQ,QAAU,MAG7B,cAAC0H,EAAA,EAAD,CAAOd,WAAYgY,EAASnmB,QAASuB,EAAMgG,MAAOA,IAElD,sBAAKI,UAAU,cAAf,UACI,mBAAGA,UAAU,6BACb,uBAAOpH,KAAK,OAAO+M,KAAK,OAAOjM,GAAG,OAClC2P,UAAQ,EAACC,OAAO,kBAAkBzD,SAxNxB,SAACxJ,GACvB,IAAMkN,EAAK,YAAOlN,EAAEyJ,OAAOyD,OACvBxI,EAAM,GACNye,EAAW,GAEfjW,EAAM7K,SAAQ,SAAA+K,GACV,OAAIA,EAEDA,EAAK9J,KAAO,SACJoB,EAAM,0EAGVye,EAAS3gB,KAAK4K,GANJ1I,EAAM,qCASxBA,GAAKtI,EAAS,CAAEG,KAAMC,IAAYC,MAAOC,QAAS,CAACsB,MAAO0G,KAC7D0d,EAAS,GAAD,mBAAK9lB,GAAU6mB,UA2Mf,wBAAQ5mB,KAAK,SAASoH,UAAU,iBAChC4V,WAAWhc,GAAQjB,EAAMM,OAAS,GADlC,4BC7PDwmB,UAdM,WACjB,OACI,sBAAKzf,UAAU,iBAAf,UACI,qBAAKA,UAAU,uCAAf,SACI,cAAC2W,EAAA,EAAD,MAGJ,qBAAK3W,UAAU,gBAAf,SACI,cAAC,EAAD,Y","file":"static/js/main.f626ba15.chunk.js","sourcesContent":["import { GLOBALTYPES } from './globalTypes'\r\nimport { imageUpload } from '../../utils/imageUpload'\r\nimport { postDataAPI, getDataAPI, patchDataAPI, deleteDataAPI } from '../../utils/fetchData'\r\nimport { createNotify, removeNotify } from './notifyAction'\r\n\r\nexport const POST_TYPES = {\r\n    CREATE_POST: 'CREATE_POST',\r\n    LOADING_POST: 'LOADING_POST',\r\n    GET_POSTS: 'GET_POSTS',\r\n    UPDATE_POST: 'UPDATE_POST',\r\n    GET_POST: 'GET_POST',\r\n    DELETE_POST: 'DELETE_POST'\r\n}\r\n\r\n\r\nexport const createPost = ({content, images, auth, socket}) => async (dispatch) => {\r\n    let media = []\r\n    try {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {loading: true} })\r\n        if(images.length > 0) media = await imageUpload(images)\r\n\r\n        const res = await postDataAPI('posts', { content, images: media }, auth.token)\r\n\r\n        dispatch({ \r\n            type: POST_TYPES.CREATE_POST, \r\n            payload: {...res.data.newPost, user: auth.user} \r\n        })\r\n\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {loading: false} })\r\n\r\n        // Notify\r\n        const msg = {\r\n            id: res.data.newPost._id,\r\n            text: 'đã thêm hình ảnh',\r\n            recipients: res.data.newPost.user.followers,\r\n            url: `/post/${res.data.newPost._id}`,\r\n            content, \r\n            image: media[0].url\r\n        }\r\n\r\n        dispatch(createNotify({msg, auth, socket}))\r\n\r\n    } catch (err) {\r\n        // dispatch({\r\n        //     type: GLOBALTYPES.ALERT,\r\n        //     payload: {error: err.response.data.msg}\r\n        // })\r\n    }\r\n}\r\n\r\nexport const getPosts = (token) => async (dispatch) => {\r\n    try {\r\n        dispatch({ type: POST_TYPES.LOADING_POST, payload: true })\r\n        const res = await getDataAPI('posts', token)\r\n        \r\n        dispatch({\r\n            type: POST_TYPES.GET_POSTS,\r\n            payload: {...res.data, page: 2}\r\n        })\r\n\r\n        dispatch({ type: POST_TYPES.LOADING_POST, payload: false })\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const updatePost = ({content, images, auth, status}) => async (dispatch) => {\r\n    let media = []\r\n    const imgNewUrl = images.filter(img => !img.url)\r\n    const imgOldUrl = images.filter(img => img.url)\r\n\r\n    if(status.content === content \r\n        && imgNewUrl.length === 0\r\n        && imgOldUrl.length === status.images.length\r\n    ) return;\r\n\r\n    try {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {loading: true} })\r\n        if(imgNewUrl.length > 0) media = await imageUpload(imgNewUrl)\r\n\r\n        const res = await patchDataAPI(`post/${status._id}`, { \r\n            content, images: [...imgOldUrl, ...media] \r\n        }, auth.token)\r\n\r\n        dispatch({ type: POST_TYPES.UPDATE_POST, payload: res.data.newPost })\r\n\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {success: res.data.msg} })\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const likePost = ({post, auth, socket}) => async (dispatch) => {\r\n    const newPost = {...post, likes: [...post.likes, auth.user]}\r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost})\r\n\r\n    socket.emit('likePost', newPost)\r\n\r\n    try {\r\n        await patchDataAPI(`post/${post._id}/like`, null, auth.token)\r\n        \r\n        // Notify\r\n        const msg = {\r\n            id: auth.user._id,\r\n            text: 'like bài viết của bạn.',\r\n            recipients: [post.user._id],\r\n            url: `/post/${post._id}`,\r\n            content: post.content, \r\n            image: post.images[0].url\r\n        }\r\n\r\n        dispatch(createNotify({msg, auth, socket}))\r\n\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const unLikePost = ({post, auth, socket}) => async (dispatch) => {\r\n    const newPost = {...post, likes: post.likes.filter(like => like._id !== auth.user._id)}\r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost})\r\n\r\n    socket.emit('unLikePost', newPost)\r\n\r\n    try {\r\n        await patchDataAPI(`post/${post._id}/unlike`, null, auth.token)\r\n\r\n        // Notify\r\n        const msg = {\r\n            id: auth.user._id,\r\n            text: 'like bài viết của bạn.',\r\n            recipients: [post.user._id],\r\n            url: `/post/${post._id}`,\r\n        }\r\n        dispatch(removeNotify({msg, auth, socket}))\r\n\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const getPost = ({detailPost, id, auth}) => async (dispatch) => {\r\n    if(detailPost.every(post => post._id !== id)){\r\n        try {\r\n            const res = await getDataAPI(`post/${id}`, auth.token)\r\n            dispatch({ type: POST_TYPES.GET_POST, payload: res.data.post })\r\n        } catch (err) {\r\n            dispatch({\r\n                type: GLOBALTYPES.ALERT,\r\n                payload: {error: err.response.data.msg}\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport const deletePost = ({post, auth, socket}) => async (dispatch) => {\r\n    dispatch({ type: POST_TYPES.DELETE_POST, payload: post })\r\n\r\n    try {\r\n        const res = await deleteDataAPI(`post/${post._id}`, auth.token)\r\n\r\n        // Notify\r\n        const msg = {\r\n            id: post._id,\r\n            text: 'đã thêm bài viết mới.',\r\n            recipients: res.data.newPost.user.followers,\r\n            url: `/post/${post._id}`,\r\n        }\r\n        dispatch(removeNotify({msg, auth, socket}))\r\n        \r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const savePost = ({post, auth}) => async (dispatch) => {\r\n    const newUser = {...auth.user}\r\n    dispatch({ type: GLOBALTYPES.AUTH, payload: {...auth, user: newUser}})\r\n\r\n    try {\r\n        await patchDataAPI(`savePost/${post._id}`, null, auth.token)\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const unSavePost = ({post, auth}) => async (dispatch) => {\r\n    const newUser = {...auth.user}\r\n    dispatch({ type: GLOBALTYPES.AUTH, payload: {...auth, user: newUser}})\r\n\r\n    try {\r\n        await patchDataAPI(`unSavePost/${post._id}`, null, auth.token)\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT,\r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}","var map = {\n\t\"./home\": 58,\n\t\"./home.js\": 58,\n\t\"./login\": 56,\n\t\"./login.js\": 56,\n\t\"./message\": 51,\n\t\"./message/\": 51,\n\t\"./message/[id]\": 96,\n\t\"./message/[id].js\": 96,\n\t\"./message/index\": 51,\n\t\"./message/index.js\": 51,\n\t\"./post/[id]\": 80,\n\t\"./post/[id].js\": 80,\n\t\"./profile/[id]\": 95,\n\t\"./profile/[id].js\": 95,\n\t\"./register\": 57,\n\t\"./register.js\": 57\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 112;","import { GLOBALTYPES } from './globalTypes'\r\nimport { postDataAPI, deleteDataAPI, getDataAPI, patchDataAPI } from '../../utils/fetchData'\r\n\r\nexport const NOTIFY_TYPES = {\r\n    GET_NOTIFIES: 'GET_NOTIFIES',\r\n    CREATE_NOTIFY: 'CREATE_NOTIFY',\r\n    REMOVE_NOTIFY: 'REMOVE_NOTIFY',\r\n    UPDATE_NOTIFY: 'UPDATE_NOTIFY',\r\n    UPDATE_SOUND: 'UPDATE_SOUND',\r\n    DELETE_ALL_NOTIFIES: 'DELETE_ALL_NOTIFIES'\r\n}\r\n\r\nexport const createNotify = ({msg, auth, socket}) => async (dispatch) => {\r\n    try {\r\n        const res = await postDataAPI('notify', msg, auth.token)\r\n\r\n        socket.emit('createNotify', {\r\n            ...res.data.notify,\r\n            user: {\r\n                username: auth.user.username,\r\n                avatar: auth.user.avatar\r\n            }\r\n        })\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const removeNotify = ({msg, auth, socket}) => async (dispatch) => {\r\n    try {\r\n        await deleteDataAPI(`notify/${msg.id}?url=${msg.url}`, auth.token)\r\n        \r\n        socket.emit('removeNotify', msg)\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const getNotifies = (token) => async (dispatch) => {\r\n    try {\r\n        const res = await getDataAPI('notifies', token)\r\n        \r\n        dispatch({ type: NOTIFY_TYPES.GET_NOTIFIES, payload: res.data.notifies })\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\n\r\nexport const isReadNotify = ({msg, auth}) => async (dispatch) => {\r\n    dispatch({type: NOTIFY_TYPES.UPDATE_NOTIFY, payload: {...msg, isRead: true}})\r\n    try {\r\n        await patchDataAPI(`/isReadNotify/${msg._id}`, null, auth.token)\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const deleteAllNotifies = (token) => async (dispatch) => {\r\n    dispatch({type: NOTIFY_TYPES.DELETE_ALL_NOTIFIES, payload: []})\r\n    try {\r\n        await deleteDataAPI('deleteAllNotify', token)\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}","import { GLOBALTYPES, DeleteData } from '../actions/globalTypes'\r\nimport { postDataAPI, getDataAPI, deleteDataAPI } from '../../utils/fetchData'\r\n\r\nexport const MESS_TYPES = {\r\n    ADD_USER: 'ADD_USER',\r\n    ADD_MESSAGE: 'ADD_MESSAGE',\r\n    GET_CONVERSATIONS: 'GET_CONVERSATIONS',\r\n    GET_MESSAGES: 'GET_MESSAGES',\r\n    UPDATE_MESSAGES: 'UPDATE_MESSAGES',\r\n    DELETE_MESSAGES: 'DELETE_MESSAGES',\r\n    DELETE_CONVERSATION: 'DELETE_CONVERSATION',\r\n    CHECK_ONLINE_OFFLINE: 'CHECK_ONLINE_OFFLINE'\r\n}\r\n\r\n\r\n\r\nexport const addMessage = ({msg, auth, socket}) => async (dispatch) =>{\r\n    dispatch({type: MESS_TYPES.ADD_MESSAGE, payload: msg})\r\n\r\n    const { _id, avatar, fullname, username } = auth.user\r\n    socket.emit('addMessage', {...msg, user: { _id, avatar, fullname, username } })\r\n    \r\n    try {\r\n        await postDataAPI('message', msg, auth.token)\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const getConversations = ({auth, page = 1}) => async (dispatch) => {\r\n    try {\r\n        const res = await getDataAPI(`conversations?limit=${page * 9}`, auth.token)\r\n        \r\n        let newArr = [];\r\n        res.data.conversations.forEach(item => {\r\n            item.recipients.forEach(cv => {\r\n                if(cv._id !== auth.user._id){\r\n                    newArr.push({...cv, text: item.text, media: item.media, call: item.call})\r\n                }\r\n            })\r\n        })\r\n\r\n        dispatch({\r\n            type: MESS_TYPES.GET_CONVERSATIONS, \r\n            payload: {newArr, result: res.data.result}\r\n        })\r\n\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const getMessages = ({auth, id, page = 1}) => async (dispatch) => {\r\n    try {\r\n        const res = await getDataAPI(`message/${id}?limit=${page * 9}`, auth.token)\r\n        const newData = {...res.data, messages: res.data.messages.reverse()}\r\n\r\n        dispatch({type: MESS_TYPES.GET_MESSAGES, payload: {...newData, _id: id, page}})\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const loadMoreMessages = ({auth, id, page = 1}) => async (dispatch) => {\r\n    try {\r\n        const res = await getDataAPI(`message/${id}?limit=${page * 9}`, auth.token)\r\n        const newData = {...res.data, messages: res.data.messages.reverse()}\r\n\r\n        dispatch({type: MESS_TYPES.UPDATE_MESSAGES, payload: {...newData, _id: id, page}})\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const deleteMessages = ({msg, data, auth}) => async (dispatch) => {\r\n    const newData = DeleteData(data, msg._id)\r\n    dispatch({type: MESS_TYPES.DELETE_MESSAGES, payload: {newData, _id: msg.recipient}})\r\n    try {\r\n        await deleteDataAPI(`message/${msg._id}`, auth.token)\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}\r\n\r\nexport const deleteConversation = ({auth, id}) => async (dispatch) => {\r\n    dispatch({type: MESS_TYPES.DELETE_CONVERSATION, payload: id})\r\n    try {\r\n        await deleteDataAPI(`conversation/${id}`, auth.token)\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Avatar = ({src, size}) => {\r\n    const { theme } = useSelector(state => state)\r\n\r\n    return (\r\n        <img src={src} alt=\"avatar\" className={size}\r\n        style={{filter: `${theme ? 'invert(1)' : 'invert(0)'}`}} />\r\n    )\r\n}\r\n\r\nexport default Avatar\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 164;","import React from 'react'\r\n\r\nconst NotFound = () => {\r\n    return (\r\n        <div className=\"position-relative\" style={{minHeight: 'calc(100vh - 70px)'}}>\r\n            <h2 className=\"position-absolute text-secondary\"\r\n            style={{top: '50%', left: '50%', transform: 'translate(-50%, -50%)'}}>\r\n              Xin lỗi bạn vì sự bất tiện này !!\r\n            </h2>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotFound\r\n","import React from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport NotFound from '../components/NotFound'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst generatePage = (pageName) => {\r\n    const component = () => require(`../pages/${pageName}`).default\r\n\r\n    try {\r\n        return React.createElement(component())\r\n    } catch (err) {\r\n        return <NotFound />\r\n    }\r\n}\r\n\r\nconst PageRender = () => {\r\n    const {page, id} = useParams()\r\n    const { auth } = useSelector(state => state)\r\n\r\n    let pageName = \"\";\r\n\r\n    if(auth.token){\r\n        if(id){\r\n            pageName = `${page}/[id]`\r\n        }else{\r\n            pageName = `${page}`\r\n        }\r\n    }\r\n\r\n    return generatePage(pageName)\r\n}\r\n\r\nexport default PageRender\r\n","import { Route, Redirect} from 'react-router-dom'\r\n\r\nconst PrivateRouter = (props) => {\r\n    const firstLogin = localStorage.getItem('firstLogin')\r\n    return firstLogin ? <Route {...props} /> : <Redirect to=\"/\" />\r\n}\r\n\r\nexport default PrivateRouter\r\n","import React from 'react'\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div className=\"position-fixed w-100 h-100 text-center loading\"\r\n        style={{background: \"#0008\", color: \"white\", top: 0, left: 0, zIndex: 50}}>\r\n\r\n            <svg width=\"205\" height=\"250\" viewBox=\"0 0 40 50\">\r\n                <polygon stroke=\"#fff\" strokeWidth=\"1\" fill=\"none\"\r\n                points=\"20,1 40,40 1,40\" />\r\n                <text fill=\"#fff\" x=\"5\" y=\"47\">Đang tải</text>\r\n            </svg>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import React from 'react'\r\n\r\nconst Toast = ({msg, handleShow, bgColor}) => {\r\n    return (\r\n        <div className={`toast show position-fixed text-light ${bgColor}`}\r\n        style={{top: '5px', right: '5px', minWidth: '200px', zIndex: 50}}>\r\n            <div className={`toast-header text-light ${bgColor}`}>\r\n                <strong className=\"mr-auto text-light\">{msg.title}</strong>\r\n                <button className=\"ml-2 mb-1 close text-light\"\r\n                data-dismiss=\"toast\" style={{outline: 'none'}}\r\n                onClick={handleShow}>\r\n                    &times;\r\n                </button>\r\n            </div>\r\n            <div className=\"toast-body\">\r\n                {msg.body}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Toast\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\n\r\nimport Loading from './Loading'\r\nimport Toast from './Toast'\r\n\r\nconst Notify = () => {\r\n    const { alert } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <div>\r\n            {alert.loading && <Loading />}\r\n\r\n            {\r\n                alert.error && \r\n                <Toast msg={{title: 'Lỗi', body: alert.error}}\r\n                handleShow={() => dispatch({type: GLOBALTYPES.ALERT, payload: {}})} \r\n                bgColor=\"bg-danger\" />\r\n            }\r\n\r\n            {\r\n                alert.success && \r\n                <Toast msg={{title: 'Thành công', body: alert.success}} \r\n                handleShow={() => dispatch({type: GLOBALTYPES.ALERT, payload: {}})}\r\n                bgColor=\"bg-success\" />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notify\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport NoNotice from '../images/notice.png'\r\nimport { Link } from 'react-router-dom'\r\nimport Avatar from './Avatar'\r\nimport moment from 'moment'\r\nimport { isReadNotify, NOTIFY_TYPES, deleteAllNotifies } from '../redux/actions/notifyAction'\r\n\r\nconst NotifyModal = () => {\r\n    const { auth, notify } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const handleIsRead = (msg) => {\r\n        dispatch(isReadNotify({msg, auth}))\r\n    }\r\n\r\n    const handleSound = () => {\r\n        dispatch({type: NOTIFY_TYPES.UPDATE_SOUND, payload: !notify.sound})\r\n    }\r\n\r\n    const handleDeleteAll = () => {\r\n        const newArr = notify.data.filter(item => item.isRead === false)\r\n        if(newArr.length === 0) return dispatch(deleteAllNotifies(auth.token))\r\n\r\n        if(window.confirm(`Bạn có ${newArr.length} chưa đọc. Bạn chắc là muốn xóa hết?`)){\r\n            return dispatch(deleteAllNotifies(auth.token))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={{minWidth: '300px'}}>\r\n            <div className=\"d-flex justify-content-between align-items-center px-3\">\r\n                <h3>Thông báo</h3>\r\n            </div>\r\n            <hr className=\"mt-0\" />\r\n\r\n            {\r\n                notify.data.length === 0 &&\r\n                <img src={NoNotice} alt=\"NoNotice\" className=\"w-100\" />\r\n            }\r\n\r\n            <div style={{maxHeight: 'calc(100vh - 200px)', overflow: 'auto'}}>\r\n                {\r\n                    notify.data.map((msg, index) => (\r\n                        <div key={index} className=\"px-2 mb-3\" >\r\n                            <Link to={`${msg.url}`} className=\"d-flex text-dark align-items-center\"\r\n                            onClick={() => handleIsRead(msg)}>\r\n                                <Avatar src={msg.user.avatar} size=\"big-avatar\" />\r\n\r\n                                <div className=\"mx-1 flex-fill\">\r\n                                    <div>\r\n                                        <strong className=\"mr-1\">{msg.user.username}</strong>\r\n                                        <span>{msg.text}</span>\r\n                                    </div>\r\n                                    {msg.content && <small>{msg.content.slice(0,20)}...</small>}\r\n                                </div>\r\n\r\n                                {\r\n                                    msg.image &&\r\n                                    <div style={{width: '30px'}}>\r\n                                        {\r\n                                            msg.image.match(/video/i)\r\n                                            ? <video src={msg.image} width=\"100%\" />\r\n                                            : <Avatar src={msg.image} size=\"medium-avatar\" />\r\n                                        }\r\n                                    </div>\r\n                                }\r\n                                \r\n                            </Link>\r\n                            <small className=\"text-muted d-flex justify-content-between px-2\">\r\n                                {moment(msg.createdAt).fromNow()}\r\n                                {\r\n                                    !msg.isRead && <i className=\"fas fa-circle text-primary\" />\r\n                                }\r\n                            </small>\r\n                        </div>\r\n                    ))\r\n                }\r\n\r\n            </div>\r\n\r\n            <hr className=\"my-1\" />\r\n            <div className=\"text-right text-danger mr-2\" style={{cursor: 'pointer'}}\r\n            onClick={handleDeleteAll}>\r\n              Xóa hết\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotifyModal\r\n","export default \"data:image/png;base64,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\"","import React from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { logout } from '../../redux/actions/authAction'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\nimport Avatar from '../Avatar'\r\nimport NotifyModal from '../NotifyModal'\r\n\r\nconst Menu = () => {\r\n    const navLinks = [\r\n        { label: 'Home', icon: 'home', path: '/'},\r\n        { label: 'Message', icon: 'near_me', path: '/message'},\r\n    ]\r\n\r\n    const { auth, theme, notify } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n    const { pathname } = useLocation()\r\n\r\n    const isActive = (pn) => {\r\n        if(pn === pathname) return 'active'\r\n    }\r\n\r\n    return (\r\n        <div className=\"menu\">\r\n            <ul className=\"navbar-nav flex-row\">\r\n                {\r\n                    navLinks.map((link, index) => (\r\n                        <li className={`nav-item px-2 ${isActive(link.path)}`} key={index}>\r\n                            <Link className=\"nav-link\" to={link.path}>\r\n                                <span className=\"material-icons\">{link.icon}</span>\r\n                            </Link>\r\n                        </li>\r\n                    ))\r\n                }\r\n\r\n                <li className=\"nav-item dropdown\" style={{opacity: 1}} >\r\n                    <span className=\"nav-link position-relative\" id=\"navbarDropdown\" \r\n                    role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\r\n                        <span className=\"material-icons\" \r\n                        style={{color: notify.data.length > 0 ? 'crimson' : ''}}>\r\n                            notifications\r\n                        </span>\r\n\r\n                        <span className=\"notify_length\">{notify.data.length}</span>\r\n\r\n                    </span>\r\n\r\n                    <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\"\r\n                    style={{transform: 'translateX(75px)'}}>\r\n                        <NotifyModal />\r\n                    </div>\r\n                        \r\n                </li>\r\n           \r\n            \r\n                <li className=\"nav-item dropdown\" style={{opacity: 1}} >\r\n                    <span className=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" \r\n                    role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        <Avatar src={auth.user.avatar} size=\"medium-avatar\" />\r\n                    </span>\r\n\r\n                    <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                    <Link className=\"dropdown-item\" to={`/profile/${auth.user._id}`}>Trang cá nhân</Link>\r\n\r\n                    <label htmlFor=\"theme\" className=\"dropdown-item\"\r\n                    onClick={() => dispatch({\r\n                        type: GLOBALTYPES.THEME, payload: !theme\r\n                    })}>\r\n\r\n                        {theme ? 'Chế độ sáng' : 'Chế độ tối'}\r\n                    </label>\r\n\r\n                    <div className=\"dropdown-divider\"></div>\r\n                    <Link className=\"dropdown-item\" to=\"/\"\r\n                    onClick={() => dispatch(logout())}>\r\n                        Đăng Xuất\r\n                    </Link>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Menu\r\n","import React, { useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { getDataAPI } from '../../utils/fetchData'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\nimport UserCard from '../UserCard'\r\nimport LoadIcon from '../../images/loading.gif'\r\n\r\nconst Search = () => {\r\n    const [search, setSearch] = useState('')\r\n    const [users, setUsers] = useState([])\r\n\r\n    const { auth } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n    const [load, setLoad] = useState(false)\r\n\r\n\r\n    const handleSearch = async (e) => {\r\n        e.preventDefault()\r\n        if(!search) return;\r\n\r\n        try {\r\n            setLoad(true)\r\n            const res = await getDataAPI(`search?username=${search}`, auth.token)\r\n            setUsers(res.data.users)\r\n            setLoad(false)\r\n        } catch (err) {\r\n            dispatch({\r\n                type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setSearch('')\r\n        setUsers([])\r\n    }\r\n\r\n    return (\r\n        <form className=\"search_form\" onSubmit={handleSearch}>\r\n            <input type=\"text\" name=\"search\" value={search} id=\"search\" title=\"Enter to Search\"\r\n            onChange={e => setSearch(e.target.value.toLowerCase().replace(/ /g, ''))} />\r\n\r\n            <div className=\"search_icon\" style={{opacity: search ? 0 : 0.3}}>\r\n                <span className=\"material-icons\">search</span>\r\n                <span>Nhập tên </span>\r\n            </div>\r\n\r\n            <div className=\"close_search\" onClick={handleClose}\r\n            style={{opacity: users.length === 0 ? 0 : 1}} >\r\n                &times;\r\n            </div>\r\n\r\n            <button type=\"submit\" style={{display: 'none'}}>Search</button>\r\n\r\n            { load && <img className=\"loading\" src={LoadIcon} alt=\"loading\"  /> }\r\n\r\n            <div className=\"users\">\r\n                {\r\n                    search && users.map(user => (\r\n                        <UserCard \r\n                        key={user._id} \r\n                        user={user} \r\n                        border=\"border\"\r\n                        handleClose={handleClose} \r\n                        />\r\n                    ))\r\n                }\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Menu from './Menu'\r\nimport Search from './Search'\r\n\r\nconst Header = () => {\r\n\r\n    return (\r\n        <div className=\"header bg-light\">\r\n            <nav className=\"navbar navbar-expand-lg navbar-light \r\n            bg-light justify-content-between align-middle\">\r\n\r\n                <Link to=\"/\" className=\"logo\">\r\n                    <h1 className=\"navbar-brand text-uppercase p-0 m-0\"\r\n                    onClick={() => window.scrollTo({top: 0})}>\r\n                            1p30s\r\n                    </h1>\r\n                </Link>\r\n\r\n                <Search />\r\n\r\n                <Menu />\r\n            </nav>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header\r\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { GLOBALTYPES } from '../redux/actions/globalTypes'\r\nimport { createPost, updatePost } from '../redux/actions/postAction'\r\nimport Icons from './Icons'\r\nimport { imageShow, videoShow } from '../utils/mediaShow'\r\n\r\nconst StatusModal = () => {\r\n    const { auth, theme, status, socket } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const [content, setContent] = useState('')\r\n    const [images, setImages] = useState([])\r\n\r\n    const [stream, setStream] = useState(false)\r\n    const videoRef = useRef()\r\n    const refCanvas = useRef()\r\n    const [tracks, setTracks] = useState('')\r\n\r\n    const handleChangeImages = e => {\r\n        const files = [...e.target.files]\r\n        let err = \"\"\r\n        let newImages = []\r\n\r\n        files.forEach(file => {\r\n            if(!file) return err = \"File không hợp lệ.\"\r\n\r\n            if(file.size > 1024 * 1024 * 25){\r\n                return err = \"ẢNh và video không được quá 25mb.\"\r\n            }\r\n\r\n            return newImages.push(file)\r\n        })\r\n\r\n        if(err) dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err} })\r\n        setImages([...images, ...newImages])\r\n    }\r\n\r\n    const deleteImages = (index) => {\r\n        const newArr = [...images]\r\n        newArr.splice(index, 1)\r\n        setImages(newArr)\r\n    }\r\n\r\n    const handleStream = () => {\r\n        setStream(true)\r\n        if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia){\r\n            navigator.mediaDevices.getUserMedia({video: true})\r\n            .then(mediaStream => {\r\n                videoRef.current.srcObject = mediaStream\r\n                videoRef.current.play()\r\n\r\n                const track = mediaStream.getTracks()\r\n                setTracks(track[0])\r\n            }).catch(err => console.log(err))\r\n        }\r\n    }\r\n\r\n    const handleCapture = () => {\r\n        const width = videoRef.current.clientWidth;\r\n        const height = videoRef.current.clientHeight;\r\n\r\n        refCanvas.current.setAttribute(\"width\", width)\r\n        refCanvas.current.setAttribute(\"height\", height)\r\n\r\n        const ctx = refCanvas.current.getContext('2d')\r\n        ctx.drawImage(videoRef.current, 0, 0, width, height)\r\n        let URL = refCanvas.current.toDataURL()\r\n        setImages([...images, {camera: URL}])\r\n    }\r\n\r\n    const handleStopStream = () => {\r\n        tracks.stop()\r\n        setStream(false)\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        if(images.length === 0)\r\n        return dispatch({ \r\n            type: GLOBALTYPES.ALERT, payload: {error: \"Hãy chọn ảnh.\"}\r\n        })\r\n\r\n        if(status.onEdit){\r\n            dispatch(updatePost({content, images, auth, status}))\r\n        }else{\r\n            dispatch(createPost({content, images, auth, socket}))\r\n        }\r\n        \r\n\r\n        setContent('')\r\n        setImages([])\r\n        if(tracks) tracks.stop()\r\n        dispatch({ type: GLOBALTYPES.STATUS, payload: false})\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(status.onEdit){\r\n            setContent(status.content)\r\n            setImages(status.images)\r\n        }\r\n    },[status])\r\n\r\n\r\n   \r\n\r\n    return (\r\n        <div className=\"status_modal\">\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"status_header\">\r\n                    <h5 className=\"m-0\">Tạo</h5>\r\n                    <span onClick={() => dispatch({\r\n                        type: GLOBALTYPES.STATUS, payload: false\r\n                    })}>\r\n                        &times;\r\n                    </span>\r\n                </div>\r\n\r\n                <div className=\"status_body\">\r\n                    <textarea name=\"content\" value={content}\r\n                    placeholder={`${auth.user.username}, Bạn đang nghĩ gì?`}\r\n                    onChange={e => setContent(e.target.value)}\r\n                    style={{\r\n                        filter: theme ? 'invert(1)' : 'invert(0)',\r\n                        color: theme ? 'white' : '#111',\r\n                        background: theme ? 'rgba(0,0,0,.03)' : '',\r\n                    }} />\r\n\r\n                    <div className=\"d-flex\">\r\n                        <div className=\"flex-fill\"></div>\r\n                        <Icons setContent={setContent} content={content} theme={theme} />\r\n                    </div>\r\n\r\n                    <div className=\"show_images\">\r\n                        {\r\n                            images.map((img, index) => (\r\n                                <div key={index} id=\"file_img\">\r\n                                    {\r\n                                        img.camera ? imageShow(img.camera, theme)\r\n                                        : img.url\r\n                                            ?<>\r\n                                                {\r\n                                                    img.url.match(/video/i)\r\n                                                    ? videoShow(img.url, theme) \r\n                                                    : imageShow(img.url, theme)\r\n                                                }\r\n                                            </>\r\n                                            :<>\r\n                                                {\r\n                                                    img.type.match(/video/i)\r\n                                                    ? videoShow(URL.createObjectURL(img), theme) \r\n                                                    : imageShow(URL.createObjectURL(img), theme)\r\n                                                }\r\n                                            </>\r\n                                    }\r\n                                    <span onClick={() => deleteImages(index)}>&times;</span>\r\n                                </div>\r\n                            ))\r\n                        }\r\n                    </div>\r\n\r\n                    {\r\n                        stream && \r\n                        <div className=\"stream position-relative\">\r\n                            <video autoPlay muted ref={videoRef} width=\"100%\" height=\"100%\"\r\n                            style={{filter: theme ? 'invert(1)' : 'invert(0)'}} />\r\n                            \r\n                            <span onClick={handleStopStream}>&times;</span>\r\n                            <canvas ref={refCanvas} style={{display: 'none'}} />\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"input_images\">\r\n                        {\r\n                            stream \r\n                            ? <i className=\"fas fa-camera\" onClick={handleCapture} />\r\n                            : <>\r\n                                <i className=\"fas fa-camera\" onClick={handleStream} />\r\n\r\n                                <div className=\"file_upload\">\r\n                                    <i className=\"fas fa-image\" />\r\n                                    <input type=\"file\" name=\"file\" id=\"file\"\r\n                                    multiple accept=\"image/*,video/*\" onChange={handleChangeImages} />\r\n                                </div>\r\n                            </>\r\n                        }\r\n                        \r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"status_footer\">\r\n                    <button className=\"btn btn-secondary w-100\" type=\"submit\">\r\n                        Đăng bài\r\n                    </button>\r\n                </div>\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StatusModal\r\n","export default __webpack_public_path__ + \"static/media/got-it-done-613.89a311f0.mp3\";","import React, { useEffect, useRef } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { POST_TYPES } from './redux/actions/postAction'\r\nimport { GLOBALTYPES } from './redux/actions/globalTypes'\r\nimport { NOTIFY_TYPES } from './redux/actions/notifyAction'\r\nimport { MESS_TYPES } from './redux/actions/messageAction'\r\n\r\nimport audiobell from './audio/got-it-done-613.mp3'\r\n\r\n\r\nconst spawnNotification = (body, icon, url, title) => {\r\n    let options = {\r\n        body, icon\r\n    }\r\n    let n = new Notification(title, options)\r\n\r\n    n.onclick = e => {\r\n        e.preventDefault()\r\n        window.open(url, '_blank')\r\n    }\r\n}\r\n\r\nconst SocketClient = () => {\r\n    const { auth, socket, notify, online, call } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const audioRef = useRef()\r\n\r\n    // joinUser\r\n    useEffect(() => {\r\n        socket.emit('joinUser', auth.user)\r\n    },[socket, auth.user])\r\n\r\n    // Likes\r\n    useEffect(() => {\r\n        socket.on('likeToClient', newPost =>{\r\n            dispatch({type: POST_TYPES.UPDATE_POST, payload: newPost})\r\n        })\r\n\r\n        return () => socket.off('likeToClient')\r\n    },[socket, dispatch])\r\n\r\n    useEffect(() => {\r\n        socket.on('unLikeToClient', newPost =>{\r\n            dispatch({type: POST_TYPES.UPDATE_POST, payload: newPost})\r\n        })\r\n\r\n        return () => socket.off('unLikeToClient')\r\n    },[socket, dispatch])\r\n\r\n\r\n    // Comments\r\n    useEffect(() => {\r\n        socket.on('createCommentToClient', newPost =>{\r\n            dispatch({type: POST_TYPES.UPDATE_POST, payload: newPost})\r\n        })\r\n\r\n        return () => socket.off('createCommentToClient')\r\n    },[socket, dispatch])\r\n\r\n    useEffect(() => {\r\n        socket.on('deleteCommentToClient', newPost =>{\r\n            dispatch({type: POST_TYPES.UPDATE_POST, payload: newPost})\r\n        })\r\n\r\n        return () => socket.off('deleteCommentToClient')\r\n    },[socket, dispatch])\r\n\r\n\r\n    // Follow\r\n    useEffect(() => {\r\n        socket.on('followToClient', newUser =>{\r\n            dispatch({type: GLOBALTYPES.AUTH, payload: {...auth, user: newUser}})\r\n        })\r\n\r\n        return () => socket.off('followToClient')\r\n    },[socket, dispatch, auth])\r\n\r\n    useEffect(() => {\r\n        socket.on('unFollowToClient', newUser =>{\r\n            dispatch({type: GLOBALTYPES.AUTH, payload: {...auth, user: newUser}})\r\n        })\r\n\r\n        return () => socket.off('unFollowToClient')\r\n    },[socket, dispatch, auth])\r\n\r\n\r\n    // Notification\r\n    useEffect(() => {\r\n        socket.on('createNotifyToClient', msg =>{\r\n            dispatch({type: NOTIFY_TYPES.CREATE_NOTIFY, payload: msg})\r\n\r\n            if(notify.sound) audioRef.current.play()\r\n            spawnNotification(\r\n                msg.user.username + ' ' + msg.text,\r\n                msg.user.avatar,\r\n                msg.url,\r\n                'SocialMedia'\r\n            )\r\n        })\r\n\r\n        return () => socket.off('createNotifyToClient')\r\n    },[socket, dispatch, notify.sound])\r\n\r\n    useEffect(() => {\r\n        socket.on('removeNotifyToClient', msg =>{\r\n            dispatch({type: NOTIFY_TYPES.REMOVE_NOTIFY, payload: msg})\r\n        })\r\n\r\n        return () => socket.off('removeNotifyToClient')\r\n    },[socket, dispatch])\r\n\r\n\r\n    // Message\r\n    useEffect(() => {\r\n        socket.on('addMessageToClient', msg =>{\r\n            dispatch({type: MESS_TYPES.ADD_MESSAGE, payload: msg})\r\n\r\n            dispatch({\r\n                type: MESS_TYPES.ADD_USER, \r\n                payload: {\r\n                    ...msg.user, \r\n                    text: msg.text, \r\n                    media: msg.media\r\n                }\r\n            })\r\n        })\r\n\r\n        return () => socket.off('addMessageToClient')\r\n    },[socket, dispatch])\r\n\r\n    // Check User Online / Offline\r\n    useEffect(() => {\r\n        socket.emit('checkUserOnline', auth.user)\r\n    },[socket, auth.user])\r\n\r\n    useEffect(() => {\r\n        socket.on('checkUserOnlineToMe', data =>{\r\n            data.forEach(item => {\r\n                if(!online.includes(item.id)){\r\n                    dispatch({type: GLOBALTYPES.ONLINE, payload: item.id})\r\n                }\r\n            })\r\n        })\r\n\r\n        return () => socket.off('checkUserOnlineToMe')\r\n    },[socket, dispatch, online])\r\n\r\n    useEffect(() => {\r\n        socket.on('checkUserOnlineToClient', id =>{\r\n            if(!online.includes(id)){\r\n                dispatch({type: GLOBALTYPES.ONLINE, payload: id})\r\n            }\r\n        })\r\n\r\n        return () => socket.off('checkUserOnlineToClient')\r\n    },[socket, dispatch, online])\r\n\r\n    // Check User Offline\r\n    useEffect(() => {\r\n        socket.on('CheckUserOffline', id =>{\r\n            dispatch({type: GLOBALTYPES.OFFLINE, payload: id})\r\n        })\r\n\r\n        return () => socket.off('CheckUserOffline')\r\n    },[socket, dispatch])\r\n\r\n\r\n    // Call User\r\n    useEffect(() => {\r\n        socket.on('callUserToClient', data =>{\r\n            dispatch({type: GLOBALTYPES.CALL, payload: data})\r\n        })\r\n\r\n        return () => socket.off('callUserToClient')\r\n    },[socket, dispatch])\r\n\r\n    useEffect(() => {\r\n        socket.on('userBusy', data =>{\r\n            dispatch({type: GLOBALTYPES.ALERT, payload: {error: `${call.username} is busy!`}})\r\n        })\r\n\r\n        return () => socket.off('userBusy')\r\n    },[socket, dispatch, call])\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <audio controls ref={audioRef} style={{display: 'none'}} >\r\n                <source src={audiobell} type=\"audio/mp3\" />\r\n            </audio>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SocketClient\r\n","export default __webpack_public_path__ + \"static/media/chuong.0066a32c.mp3\";","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport Avatar from '../Avatar'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\nimport { addMessage } from '../../redux/actions/messageAction'\r\nimport RingRing from '../../audio/chuong.mp3'\r\n\r\nconst CallModal = () => {\r\n    const { call, auth, peer, socket, theme } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const [hours, setHours] = useState(0)\r\n    const [mins, setMins] = useState(0)\r\n    const [second, setSecond] = useState(0)\r\n    const [total, setTotal] = useState(0)\r\n\r\n    const [answer, setAnswer] = useState(false)\r\n    const youVideo = useRef()\r\n    const otherVideo = useRef()\r\n    const [tracks, setTracks] = useState(null)\r\n    const [newCall, setNewCall] = useState(null)\r\n\r\n    // Set Time\r\n    useEffect(() => {\r\n        const setTime = () => {\r\n            setTotal(t => t + 1)\r\n            setTimeout(setTime, 1000)\r\n        }\r\n        setTime()\r\n\r\n        return () => setTotal(0)\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        setSecond(total%60)\r\n        setMins(parseInt(total/60))\r\n        setHours(parseInt(total/3600))\r\n    },[total])\r\n\r\n\r\n    // End Call\r\n    const addCallMessage = useCallback((call, times, disconnect) => {\r\n        if(call.recipient !== auth.user._id || disconnect){\r\n            const msg = {\r\n                sender: call.sender,\r\n                recipient: call.recipient,\r\n                text: '', \r\n                media: [],\r\n                call: {video: call.video, times},\r\n                createdAt: new Date().toISOString()\r\n            }\r\n            dispatch(addMessage({msg, auth, socket}))\r\n        }\r\n    },[auth, dispatch, socket])\r\n\r\n    const handleEndCall = () => {\r\n        tracks && tracks.forEach(track => track.stop())\r\n        if(newCall) newCall.close()\r\n        let times = answer ? total : 0\r\n        socket.emit('endCall', {...call, times})\r\n        \r\n        addCallMessage(call, times)\r\n        dispatch({type: GLOBALTYPES.CALL, payload: null })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(answer){\r\n            setTotal(0)\r\n        }else{\r\n            const timer = setTimeout(() => {\r\n                socket.emit('endCall', {...call, times: 0})\r\n                addCallMessage(call, 0)\r\n                dispatch({type: GLOBALTYPES.CALL, payload: null })\r\n            }, 15000)\r\n    \r\n            return () => clearTimeout(timer)\r\n        }\r\n        \r\n    },[dispatch, answer, call, socket, addCallMessage])\r\n\r\n    useEffect(() => {\r\n        socket.on('endCallToClient', data => {\r\n            tracks && tracks.forEach(track => track.stop())\r\n            if(newCall) newCall.close()\r\n            addCallMessage(data, data.times)\r\n            dispatch({ type: GLOBALTYPES.CALL, payload: null })\r\n        })\r\n\r\n        return () => socket.off('endCallToClient')\r\n    },[socket, dispatch, tracks, addCallMessage, newCall])\r\n\r\n\r\n    // Stream Media\r\n    const openStream = (video) => {\r\n        const config = { audio: true, video }\r\n        return navigator.mediaDevices.getUserMedia(config)\r\n    }\r\n\r\n    const playStream = (tag, stream) => {\r\n        let video = tag;\r\n        video.srcObject = stream;\r\n        video.play()\r\n    }\r\n\r\n    // Answer Call\r\n    const handleAnswer = () => {\r\n        openStream(call.video).then(stream => {\r\n            playStream(youVideo.current, stream)\r\n            const track = stream.getTracks()\r\n            setTracks(track)\r\n            \r\n            const newCall = peer.call(call.peerId, stream);\r\n            newCall.on('stream', function(remoteStream) {\r\n                playStream(otherVideo.current, remoteStream)\r\n            });\r\n            setAnswer(true)\r\n            setNewCall(newCall)\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        peer.on('call', newCall => {\r\n            openStream(call.video).then(stream => {\r\n                if(youVideo.current){\r\n                    playStream(youVideo.current, stream)\r\n                }\r\n                const track = stream.getTracks()\r\n                setTracks(track)\r\n                \r\n                newCall.answer(stream)\r\n                newCall.on('stream', function(remoteStream) {\r\n                    if(otherVideo.current){\r\n                        playStream(otherVideo.current, remoteStream)\r\n                    }\r\n                });\r\n                setAnswer(true) \r\n                setNewCall(newCall)\r\n            })\r\n        })\r\n        return () => peer.removeListener('call')\r\n    },[peer, call.video])\r\n\r\n    // Disconnect\r\n    useEffect(() => {\r\n        socket.on('callerDisconnect', () => {\r\n            tracks && tracks.forEach(track => track.stop())\r\n            if(newCall) newCall.close()\r\n            let times = answer ? total : 0\r\n            addCallMessage(call, times, true)\r\n\r\n            dispatch({type: GLOBALTYPES.CALL, payload: null })\r\n\r\n            dispatch({\r\n                type: GLOBALTYPES.ALERT, \r\n                payload: {error: `The ${call.username} disconnect`} \r\n            })\r\n        })\r\n\r\n        return () => socket.off('callerDisconnect')\r\n    },[socket, tracks, dispatch, call, addCallMessage, answer, total, newCall])\r\n\r\n    // Play - Pause Audio\r\n    const playAudio = (newAudio) => {\r\n        newAudio.play()\r\n    }\r\n\r\n    const pauseAudio = (newAudio) => {\r\n        newAudio.pause()\r\n        newAudio.currentTime = 0\r\n    }\r\n\r\n    useEffect(() => {\r\n        let newAudio = new Audio(RingRing)\r\n        if(answer){\r\n            pauseAudio(newAudio)\r\n        }else{\r\n            playAudio(newAudio)\r\n        }\r\n\r\n        return () => pauseAudio(newAudio)\r\n    },[answer])\r\n\r\n\r\n    return (\r\n        <div className=\"call_modal\">\r\n            <div className=\"call_box\" style={{\r\n                display: (answer && call.video) ? 'none' : 'flex'\r\n            }} >\r\n\r\n                <div className=\"text-center\" style={{padding: '40px 0'}} >\r\n                    <Avatar src={call.avatar} size=\"supper-avatar\" />\r\n                    <h4>{call.username}</h4>\r\n                    <h6>{call.fullname}</h6>\r\n\r\n                    {\r\n                        answer \r\n                        ? <div>\r\n                            <span>{ hours.toString().length < 2 ? '0' + hours : hours }</span>\r\n                            <span>:</span>\r\n                            <span>{ mins.toString().length < 2 ? '0' + mins : mins }</span>\r\n                            <span>:</span>\r\n                            <span>{ second.toString().length < 2 ? '0' + second : second }</span>\r\n                        </div>\r\n                        : <div>\r\n                            {\r\n                                call.video\r\n                                ? <span>Đang Gọi Video...</span>\r\n                                : <span>Đang Gọi Thoại...</span>\r\n                            }\r\n                        </div>\r\n                    }\r\n                    \r\n                </div>\r\n                \r\n                {\r\n                    !answer && \r\n                    <div className=\"timer\">\r\n                        <small>{ mins.toString().length < 2 ? '0' + mins : mins }</small>\r\n                        <small>:</small>\r\n                        <small>{ second.toString().length < 2 ? '0' + second : second }</small>\r\n                    </div>\r\n                }\r\n                \r\n\r\n                <div className=\"call_menu\">\r\n                    <button className=\"material-icons text-danger\"\r\n                    onClick={handleEndCall}>\r\n                        call_end\r\n                    </button>\r\n                    \r\n                    {\r\n                        (call.recipient === auth.user._id && !answer) &&\r\n                        <>\r\n                            {\r\n                                call.video\r\n                                ? <button className=\"material-icons text-success\"\r\n                                onClick={handleAnswer}>\r\n                                    videocam\r\n                                </button>\r\n                                : <button className=\"material-icons text-success\"\r\n                                onClick={handleAnswer}>\r\n                                    call\r\n                                </button>\r\n                            }\r\n                        </>\r\n                    }\r\n                    \r\n                </div>\r\n                \r\n            </div>\r\n\r\n            <div className=\"show_video\" style={{\r\n                opacity: (answer && call.video) ? '1' : '0',\r\n                filter: theme ? 'invert(1)' : 'invert(0)'\r\n            }} >\r\n\r\n                <video ref={youVideo} className=\"you_video\" playsInline muted />\r\n                <video ref={otherVideo} className=\"other_video\" playsInline />\r\n\r\n                <div className=\"time_video\">\r\n                    <span>{ hours.toString().length < 2 ? '0' + hours : hours }</span>\r\n                    <span>:</span>\r\n                    <span>{ mins.toString().length < 2 ? '0' + mins : mins }</span>\r\n                    <span>:</span>\r\n                    <span>{ second.toString().length < 2 ? '0' + second : second }</span>\r\n                </div>\r\n\r\n                <button className=\"material-icons text-danger end_call\"\r\n                onClick={handleEndCall}>\r\n                    call_end\r\n                </button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CallModal\r\n","import { useEffect } from 'react'\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\r\n\r\nimport PageRender from './customRouter/PageRender'\r\nimport PrivateRouter from './customRouter/PrivateRouter'\r\n\r\nimport Home from './pages/home'\r\nimport Login from './pages/login'\r\nimport Register from './pages/register'\r\n\r\nimport Alert from './components/alert/Alert'\r\nimport Header from './components/header/Header'\r\nimport StatusModal from './components/StatusModal'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { refreshToken } from './redux/actions/authAction'\r\nimport { getPosts } from './redux/actions/postAction'\r\nimport { getSuggestions } from './redux/actions/suggestionsAction'\r\n\r\nimport io from 'socket.io-client'\r\nimport { GLOBALTYPES } from './redux/actions/globalTypes'\r\nimport SocketClient from './SocketClient'\r\n\r\nimport { getNotifies } from './redux/actions/notifyAction'\r\nimport CallModal from './components/message/CallModal'\r\nimport Peer from 'peerjs'\r\n\r\nfunction App() {\r\n  const { auth, status, modal, call } = useSelector(state => state)\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(refreshToken())\r\n\r\n    const socket = io()\r\n    dispatch({type: GLOBALTYPES.SOCKET, payload: socket})\r\n    return () => socket.close()\r\n  },[dispatch])\r\n\r\n  useEffect(() => {\r\n    if(auth.token) {\r\n      dispatch(getPosts(auth.token))\r\n      dispatch(getSuggestions(auth.token))\r\n      dispatch(getNotifies(auth.token))\r\n    }\r\n  }, [dispatch, auth.token])\r\n\r\n  \r\n  useEffect(() => {\r\n    if (!(\"Notification\" in window)) {\r\n      alert(\"Trình duyệt này không hỗ trợ thông báo trên màn hình\");\r\n    }\r\n    else if (Notification.permission === \"granted\") {}\r\n    else if (Notification.permission !== \"denied\") {\r\n      Notification.requestPermission().then(function (permission) {\r\n        if (permission === \"granted\") {}\r\n      });\r\n    }\r\n  },[])\r\n\r\n \r\n  useEffect(() => {\r\n    const newPeer = new Peer(undefined, {\r\n      path: '/', secure: true\r\n    })\r\n    \r\n    dispatch({ type: GLOBALTYPES.PEER, payload: newPeer })\r\n  },[dispatch])\r\n\r\n\r\n  return (\r\n    <Router>\r\n      <Alert />\r\n\r\n      <input type=\"checkbox\" id=\"theme\" />\r\n      <div className={`App ${(status || modal) && 'mode'}`}>\r\n        <div className=\"main\">\r\n          {auth.token && <Header />}\r\n          {status && <StatusModal />}\r\n          {auth.token && <SocketClient />}\r\n          {call && <CallModal />}\r\n          \r\n          <Route exact path=\"/\" component={auth.token ? Home : Login} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n\r\n          <PrivateRouter exact path=\"/:page\" component={PageRender} />\r\n          <PrivateRouter exact path=\"/:page/:id\" component={PageRender} />\r\n          \r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\nconst initialState = {}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.AUTH:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default authReducer","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\nconst initialState = {}\r\n\r\nconst alertReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.ALERT:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default alertReducer\r\n","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\nconst initialState = false\r\n\r\nconst themeReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.THEME:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default themeReducer","import { PROFILE_TYPES } from '../actions/profileAction'\r\nimport { EditData } from '../actions/globalTypes'\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    ids: [],\r\n    users: [],\r\n    posts: []\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case PROFILE_TYPES.LOADING:\r\n            return {\r\n                ...state,\r\n                loading: action.payload\r\n            };\r\n        case PROFILE_TYPES.GET_USER:\r\n            return {\r\n                ...state,\r\n                users: [...state.users, action.payload.user]\r\n            };\r\n        case PROFILE_TYPES.FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: EditData(state.users, action.payload._id, action.payload)\r\n            };\r\n        case PROFILE_TYPES.UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: EditData(state.users, action.payload._id, action.payload)\r\n            };\r\n        case PROFILE_TYPES.GET_ID:\r\n            return {\r\n                ...state,\r\n                ids: [...state.ids, action.payload]\r\n            };\r\n        case PROFILE_TYPES.GET_POSTS:\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, action.payload]\r\n            };\r\n        case PROFILE_TYPES.UPDATE_POST:\r\n            return {\r\n                ...state,\r\n                posts: EditData(state.posts, action.payload._id, action.payload)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default profileReducer","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\n\r\nconst statusReducer = (state = false, action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.STATUS:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default statusReducer","import { POST_TYPES } from '../actions/postAction'\r\nimport { EditData, DeleteData } from '../actions/globalTypes'\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    posts: [],\r\n    result: 0,\r\n    page: 2\r\n}\r\n\r\nconst postReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case POST_TYPES.CREATE_POST:\r\n            return {\r\n                ...state,\r\n                posts: [action.payload, ...state.posts]\r\n            };\r\n        case POST_TYPES.LOADING_POST:\r\n            return {\r\n                ...state,\r\n                loading: action.payload\r\n            };\r\n        case POST_TYPES.GET_POSTS:\r\n            return {\r\n                ...state,\r\n                posts: action.payload.posts,\r\n                result: action.payload.result,\r\n                page: action.payload.page\r\n            };\r\n        case POST_TYPES.UPDATE_POST:\r\n            return {\r\n                ...state,\r\n                posts: EditData(state.posts, action.payload._id, action.payload)\r\n            };\r\n        case POST_TYPES.DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: DeleteData(state.posts, action.payload._id)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default postReducer","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\nconst initialState = false\r\n\r\nconst modalReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.MODAL:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default modalReducer","import { POST_TYPES } from '../actions/postAction'\r\nimport { EditData } from '../actions/globalTypes'\r\n\r\nconst detailPostReducer = (state = [], action) => {\r\n    switch (action.type){\r\n        case POST_TYPES.GET_POST:\r\n            return [...state, action.payload]\r\n        case POST_TYPES.UPDATE_POST:\r\n            return EditData(state, action.payload._id, action.payload)\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default detailPostReducer","import { SUGGES_TYPES } from '../actions/suggestionsAction'\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    users: []\r\n}\r\n\r\n\r\nconst suggestionsReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case SUGGES_TYPES.LOADING:\r\n            return {\r\n                ...state,\r\n                loading: action.payload\r\n            };\r\n        case SUGGES_TYPES.GET_USERS:\r\n            return {\r\n                ...state,\r\n                users: action.payload.users\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default suggestionsReducer\r\n","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\n\r\nconst socketReducer = (state = [], action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.SOCKET:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default socketReducer","import { NOTIFY_TYPES } from '../actions/notifyAction'\r\nimport { EditData } from '../actions/globalTypes'\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    data: [],\r\n    sound: false\r\n}\r\n\r\nconst notifyReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case NOTIFY_TYPES.GET_NOTIFIES:\r\n            return {\r\n                ...state,\r\n                data: action.payload\r\n            };\r\n        case NOTIFY_TYPES.CREATE_NOTIFY:\r\n            return {\r\n                ...state,\r\n                data: [action.payload, ...state.data]\r\n            };\r\n        case NOTIFY_TYPES.REMOVE_NOTIFY:\r\n            return {\r\n                ...state,\r\n                data: state.data.filter(item => (\r\n                    item.id !== action.payload.id || item.url !== action.payload.url\r\n                ))\r\n            };\r\n        case NOTIFY_TYPES.UPDATE_NOTIFY:\r\n            return {\r\n                ...state,\r\n                data: EditData(state.data, action.payload._id, action.payload)\r\n            };\r\n        case NOTIFY_TYPES.UPDATE_SOUND:\r\n            return {\r\n                ...state,\r\n                sound: action.payload\r\n            };\r\n        case NOTIFY_TYPES.DELETE_ALL_NOTIFIES:\r\n            return {\r\n                ...state,\r\n                data: action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default notifyReducer","import { MESS_TYPES } from '../actions/messageAction'\r\nimport { EditData, DeleteData } from '../actions/globalTypes'\r\n\r\nconst initialState = {\r\n    users: [],\r\n    resultUsers: 0,\r\n    data: [],\r\n    firstLoad: false\r\n}\r\n\r\nconst messageReducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n        case MESS_TYPES.ADD_USER:\r\n            if(state.users.every(item => item._id !== action.payload._id)){\r\n                return {\r\n                    ...state,\r\n                    users: [action.payload, ...state.users]\r\n                };\r\n            }\r\n            return state;\r\n        case MESS_TYPES.ADD_MESSAGE:\r\n            return {\r\n                ...state,\r\n                data: state.data.map(item => \r\n                    item._id === action.payload.recipient || item._id === action.payload.sender \r\n                    ? {\r\n                        ...item,\r\n                        messages: [...item.messages, action.payload],\r\n                        result: item.result + 1\r\n                    }\r\n                    : item\r\n                ),\r\n                users: state.users.map(user => \r\n                    user._id === action.payload.recipient || user._id === action.payload.sender\r\n                    ? {\r\n                        ...user, \r\n                        text: action.payload.text, \r\n                        media: action.payload.media,\r\n                        call: action.payload.call\r\n                    }\r\n                    : user\r\n                )\r\n            };\r\n        case MESS_TYPES.GET_CONVERSATIONS:\r\n            return {\r\n                ...state,\r\n                users: action.payload.newArr,\r\n                resultUsers: action.payload.result,\r\n                firstLoad: true\r\n            };\r\n        case MESS_TYPES.GET_MESSAGES:\r\n            return {\r\n                ...state,\r\n                data: [...state.data, action.payload]\r\n            };\r\n        case MESS_TYPES.UPDATE_MESSAGES:\r\n            return {\r\n                ...state,\r\n                data: EditData(state.data, action.payload._id, action.payload)\r\n            };\r\n        case MESS_TYPES.DELETE_MESSAGES:\r\n            return {\r\n                ...state,\r\n                data: state.data.map(item => \r\n                    item._id === action.payload._id\r\n                    ? {...item, messages: action.payload.newData}\r\n                    : item\r\n                )\r\n            };\r\n        case MESS_TYPES.DELETE_CONVERSATION:\r\n            return {\r\n                ...state,\r\n                users: DeleteData(state.users, action.payload),\r\n                data: DeleteData(state.data, action.payload)\r\n            };\r\n        case MESS_TYPES.CHECK_ONLINE_OFFLINE:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(user => \r\n                    action.payload.includes(user._id)\r\n                    ? {...user, online: true}\r\n                    : {...user, online: false}\r\n                )\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default messageReducer;","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\n\r\nconst onlineReducer = (state = [], action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.ONLINE:\r\n            return [...state, action.payload];\r\n        case GLOBALTYPES.OFFLINE:\r\n            return state.filter(item => item !== action.payload)\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default onlineReducer","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\n\r\nconst callReducer = (state = null, action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.CALL:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default callReducer","import { GLOBALTYPES } from '../actions/globalTypes'\r\n\r\n\r\nconst peerReducer = (state = null, action) => {\r\n    switch (action.type){\r\n        case GLOBALTYPES.PEER:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport default peerReducer","import { combineReducers } from 'redux'\r\nimport auth from './authReducer'\r\nimport alert from './alertReducer'\r\nimport theme from './themeReducer'\r\nimport profile from './profileReducer'\r\nimport status from './statusReducer'\r\nimport homePosts from './postReducer'\r\nimport modal from './modalReducer'\r\nimport detailPost from './detailPostReducer'\r\nimport suggestions from './suggestionsReducer'\r\nimport socket from './socketReducer'\r\nimport notify from './notifyReducer'\r\nimport message from './messageReducer'\r\nimport online from './onlineReducer'\r\nimport call from './callReducer'\r\nimport peer from './peerReducer'\r\n\r\n\r\nexport default combineReducers({\r\n    auth,\r\n    alert,\r\n    theme,\r\n    profile,\r\n    status,\r\n    homePosts,\r\n    modal,\r\n    detailPost,\r\n    suggestions,\r\n    socket,\r\n    notify,\r\n    message,\r\n    online,\r\n    call,\r\n    peer\r\n})","import { createStore, applyMiddleware } from 'redux'\r\nimport { Provider } from 'react-redux'\r\nimport thunk from 'redux-thunk'\r\n\r\nimport rootReducer from './reducers/index'\r\n\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(applyMiddleware(thunk))\r\n)\r\n\r\nconst DataProvider = ({children}) => {\r\n    return(\r\n        <Provider store={store}>\r\n            {children}\r\n        </Provider>\r\n    )\r\n}\r\n\r\nexport default DataProvider","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/global.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport DataProvider from './redux/store'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <DataProvider>\r\n      <App />\r\n    </DataProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nreportWebVitals();\r\n","import { GLOBALTYPES, DeleteData } from './globalTypes'\r\nimport { getDataAPI, patchDataAPI } from '../../utils/fetchData'\r\nimport { imageUpload } from '../../utils/imageUpload'\r\nimport { createNotify, removeNotify } from '../actions/notifyAction'\r\n\r\n\r\nexport const PROFILE_TYPES = {\r\n    LOADING: 'LOADING_PROFILE',\r\n    GET_USER: 'GET_PROFILE_USER',\r\n    FOLLOW: 'FOLLOW',\r\n    UNFOLLOW: 'UNFOLLOW',\r\n    GET_ID: 'GET_PROFILE_ID',\r\n    GET_POSTS: 'GET_PROFILE_POSTS',\r\n    UPDATE_POST: 'UPDATE_PROFILE_POST'\r\n}\r\n\r\n\r\nexport const getProfileUsers = ({id, auth}) => async (dispatch) => {\r\n    dispatch({type: PROFILE_TYPES.GET_ID, payload: id})\r\n\r\n    try {\r\n        dispatch({type: PROFILE_TYPES.LOADING, payload: true})\r\n        const res = getDataAPI(`/user/${id}`, auth.token)\r\n        const res1 = getDataAPI(`/user_posts/${id}`, auth.token)\r\n        \r\n        const users = await res;\r\n        const posts = await res1;\r\n\r\n        dispatch({\r\n            type: PROFILE_TYPES.GET_USER,\r\n            payload: users.data\r\n        })\r\n\r\n        dispatch({\r\n            type: PROFILE_TYPES.GET_POSTS,\r\n            payload: {...posts.data, _id: id, page: 2}\r\n        })\r\n\r\n        dispatch({type: PROFILE_TYPES.LOADING, payload: false})\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n    \r\n}\r\n\r\n\r\nexport const updateProfileUser = ({userData, avatar, auth}) => async (dispatch) => {\r\n    if(!userData.fullname)\r\n    return dispatch({type: GLOBALTYPES.ALERT, payload: {error: \"Hãy nhập đầy đủ tên bạn.\"}})\r\n\r\n    if(userData.fullname.length > 25)\r\n    return dispatch({type: GLOBALTYPES.ALERT, payload: {error: \"Tên bạn quá dài.\"}})\r\n\r\n    if(userData.story.length > 200)\r\n    return dispatch({type: GLOBALTYPES.ALERT, payload: {error: \"Bài viết quá dài.\"}})\r\n\r\n    try {\r\n        let media;\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {loading: true}})\r\n\r\n        if(avatar) media = await imageUpload([avatar])\r\n\r\n        const res = await patchDataAPI(\"user\", {\r\n            ...userData,\r\n            avatar: avatar ? media[0].url : auth.user.avatar\r\n        }, auth.token)\r\n\r\n        dispatch({\r\n            type: GLOBALTYPES.AUTH,\r\n            payload: {\r\n                ...auth,\r\n                user: {\r\n                    ...auth.user, ...userData,\r\n                    avatar: avatar ? media[0].url : auth.user.avatar,\r\n                }\r\n            }\r\n        })\r\n\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {success: res.data.msg}})\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const follow = ({users, user, auth, socket}) => async (dispatch) => {\r\n    let newUser;\r\n    \r\n    if(users.every(item => item._id !== user._id)){\r\n        newUser = {...user, followers: [...user.followers, auth.user]}\r\n    }else{\r\n        users.forEach(item => {\r\n            if(item._id === user._id){\r\n                newUser = {...item, followers: [...item.followers, auth.user]}\r\n            }\r\n        })\r\n    }\r\n\r\n    dispatch({ type: PROFILE_TYPES.FOLLOW, payload: newUser })\r\n\r\n    dispatch({\r\n        type: GLOBALTYPES.AUTH, \r\n        payload: {\r\n            ...auth,\r\n            user: {...auth.user, following: [...auth.user.following, newUser]}\r\n        }\r\n    })\r\n\r\n\r\n    try {\r\n        const res = await patchDataAPI(`user/${user._id}/follow`, null, auth.token)\r\n        socket.emit('follow', res.data.newUser)\r\n\r\n        // Notify\r\n        const msg = {\r\n            id: auth.user._id,\r\n            text: 'bắt đầu theo dõi bạn.',\r\n            recipients: [newUser._id],\r\n            url: `/profile/${auth.user._id}`,\r\n        }\r\n\r\n        dispatch(createNotify({msg, auth, socket}))\r\n\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}\r\n\r\nexport const unfollow = ({users, user, auth, socket}) => async (dispatch) => {\r\n\r\n    let newUser;\r\n\r\n    if(users.every(item => item._id !== user._id)){\r\n        newUser = {...user, followers: DeleteData(user.followers, auth.user._id)}\r\n    }else{\r\n        users.forEach(item => {\r\n            if(item._id === user._id){\r\n                newUser = {...item, followers: DeleteData(item.followers, auth.user._id)}\r\n            }\r\n        })\r\n    }\r\n\r\n    dispatch({ type: PROFILE_TYPES.UNFOLLOW, payload: newUser })\r\n\r\n    dispatch({\r\n        type: GLOBALTYPES.AUTH, \r\n        payload: {\r\n            ...auth,\r\n            user: { \r\n                ...auth.user, \r\n                following: DeleteData(auth.user.following, newUser._id) \r\n            }\r\n        }\r\n    })\r\n   \r\n\r\n    try {\r\n        const res = await patchDataAPI(`user/${user._id}/unfollow`, null, auth.token)\r\n        socket.emit('unFollow', res.data.newUser)\r\n\r\n        // Notify\r\n        const msg = {\r\n            id: auth.user._id,\r\n            text: 'bắt đầu theo dõi bạn',\r\n            recipients: [newUser._id],\r\n            url: `/profile/${auth.user._id}`,\r\n        }\r\n\r\n        dispatch(removeNotify({msg, auth, socket}))\r\n\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {error: err.response.data.msg}\r\n        })\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/loading.10625dac.gif\";","import React from 'react'\r\nimport Avatar from './Avatar'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst UserCard = ({children, user, border, handleClose, setShowFollowers, setShowFollowing, msg}) => {\r\n\r\n    const { theme } = useSelector(state => state)\r\n\r\n    const handleCloseAll = () => {\r\n        if(handleClose) handleClose()\r\n        if(setShowFollowers) setShowFollowers(false)\r\n        if(setShowFollowing) setShowFollowing(false)\r\n    }\r\n\r\n    const showMsg = (user) => {\r\n        return(\r\n            <>\r\n                <div style={{filter: theme ? 'invert(1)' : 'invert(0)'}}>\r\n                    {user.text}\r\n                </div>\r\n                {\r\n                    user.media.length > 0 && \r\n                    <div>\r\n                        {user.media.length} <i className=\"fas fa-image\" />\r\n                    </div>\r\n                }\r\n\r\n                {\r\n                    user.call &&\r\n                    <span className=\"material-icons\">\r\n                        {\r\n                            user.call.times === 0\r\n                            ? user.call.video ? 'videocam_off' : 'phone_disabled'\r\n                            : user.call.video ? 'video_camera_front' : 'call'\r\n                        }\r\n                    </span>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={`d-flex p-2 align-items-center justify-content-between w-100 ${border}`}>\r\n            <div>\r\n                <Link to={`/profile/${user._id}`} onClick={handleCloseAll}\r\n                className=\"d-flex align-items-center\">\r\n                    \r\n                    <Avatar src={user.avatar} size=\"big-avatar\" />\r\n\r\n                    <div className=\"ml-1\" style={{transform: 'translateY(-2px)'}}>\r\n                        <span className=\"d-block\">{user.username}</span>\r\n                        \r\n                        <small style={{opacity: 0.7}}>\r\n                            {\r\n                                msg \r\n                                ? showMsg(user)\r\n                                : user.fullname\r\n                            }\r\n                        </small>\r\n                    </div>\r\n                </Link>\r\n            </div>\r\n            \r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserCard\r\n","export const imageShow = (src, theme) => {\r\n    return(\r\n        <img src={src} alt=\"images\" className=\"img-thumbnail\"\r\n        style={{filter: theme ? 'invert(1)' : 'invert(0)'}} />\r\n    )\r\n}\r\n\r\nexport const videoShow = (src, theme) => {\r\n    return(\r\n        <video controls src={src} alt=\"images\" className=\"img-thumbnail\"\r\n        style={{filter: theme ? 'invert(1)' : 'invert(0)'}} />\r\n    )\r\n}","export const GLOBALTYPES = {\r\n    AUTH: \"AUTH\",\r\n    ALERT: \"ALERT\",\r\n    THEME: 'THEME',\r\n    STATUS: 'STATUS',\r\n    MODAL: 'MODAL',\r\n    SOCKET: 'SOCKET',\r\n    ONLINE: 'ONLINE',\r\n    OFFLINE: 'OFFLINE',\r\n    CALL: 'CALL',\r\n    PEER: 'PEER'\r\n}\r\n\r\nexport const EditData = (data, id, post) => {\r\n    const newData = data.map(item => \r\n        (item._id === id ? post : item)\r\n    )\r\n    return newData;\r\n}\r\n\r\nexport const DeleteData = (data, id) => {\r\n    const newData = data.filter(item => item._id !== id)\r\n    return newData;\r\n}","export const checkImage = (file) => {\r\n  let err = \"\";\r\n  if (!file) return (err = \"File không hợp lệ.\");\r\n\r\n  if (file.size > 1024 * 1024)\r\n    // 1mb\r\n    err = \"Hình ảnh quá lớn\";\r\n\r\n  if (file.type !== \"image/jpeg\" && file.type !== \"image/png\")\r\n    err = \"Định dạng nhìn ảnh không chính xác.\";\r\n\r\n  return err;\r\n};\r\n\r\nexport const imageUpload = async (images) => {\r\n  let imgArr = [];\r\n  for (const item of images) {\r\n    const formData = new FormData();\r\n\r\n    if (item.camera) {\r\n      formData.append(\"file\", item.camera);\r\n    } else {\r\n      formData.append(\"file\", item);\r\n    }\r\n    const API_URL = \"http://localhost:3000\";\r\n\r\n    const res = await fetch(API_URL + \"/api/cloudinary-upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n\r\n    const data = await res.json();\r\n    imgArr.push({ public_id: data.public_id, url: data.secure_url });\r\n  }\r\n  return imgArr;\r\n};\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { follow, unfollow } from '../redux/actions/profileAction'\r\n\r\nconst FollowBtn = ({user}) => {\r\n    const [followed, setFollowed] = useState(false)\r\n\r\n    const { auth, profile, socket } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const [load, setLoad] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if(auth.user.following.find(item => item._id === user._id)){\r\n            setFollowed(true)\r\n        }\r\n        return () => setFollowed(false)\r\n    }, [auth.user.following, user._id])\r\n\r\n    const handleFollow =  async () => {\r\n        if(load) return;\r\n\r\n        setFollowed(true)\r\n        setLoad(true)\r\n        await dispatch(follow({users: profile.users, user, auth, socket}))\r\n        setLoad(false)\r\n    }\r\n\r\n    const handleUnFollow = async () => {\r\n        if(load) return;\r\n\r\n        setFollowed(false)\r\n        setLoad(true)\r\n        await dispatch(unfollow({users: profile.users, user, auth, socket}))\r\n        setLoad(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {\r\n            followed\r\n            ? <button className=\"btn btn-outline-danger\"\r\n            onClick={handleUnFollow}>\r\n                Hủy theo dõi\r\n            </button>\r\n            : <button className=\"btn btn-outline-info\"\r\n            onClick={handleFollow}>\r\n                Theo dõi\r\n            </button>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default FollowBtn\r\n","const valid = ({fullname, username, email, password, cf_password}) => {\r\n    const err = {}\r\n\r\n    if(!fullname) {\r\n        err.fullname = \"Hãy nhập đầy đủ tên của bạn.\"\r\n    }else if(fullname.length > 25){\r\n        err.fullname = \"Tên tối đa 25 ký tự.\"\r\n    }\r\n\r\n    if(!username) {\r\n        err.username = \"Hãy nhập tên người dùng.\"\r\n    }else if(username.replace(/ /g, '').length > 25){\r\n        err.username = \"Tên tối đa 25 ký tự.\"\r\n    }\r\n\r\n    if(!email) {\r\n        err.email = \"Hãy nhập email của bạn.\"\r\n    }else if(!validateEmail(email)){\r\n        err.email = \"Định dạng email không chính xác.\"\r\n    }\r\n\r\n    if(!password) {\r\n        err.password = \"Hãy nhập mật khẩu.\"\r\n    }else if(password.length < 6){\r\n        err.password = \"Mật khẩu phải trên 6 ký tự.\"\r\n    }\r\n\r\n    if(password !== cf_password) {\r\n        err.cf_password = \"Xác nhận lại mật khẩu không chính xác\"\r\n    }\r\n\r\n    return {\r\n        errMsg: err,\r\n        errLength: Object.keys(err).length\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction validateEmail(email) {\r\n    // eslint-disable-next-line\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n}\r\n  \r\nexport default valid","import { GLOBALTYPES } from './globalTypes'\r\nimport { postDataAPI } from '../../utils/fetchData'\r\nimport valid from '../../utils/valid'\r\n\r\n\r\nexport const login = (data) => async (dispatch) => {\r\n    try {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {loading: true} })\r\n        const res = await postDataAPI('login', data)\r\n        dispatch({ \r\n            type: GLOBALTYPES.AUTH, \r\n            payload: {\r\n                token: res.data.access_token,\r\n                user: res.data.user\r\n            } \r\n        })\r\n\r\n        localStorage.setItem(\"firstLogin\", true)\r\n        dispatch({ \r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {\r\n                success: res.data.msg\r\n            } \r\n        })\r\n        \r\n    } catch (err) {\r\n        dispatch({ \r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {\r\n                error: err.response.data.msg\r\n            } \r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const refreshToken = () => async (dispatch) => {\r\n    const firstLogin = localStorage.getItem(\"firstLogin\")\r\n    if(firstLogin){\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {loading: true} })\r\n\r\n        try {\r\n            const res = await postDataAPI('refresh_token')\r\n            dispatch({ \r\n                type: GLOBALTYPES.AUTH, \r\n                payload: {\r\n                    token: res.data.access_token,\r\n                    user: res.data.user\r\n                } \r\n            })\r\n\r\n            dispatch({ type: GLOBALTYPES.ALERT, payload: {} })\r\n\r\n        } catch (err) {\r\n            dispatch({ \r\n                type: GLOBALTYPES.ALERT, \r\n                payload: {\r\n                    error: err.response.data.msg\r\n                } \r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport const register = (data) => async (dispatch) => {\r\n    const check = valid(data)\r\n    if(check.errLength > 0)\r\n    return dispatch({type: GLOBALTYPES.ALERT, payload: check.errMsg})\r\n\r\n    try {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {loading: true}})\r\n\r\n        const res = await postDataAPI('register', data)\r\n        dispatch({ \r\n            type: GLOBALTYPES.AUTH, \r\n            payload: {\r\n                token: res.data.access_token,\r\n                user: res.data.user\r\n            } \r\n        })\r\n\r\n        localStorage.setItem(\"firstLogin\", true)\r\n        dispatch({ \r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {\r\n                success: res.data.msg\r\n            } \r\n        })\r\n    } catch (err) {\r\n        dispatch({ \r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {\r\n                error: err.response.data.msg\r\n            } \r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const logout = () => async (dispatch) => {\r\n    try {\r\n        localStorage.removeItem('firstLogin')\r\n        await postDataAPI('logout')\r\n        window.location.href = \"/\"\r\n    } catch (err) {\r\n        dispatch({ \r\n            type: GLOBALTYPES.ALERT, \r\n            payload: {\r\n                error: err.response.data.msg\r\n            } \r\n        })\r\n    }\r\n}","import { GLOBALTYPES } from '../actions/globalTypes'\r\nimport { getDataAPI } from '../../utils/fetchData'\r\n\r\nexport const SUGGES_TYPES = {\r\n    LOADING: 'LOADING_SUGGES',\r\n    GET_USERS: 'GET_USERS_SUGGES',\r\n}\r\n\r\nexport const getSuggestions = (token) => async (dispatch) => {\r\n    try {\r\n        dispatch({ type: SUGGES_TYPES.LOADING, payload: true })\r\n        \r\n        const res = await getDataAPI('suggestionsUser', token)\r\n        dispatch({ type: SUGGES_TYPES.GET_USERS, payload: res.data })\r\n\r\n        dispatch({ type: SUGGES_TYPES.LOADING, payload: false })\r\n        \r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}})\r\n    }\r\n}","import React from 'react'\r\n\r\nconst Icons = ({setContent, content, theme}) => {\r\n    const reactions = [   \r\n        '❤️', '😆', '😯', '😢', '😡', '👍', '👎', '😄',\r\n        '😂', '😍', '😘', '😗', '😚', '😳', '😭', '😓',\r\n        '😤', '🤤', '👻', '💀', '🤐', '😴', '😷', '😵'\r\n    ]\r\n\r\n    return (\r\n        <div className=\"nav-item dropdown\" \r\n        style={{ opacity: 1, filter: theme ? 'invert(1)' : 'invert(0)' }}>\r\n            \r\n            <span className=\"nav-link position-relative px-1\" id=\"navbarDropdown\" \r\n            role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <span style={{opacity: 0.4}}>😄</span>\r\n            </span>\r\n\r\n            <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                <div className=\"reactions\">\r\n                    {\r\n                        reactions.map(icon => (\r\n                            <span key={icon} onClick={() => setContent(content + icon)}>\r\n                                {icon}\r\n                            </span>\r\n                        ))\r\n                    }\r\n                </div>\r\n            </div>\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Icons\r\n","import React from 'react'\r\nimport LeftSide from '../../components/message/LeftSide'\r\n\r\nconst Message = () => {\r\n    return (\r\n        <div className=\"message d-flex\">\r\n            <div className=\"col-md-4 border-right px-0\">\r\n                <LeftSide />\r\n            </div>\r\n\r\n            <div className=\"col-md-8 px-0 right_mess\">\r\n                <div className=\"d-flex justify-content-center \r\n                align-items-center flex-column h-100\">\r\n\r\n                    <i className=\"fab fa-facebook-messenger text-primary\"\r\n                    style={{fontSize: '5rem'}} />\r\n                    <h4>Tin nhắn</h4>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { login } from '../redux/actions/authAction'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\n\r\nconst Login = () => {\r\n    const initialState = { email: '', password: '' }\r\n    const [userData, setUserData] = useState(initialState)\r\n    const { email, password } = userData\r\n\r\n    const [typePass, setTypePass] = useState(false)\r\n\r\n    const { auth } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        if(auth.token) history.push(\"/\")\r\n    }, [auth.token, history])\r\n\r\n    const handleChangeInput = e => {\r\n        const { name, value } = e.target\r\n        setUserData({...userData, [name]:value})\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        dispatch(login(userData))\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth_page\">\r\n            <form onSubmit={handleSubmit}>\r\n                <h3 className=\"text-uppercase text-center mb-4\">SocialMedia</h3>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleInputEmail1\">Email</label>\r\n                    <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" name=\"email\"\r\n                    aria-describedby=\"emailHelp\" onChange={handleChangeInput} value={email} />\r\n                    \r\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">\r\n                        Nhập địa chỉ email đăng ký.\r\n                    </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleInputPassword1\">Mật Khẩu</label>\r\n\r\n                    <div className=\"pass\">\r\n                        \r\n                        <input type={ typePass ? \"text\" : \"password\" } \r\n                        className=\"form-control\" id=\"exampleInputPassword1\"\r\n                        onChange={handleChangeInput} value={password} name=\"password\" />\r\n\r\n                        <small onClick={() => setTypePass(!typePass)}>\r\n                            {typePass ? 'Ẩn' : 'Xem'}\r\n                        </small>\r\n                    </div>\r\n                   \r\n                </div>\r\n                \r\n                <button type=\"submit\" className=\"btn btn-dark w-100\"\r\n                disabled={email && password ? false : true}>\r\n                    Đăng Nhập\r\n                </button>\r\n\r\n                <p className=\"my-2\">\r\n                   Bạn không có tên đăng nhập ? <Link to=\"/register\" style={{color: \"crimson\"}}>Đăng Ký</Link>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useHistory, Link } from 'react-router-dom'\r\nimport { register } from '../redux/actions/authAction'\r\n\r\nconst Register = () => {\r\n    const { auth, alert } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const initialState = { \r\n        fullname: '', username: '', email: '', password: '', cf_password: '', gender: 'male'\r\n    }\r\n    const [userData, setUserData] = useState(initialState)\r\n    const { fullname, username, email, password, cf_password } = userData\r\n\r\n    const [typePass, setTypePass] = useState(false)\r\n    const [typeCfPass, setTypeCfPass] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if(auth.token) history.push(\"/\")\r\n    }, [auth.token, history])\r\n\r\n    \r\n    const handleChangeInput = e => {\r\n        const { name, value } = e.target\r\n        setUserData({...userData, [name]:value})\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        dispatch(register(userData))\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth_page\">\r\n            <form onSubmit={handleSubmit}>\r\n                <h3 className=\"text-uppercase text-center mb-4\">SocialMedia</h3>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"fullname\">Họ và tên</label>\r\n                    <input type=\"text\" className=\"form-control\" id=\"fullname\" name=\"fullname\"\r\n                    onChange={handleChangeInput} value={fullname}\r\n                    style={{background: `${alert.fullname ? '#fd2d6a14' : ''}`}} />\r\n                    \r\n                    <small className=\"form-text text-danger\">\r\n                        {alert.fullname ? alert.fullname : ''}\r\n                    </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"username\">Tên người dùng</label>\r\n                    <input type=\"text\" className=\"form-control\" id=\"username\" name=\"username\"\r\n                    onChange={handleChangeInput} value={username.toLowerCase().replace(/ /g, '')}\r\n                    style={{background: `${alert.username ? '#fd2d6a14' : ''}`}} />\r\n                    \r\n                    <small className=\"form-text text-danger\">\r\n                        {alert.username ? alert.username : ''}\r\n                    </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleInputEmail1\">Email</label>\r\n                    <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" name=\"email\"\r\n                    onChange={handleChangeInput} value={email}\r\n                    style={{background: `${alert.email ? '#fd2d6a14' : ''}`}} />\r\n                    \r\n                    <small className=\"form-text text-danger\">\r\n                        {alert.email ? alert.email : ''}\r\n                    </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"exampleInputPassword1\">Mật khẩu</label>\r\n\r\n                    <div className=\"pass\">\r\n                        \r\n                        <input type={ typePass ? \"text\" : \"password\" } \r\n                        className=\"form-control\" id=\"exampleInputPassword1\"\r\n                        onChange={handleChangeInput} value={password} name=\"password\"\r\n                        style={{background: `${alert.password ? '#fd2d6a14' : ''}`}} />\r\n\r\n                        <small onClick={() => setTypePass(!typePass)}>\r\n                            {typePass ? 'Ẩn' : 'Hiện'}\r\n                        </small>\r\n                    </div>\r\n\r\n                    <small className=\"form-text text-danger\">\r\n                        {alert.password ? alert.password : ''}\r\n                    </small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"cf_password\">Xác nhận mật khẩu</label>\r\n\r\n                    <div className=\"pass\">\r\n                        \r\n                        <input type={ typeCfPass ? \"text\" : \"password\" } \r\n                        className=\"form-control\" id=\"cf_password\"\r\n                        onChange={handleChangeInput} value={cf_password} name=\"cf_password\"\r\n                        style={{background: `${alert.cf_password ? '#fd2d6a14' : ''}`}} />\r\n\r\n                        <small onClick={() => setTypeCfPass(!typeCfPass)}>\r\n                            {typeCfPass ? 'Ẩn' : 'Hiện'}\r\n                        </small>\r\n                    </div>\r\n\r\n                    <small className=\"form-text text-danger\">\r\n                        {alert.cf_password ? alert.cf_password : ''}\r\n                    </small>\r\n                </div>\r\n\r\n                <div className=\"row justify-content-between mx-0 mb-1\">\r\n                    <label htmlFor=\"male\">\r\n                        Nam : <input type=\"radio\" id=\"male\" name=\"gender\"\r\n                        value=\"male\" defaultChecked onChange={handleChangeInput} />\r\n                    </label>\r\n\r\n                    <label htmlFor=\"female\">\r\n                        Nữ : <input type=\"radio\" id=\"female\" name=\"gender\"\r\n                        value=\"female\" onChange={handleChangeInput} />\r\n                    </label>\r\n\r\n                    <label htmlFor=\"other\">\r\n                        Khác: <input type=\"radio\" id=\"other\" name=\"gender\"\r\n                        value=\"other\" onChange={handleChangeInput} />\r\n                    </label>\r\n                </div>\r\n                \r\n                <button type=\"submit\" className=\"btn btn-dark w-100\">\r\n                    Đăng Ký\r\n                </button>\r\n\r\n                <p className=\"my-2\">\r\n                    Bạn đã có tài khoản? <Link to=\"/\" style={{color: \"crimson\"}}>Đăng nhập</Link>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register\r\n","import React from 'react'\r\nimport Avatar from '../Avatar'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\n\r\nconst Status = () => {\r\n    const { auth } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <div className=\"status my-3 d-flex\">\r\n            <Avatar src={auth.user.avatar} size=\"big-avatar\" />\r\n            \r\n            <button className=\"statusBtn flex-fill\"\r\n            onClick={() => dispatch({ type: GLOBALTYPES.STATUS, payload: true })}>\r\n                {auth.user.username}, Bạn đang nghĩ gì?\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Status\r\n","import React, { useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport PostCard from '../PostCard'\r\n\r\nimport LoadIcon from '../../images/loading.gif'\r\nimport LoadMoreBtn from '../LoadMoreBtn'\r\nimport { getDataAPI } from '../../utils/fetchData'\r\nimport { POST_TYPES } from '../../redux/actions/postAction'\r\n\r\n\r\nconst Posts = () => {\r\n    const { homePosts, auth, theme } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const [load, setLoad] = useState(false)\r\n\r\n    const handleLoadMore = async () => {\r\n        setLoad(true)\r\n        const res = await getDataAPI(`posts?limit=${homePosts.page * 9}`, auth.token)\r\n\r\n        dispatch({\r\n            type: POST_TYPES.GET_POSTS, \r\n            payload: {...res.data, page: homePosts.page + 1}\r\n        })\r\n\r\n        setLoad(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"posts\">\r\n            {\r\n                homePosts.posts.map(post => (\r\n                    <PostCard key={post._id} post={post} theme={theme} />\r\n                ))\r\n            }\r\n\r\n            {\r\n                load && <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto\" />\r\n            }\r\n\r\n            \r\n            <LoadMoreBtn result={homePosts.result} page={homePosts.page}\r\n            load={load} handleLoadMore={handleLoadMore} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Posts\r\n","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport UserCard from '../UserCard'\r\nimport FollowBtn from '../FollowBtn'\r\nimport LoadIcon from '../../images/loading.gif'\r\nimport { getSuggestions } from '../../redux/actions/suggestionsAction'\r\n\r\nconst RightSideBar = () => {\r\n    const { auth, suggestions } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n        <div className=\"mt-3\">\r\n            <UserCard user={auth.user} />\r\n\r\n            <div className=\"d-flex justify-content-between align-items-center my-2\">\r\n                <h5 className=\"text-danger\">Gợi ý kết bạn</h5>\r\n                {\r\n                    !suggestions.loading &&\r\n                    <i className=\"fas fa-redo\" style={{cursor: 'pointer'}}\r\n                    onClick={ () => dispatch(getSuggestions(auth.token)) } />\r\n                }\r\n            </div>\r\n\r\n            {\r\n                suggestions.loading\r\n                ? <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto my-4\" />\r\n                : <div className=\"suggestions\">\r\n                    {\r\n                        suggestions.users.map(user => (\r\n                            <UserCard key={user._id} user={user} >\r\n                                <FollowBtn user={user} />\r\n                            </UserCard>\r\n                        ))\r\n                    }\r\n                </div>\r\n            }\r\n\r\n            <div style={{opacity: 0.5}} className=\"my-2\" >\r\n                \r\n                <small className=\"d-block\">\r\n                    Mạng xã hội - Đồ án tốt nghiệp\r\n                </small>\r\n                <small className=\"d-block\">\r\n                   Nguyễn Đình Gia Khải - 5951071042\r\n                </small>\r\n                <small>\r\n                   &copy; 2022\r\n                </small>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RightSideBar\r\n","import React, { useEffect } from 'react'\r\n\r\nimport Status from '../components/home/Status'\r\nimport Posts from '../components/home/Posts'\r\nimport RightSideBar from '../components/home/RightSideBar'\r\n\r\nimport { useSelector } from 'react-redux'\r\nimport LoadIcon from '../images/loading.gif'\r\n\r\n\r\nlet scroll = 0;\r\n\r\nconst Home = () => {\r\n    const { homePosts } = useSelector(state => state)\r\n\r\n    window.addEventListener('scroll', () => {\r\n        if(window.location.pathname === '/'){\r\n            scroll = window.pageYOffset\r\n            return scroll;\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            window.scrollTo({top: scroll, behavior: 'smooth'})\r\n        }, 100)\r\n    },[])\r\n\r\n    return (\r\n        <div className=\"home row mx-0\">\r\n            <div className=\"col-md-8\">\r\n                <Status />\r\n\r\n                {\r\n                    homePosts.loading \r\n                    ? <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto\" />\r\n                    : (homePosts.result === 0 && homePosts.posts.length === 0)\r\n                        ? <h2 className=\"text-center\">Không có bài viết</h2>\r\n                        : <Posts />\r\n                }\r\n                \r\n            </div>\r\n            \r\n            <div className=\"col-md-4\">\r\n                <RightSideBar />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\n\r\nconst LoadMoreBtn = ({result, page, load, handleLoadMore}) => {\r\n    return (\r\n        <>\r\n            {\r\n                result < 9 * (page - 1) ? '' : \r\n\r\n                !load && <button className=\"btn btn-dark mx-auto d-block\"\r\n                onClick={handleLoadMore}>\r\n                    Thêm\r\n                </button>\r\n            }\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default LoadMoreBtn\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport UserCard from '../UserCard'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { getDataAPI } from '../../utils/fetchData'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\nimport { MESS_TYPES, getConversations } from '../../redux/actions/messageAction'\r\n\r\n\r\nconst LeftSide = () => {\r\n    const { auth, message, online } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const [search, setSearch] = useState('')\r\n    const [searchUsers, setSearchUsers] = useState([])\r\n\r\n    const history = useHistory()\r\n    const { id } = useParams()\r\n\r\n    const pageEnd = useRef()\r\n    const [page, setPage] = useState(0)\r\n\r\n    \r\n    const handleSearch = async e => {\r\n        e.preventDefault()\r\n        if(!search) return setSearchUsers([]);\r\n\r\n        try {\r\n            const res = await getDataAPI(`search?username=${search}`, auth.token)\r\n            setSearchUsers(res.data.users)\r\n        } catch (err) {\r\n            dispatch({\r\n                type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg}\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleAddUser = (user) => {\r\n        setSearch('')\r\n        setSearchUsers([])\r\n        dispatch({type: MESS_TYPES.ADD_USER, payload: {...user, text: '', media: []}})\r\n        dispatch({type: MESS_TYPES.CHECK_ONLINE_OFFLINE, payload: online})\r\n        return history.push(`/message/${user._id}`)\r\n    }\r\n\r\n    const isActive = (user) => {\r\n        if(id === user._id) return 'active';\r\n        return ''\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(message.firstLoad) return;\r\n        dispatch(getConversations({auth}))\r\n    },[dispatch, auth, message.firstLoad])\r\n\r\n    // Load More\r\n    useEffect(() => {\r\n        const observer = new IntersectionObserver(entries => {\r\n            if(entries[0].isIntersecting){\r\n                setPage(p => p + 1)\r\n            }\r\n        },{\r\n            threshold: 0.1\r\n        })\r\n\r\n        observer.observe(pageEnd.current)\r\n    },[setPage])\r\n\r\n    useEffect(() => {\r\n        if(message.resultUsers >= (page - 1) * 9 && page > 1){\r\n            dispatch(getConversations({auth, page}))\r\n        }\r\n    },[message.resultUsers, page, auth, dispatch])\r\n    \r\n\r\n    // Check User Online - Offline\r\n    useEffect(() => {\r\n        if(message.firstLoad) {\r\n            dispatch({type: MESS_TYPES.CHECK_ONLINE_OFFLINE, payload: online})\r\n        }\r\n    },[online, message.firstLoad, dispatch])\r\n\r\n    return (\r\n        <>\r\n            <form className=\"message_header\" onSubmit={handleSearch} >\r\n                <input type=\"text\" value={search}\r\n                placeholder=\"Tìm bạn...\"\r\n                onChange={e => setSearch(e.target.value)} />\r\n\r\n                <button type=\"submit\" style={{display: 'none'}}>Tìm</button>\r\n            </form>\r\n\r\n            <div className=\"message_chat_list\">\r\n                {\r\n                    searchUsers.length !== 0\r\n                    ?  <>\r\n                        {\r\n                            searchUsers.map(user => (\r\n                                <div key={user._id} className={`message_user ${isActive(user)}`}\r\n                                onClick={() => handleAddUser(user)}>\r\n                                    <UserCard user={user} />\r\n                                </div>\r\n                            ))\r\n                        }\r\n                        \r\n                    </>\r\n                    : <>\r\n                        {\r\n                            message.users.map(user => (\r\n                                <div key={user._id} className={`message_user ${isActive(user)}`}\r\n                                onClick={() => handleAddUser(user)}>\r\n                                    <UserCard user={user} msg={true}>\r\n                                        {\r\n                                            user.online\r\n                                            ? <i className=\"fas fa-circle text-success\" />\r\n                                            : auth.user.following.find(item => \r\n                                                item._id === user._id\r\n                                            ) && <i className=\"fas fa-circle\" />\r\n                                                \r\n                                        }\r\n                                        \r\n                                    </UserCard>\r\n                                </div>\r\n                            ))\r\n                        }\r\n                    </>\r\n                }\r\n               \r\n               <button ref={pageEnd} style={{opacity: 0}} >Xem thêm</button>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LeftSide\r\n","import React from 'react'\r\nimport Avatar from '../../Avatar'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport moment from 'moment'\r\nimport { GLOBALTYPES } from '../../../redux/actions/globalTypes'\r\nimport { deletePost } from '../../../redux/actions/postAction'\r\nimport { BASE_URL } from '../../../utils/config'\r\n\r\nconst CardHeader = ({post}) => {\r\n    const { auth, socket } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const history = useHistory()\r\n\r\n    const handleEditPost = () => {\r\n        dispatch({ type: GLOBALTYPES.STATUS, payload: {...post, onEdit: true}})\r\n    }\r\n\r\n    const handleDeletePost = () => {\r\n        if(window.confirm(\"Bạn muốn xóa bài viết này không?\")){\r\n            dispatch(deletePost({post, auth, socket}))\r\n            return history.push(\"/\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"card_header\">\r\n            <div className=\"d-flex\">\r\n                <Avatar src={post.user.avatar} size=\"big-avatar\" />\r\n\r\n                <div className=\"card_name\">\r\n                    <h6 className=\"m-0\">\r\n                        <Link to={`/profile/${post.user._id}`} className=\"text-dark\">\r\n                            {post.user.username}\r\n                        </Link>\r\n                    </h6>\r\n                    <small className=\"text-muted\">\r\n                        {moment(post.createdAt).fromNow()}\r\n                    </small>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"nav-item dropdown\">\r\n                <span className=\"material-icons\" id=\"moreLink\" data-toggle=\"dropdown\">\r\n                    more_horiz\r\n                </span>\r\n\r\n                <div className=\"dropdown-menu\">\r\n                    {\r\n                        auth.user._id === post.user._id &&\r\n                        <>\r\n                            <div className=\"dropdown-item\" onClick={handleEditPost}>\r\n                                <span className=\"material-icons\">create</span> Sửa bài viết\r\n                            </div>\r\n                            <div className=\"dropdown-item\" onClick={handleDeletePost} >\r\n                                <span className=\"material-icons\">delete_outline</span> Xóa bài viết\r\n                            </div>\r\n                        </>\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CardHeader\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Carousel = ({ images, id }) => {\r\n  const isActive = (index) => {\r\n    if (index === 0) return \"active\";\r\n  };\r\n  console.log(images);\r\n\r\n  const { theme } = useSelector((state) => state);\r\n\r\n  return (\r\n    <div id={`image${id}`} className=\"carousel slide\" data-ride=\"carousel\">\r\n      <ol className=\"carousel-indicators\" style={{ zIndex: 1 }}>\r\n        {images.map((img, index) => (\r\n          <li\r\n            key={index}\r\n            data-target={`#image${id}`}\r\n            data-slide-to={index}\r\n            className={isActive(index)}\r\n          />\r\n        ))}\r\n      </ol>\r\n\r\n      <div className=\"carousel-inner\">\r\n        {images.map((img, index) => (\r\n          <div key={index} className={`carousel-item ${isActive(index)}`}>\r\n            {img.url.match(/video/i) ? (\r\n              <video\r\n                controls\r\n                src={img.url}\r\n                className=\"d-block w-100\"\r\n                alt={img.url}\r\n                // style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" }}\r\n              />\r\n            ) : (\r\n              <img\r\n                src={img.url}\r\n                className=\"d-block w-100\"\r\n                alt={img.url}\r\n                // style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" }}\r\n              />\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {images.length > 1 && (\r\n        <>\r\n          <a\r\n            className=\"carousel-control-prev\"\r\n            href={`#image${id}`}\r\n            role=\"button\"\r\n            data-slide=\"prev\"\r\n            style={{ width: \"5%\" }}\r\n          >\r\n            <span\r\n              className=\"carousel-control-prev-icon\"\r\n              aria-hidden=\"true\"\r\n            ></span>\r\n            <span className=\"sr-only\">Trước</span>\r\n          </a>\r\n\r\n          <a\r\n            className=\"carousel-control-next\"\r\n            href={`#image${id}`}\r\n            role=\"button\"\r\n            data-slide=\"next\"\r\n            style={{ width: \"5%\" }}\r\n          >\r\n            <span\r\n              className=\"carousel-control-next-icon\"\r\n              aria-hidden=\"true\"\r\n            ></span>\r\n            <span className=\"sr-only\">Sau</span>\r\n          </a>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Carousel;\r\n","import React, { useState } from \"react\";\r\nimport Carousel from \"../../Carousel\";\r\n\r\nconst CardBody = ({ post, theme }) => {\r\n  const [readMore, setReadMore] = useState(false);\r\n\r\n  console.log(post);\r\n\r\n  return (\r\n    <div className=\"card_body\">\r\n      <div\r\n        className=\"card_body-content\"\r\n        style={{\r\n          filter: theme ? \"invert(1)\" : \"invert(0)\",\r\n          color: theme ? \"white\" : \"#111\",\r\n        }}\r\n      >\r\n        <span>\r\n          {post.content.length < 60\r\n            ? post.content\r\n            : readMore\r\n            ? post.content + \" \"\r\n            : post.content.slice(0, 60) + \".....\"}\r\n        </span>\r\n        {post.content.length > 60 && (\r\n          <span className=\"readMore\" onClick={() => setReadMore(!readMore)}>\r\n            {readMore ? \"Ẩn\" : \"Xem thêm\"}\r\n          </span>\r\n        )}\r\n      </div>\r\n      {post.images.length > 0 && (\r\n        <Carousel images={post.images} id={post._id} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardBody;\r\n","export default __webpack_public_path__ + \"static/media/send.fab9d966.svg\";","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst LikeButton = ({isLike, handleLike, handleUnLike}) => {\r\n    const { theme } = useSelector(state => state)\r\n\r\n    return (\r\n        <>\r\n            {\r\n                isLike\r\n                ? <i className=\"fas fa-heart text-danger\" onClick={handleUnLike}\r\n                style={{filter: theme ? 'invert(1)' : 'invert(0)'}} />\r\n                : <i className=\"far fa-heart\" onClick={handleLike} />\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LikeButton\r\n","import React from 'react'\r\nimport {\r\n    EmailShareButton, EmailIcon,\r\n    FacebookShareButton, FacebookIcon,\r\n    TelegramShareButton, TelegramIcon,\r\n    TwitterShareButton, TwitterIcon,\r\n    WhatsappShareButton, WhatsappIcon,\r\n    RedditShareButton, RedditIcon\r\n} from 'react-share'\r\n\r\nconst ShareModal = ({url, theme}) => {\r\n    return (\r\n        <div className=\"d-flex justify-content-between px-4 py-2\"\r\n        style={{filter: theme ? 'invert(1)' : 'invert(0)' }}>\r\n            <FacebookShareButton url={url} >\r\n                <FacebookIcon round={true} size={32} />\r\n            </FacebookShareButton>\r\n\r\n            <TwitterShareButton url={url} >\r\n                <TwitterIcon round={true} size={32} />\r\n            </TwitterShareButton>\r\n\r\n            <EmailShareButton url={url} >\r\n                <EmailIcon round={true} size={32} />\r\n            </EmailShareButton>\r\n\r\n            <RedditShareButton url={url} >\r\n                <RedditIcon round={true} size={32} />\r\n            </RedditShareButton>\r\n\r\n            <TelegramShareButton url={url} >\r\n                <TelegramIcon round={true} size={32} />\r\n            </TelegramShareButton>\r\n\r\n            <WhatsappShareButton url={url} >\r\n                <WhatsappIcon round={true} size={32} />\r\n            </WhatsappShareButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShareModal\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Send from '../../../images/send.svg'\r\nimport LikeButton from '../../LikeButton'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { likePost, unLikePost, savePost, unSavePost } from '../../../redux/actions/postAction'\r\nimport ShareModal from '../../ShareModal'\r\nimport { BASE_URL } from '../../../utils/config'\r\n\r\n\r\nconst CardFooter = ({post}) => {\r\n    const [isLike, setIsLike] = useState(false)\r\n    const [loadLike, setLoadLike] = useState(false)\r\n\r\n    const [isShare, setIsShare] = useState(false)\r\n\r\n    const { auth, theme, socket } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const [saved, setSaved] = useState(false)\r\n    const [saveLoad, setSaveLoad] = useState(false)\r\n\r\n    // Likes\r\n    useEffect(() => {\r\n        if(post.likes.find(like => like._id === auth.user._id)){\r\n            setIsLike(true)\r\n        }else{\r\n            setIsLike(false)\r\n        }\r\n    }, [post.likes, auth.user._id])\r\n\r\n    const handleLike = async () => {\r\n        if(loadLike) return;\r\n        \r\n        setLoadLike(true)\r\n        await dispatch(likePost({post, auth, socket}))\r\n        setLoadLike(false)\r\n    }\r\n\r\n    const handleUnLike = async () => {\r\n        if(loadLike) return;\r\n\r\n        setLoadLike(true)\r\n        await dispatch(unLikePost({post, auth, socket}))\r\n        setLoadLike(false)\r\n    }\r\n\r\n\r\n    // Saved\r\n    useEffect(() => {\r\n        if(auth.user.saved.find(id => id === post._id)){\r\n            setSaved(true)\r\n        }else{\r\n            setSaved(false)\r\n        }\r\n    },[auth.user.saved, post._id])\r\n\r\n    const handleSavePost = async () => {\r\n        if(saveLoad) return;\r\n        \r\n        setSaveLoad(true)\r\n        await dispatch(savePost({post, auth}))\r\n        setSaveLoad(false)\r\n    }\r\n\r\n    const handleUnSavePost = async () => {\r\n        if(saveLoad) return;\r\n\r\n        setSaveLoad(true)\r\n        await dispatch(unSavePost({post, auth}))\r\n        setSaveLoad(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"card_footer\">\r\n            <div className=\"card_icon_menu\">\r\n                <div>\r\n                    <LikeButton \r\n                    isLike={isLike}\r\n                    handleLike={handleLike}\r\n                    handleUnLike={handleUnLike}\r\n                    />\r\n\r\n                    <Link to={`/post/${post._id}`} className=\"text-dark\">\r\n                        <i className=\"far fa-comment\" />\r\n                    </Link>\r\n\r\n                    <img src={Send} alt=\"Gửi\" onClick={() => setIsShare(!isShare)} />\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div className=\"d-flex justify-content-between\">\r\n                <h6 style={{padding: '0 25px', cursor: 'pointer'}}>\r\n                    {post.likes.length} Likes\r\n                </h6>\r\n                \r\n                <h6 style={{padding: '0 25px', cursor: 'pointer'}}>\r\n                    {post.comments.length} Bình Luận\r\n                </h6>\r\n            </div>\r\n\r\n            {\r\n                isShare && <ShareModal url={`${BASE_URL}/post/${post._id}`} theme={theme} />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CardFooter\r\n","export const BASE_URL = ''","import { GLOBALTYPES, EditData, DeleteData } from './globalTypes'\r\nimport { POST_TYPES } from './postAction'\r\nimport { postDataAPI, patchDataAPI, deleteDataAPI } from '../../utils/fetchData'\r\nimport { createNotify, removeNotify } from '../actions/notifyAction'\r\n\r\n\r\nexport const createComment = ({post, newComment, auth, socket}) => async (dispatch) => {\r\n    const newPost = {...post, comments: [...post.comments, newComment]}\r\n    \r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost })\r\n\r\n    try {\r\n        const data = {...newComment, postId: post._id, postUserId: post.user._id}\r\n        const res = await postDataAPI('comment', data, auth.token)\r\n\r\n        const newData = {...res.data.newComment, user: auth.user}\r\n        const newPost = {...post, comments: [...post.comments, newData]}\r\n        dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost })\r\n\r\n        // Socket\r\n        socket.emit('createComment', newPost)\r\n\r\n        // Notify\r\n        const msg = {\r\n            id: res.data.newComment._id,\r\n            text: newComment.reply ? ' đã nhắc bạn trong 1 bình luận' : 'đã bình luận về bài viết của bạn.',\r\n            recipients: newComment.reply ? [newComment.tag._id] : [post.user._id],\r\n            url: `/post/${post._id}`,\r\n            content: post.content, \r\n            image: post.images[0].url\r\n        }\r\n\r\n        dispatch(createNotify({msg, auth, socket}))\r\n        \r\n    } catch (err) {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n}\r\n\r\nexport const updateComment = ({comment, post, content, auth}) => async (dispatch) => {\r\n    const newComments = EditData(post.comments, comment._id, {...comment, content})\r\n    const newPost = {...post, comments: newComments}\r\n    \r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost })\r\n    try {\r\n        patchDataAPI(`comment/${comment._id}`, { content }, auth.token)\r\n    } catch (err) {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n}\r\n\r\nexport const likeComment = ({comment, post, auth}) => async (dispatch) => {\r\n    const newComment = {...comment, likes: [...comment.likes, auth.user]}\r\n\r\n    const newComments = EditData(post.comments, comment._id, newComment)\r\n\r\n    const newPost = {...post, comments: newComments}\r\n    \r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost })\r\n\r\n    try {\r\n        await patchDataAPI(`comment/${comment._id}/like`, null, auth.token)\r\n    } catch (err) {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n}\r\n\r\nexport const unLikeComment = ({comment, post, auth}) => async (dispatch) => {\r\n\r\n    const newComment = {...comment, likes: DeleteData(comment.likes, auth.user._id)}\r\n\r\n    const newComments = EditData(post.comments, comment._id, newComment)\r\n\r\n    const newPost = {...post, comments: newComments}\r\n    \r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost })\r\n\r\n    try {\r\n        await patchDataAPI(`comment/${comment._id}/unlike`, null, auth.token)\r\n    } catch (err) {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n}\r\n\r\nexport const deleteComment = ({post, comment, auth, socket}) => async (dispatch) => {\r\n    const deleteArr = [...post.comments.filter(cm => cm.reply === comment._id), comment]\r\n    \r\n    const newPost = {\r\n        ...post,\r\n        comments: post.comments.filter(cm => !deleteArr.find(da => cm._id === da._id))\r\n    }\r\n\r\n    dispatch({ type: POST_TYPES.UPDATE_POST, payload: newPost })\r\n\r\n    socket.emit('deleteComment', newPost)\r\n    try {\r\n       deleteArr.forEach(item => {\r\n            deleteDataAPI(`comment/${item._id}`, auth.token)\r\n\r\n            const msg = {\r\n                id: item._id,\r\n                text: comment.reply ? 'đã nhắc bạn trong 1 bình luận' : 'đã bình luận về bài viết của bạn.',\r\n                recipients: comment.reply ? [comment.tag._id] : [post.user._id],\r\n                url: `/post/${post._id}`,\r\n            }\r\n    \r\n            dispatch(removeNotify({msg, auth, socket}))\r\n       })\r\n    } catch (err) {\r\n        dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n\r\n}","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { deleteComment } from '../../../redux/actions/commentAction'\r\n\r\nconst CommentMenu = ({post, comment, setOnEdit}) => {\r\n\r\n    const { auth, socket } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const handleRemove = () => {\r\n        if(post.user._id === auth.user._id || comment.user._id === auth.user._id){\r\n            dispatch(deleteComment({post, auth, comment, socket}))\r\n        }\r\n    }\r\n\r\n    const MenuItem = () => {\r\n        return(\r\n            <>\r\n                <div className=\"dropdown-item\" onClick={() => setOnEdit(true)}>\r\n                    <span className=\"material-icons\">create</span> Sửa\r\n                </div>\r\n                <div className=\"dropdown-item\" onClick={handleRemove}>\r\n                    <span className=\"material-icons\">delete_outline</span> Xóa\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"menu\">\r\n            {\r\n                (post.user._id === auth.user._id || comment.user._id === auth.user._id) &&\r\n                <div className=\"nav-item dropdown\">\r\n                    <span className=\"material-icons\" id=\"moreLink\" data-toggle=\"dropdown\">\r\n                        more_vert\r\n                    </span>\r\n\r\n                    <div className=\"dropdown-menu\" aria-labelledby=\"moreLink\">\r\n                        {\r\n                            post.user._id === auth.user._id\r\n                            ? comment.user._id === auth.user._id\r\n                                ? MenuItem()\r\n                                : <div className=\"dropdown-item\" onClick={handleRemove}>\r\n                                    <span className=\"material-icons\">delete_outline</span> Xóa\r\n                                </div>\r\n                            : comment.user._id === auth.user._id && MenuItem()\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n            }\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CommentMenu\r\n","import React, { useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { createComment } from '../../redux/actions/commentAction'\r\nimport Icons from '../Icons'\r\n\r\nconst InputComment = ({children, post, onReply, setOnReply}) => {\r\n    const [content, setContent] = useState('')\r\n\r\n    const { auth, socket, theme } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        if(!content.trim()){\r\n            if(setOnReply) return setOnReply(false);\r\n            return;\r\n        }\r\n\r\n        setContent('')\r\n        \r\n        const newComment = {\r\n            content,\r\n            likes: [],\r\n            user: auth.user,\r\n            createdAt: new Date().toISOString(),\r\n            reply: onReply && onReply.commentId,\r\n            tag: onReply && onReply.user\r\n        }\r\n        \r\n        dispatch(createComment({post, newComment, auth, socket}))\r\n\r\n        if(setOnReply) return setOnReply(false);\r\n    }\r\n\r\n    return (\r\n        <form className=\"card-footer comment_input\" onSubmit={handleSubmit} >\r\n            {children}\r\n            <input type=\"text\" placeholder=\"Nhập bình luận ...\"\r\n            value={content} onChange={e => setContent(e.target.value)}\r\n            style={{\r\n                filter: theme ? 'invert(1)' : 'invert(0)',\r\n                color: theme ? 'white' : '#111',\r\n                background: theme ? 'rgba(0,0,0,.03)' : '',\r\n            }} />\r\n\r\n            <Icons setContent={setContent} content={content} theme={theme} />\r\n\r\n            <button type=\"submit\" className=\"postBtn\">\r\n                Gửi\r\n            </button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default InputComment\r\n","import React, { useState, useEffect } from 'react'\r\nimport Avatar from '../../Avatar'\r\nimport { Link } from 'react-router-dom'\r\nimport moment from 'moment'\r\n\r\nimport LikeButton from '../../LikeButton'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport CommentMenu from './CommentMenu'\r\nimport { updateComment, likeComment, unLikeComment } from '../../../redux/actions/commentAction'\r\nimport InputComment from '../InputComment'\r\n\r\nconst CommentCard = ({children, comment, post, commentId}) => {\r\n    const { auth, theme } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const [content, setContent] = useState('')\r\n    const [readMore, setReadMore] = useState(false)\r\n\r\n    const [onEdit, setOnEdit] = useState(false)\r\n    const [isLike, setIsLike] = useState(false)\r\n    const [loadLike, setLoadLike] = useState(false)\r\n\r\n    const [onReply, setOnReply] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        setContent(comment.content)\r\n        setIsLike(false)\r\n        setOnReply(false)\r\n        if(comment.likes.find(like => like._id === auth.user._id)){\r\n            setIsLike(true)\r\n        }\r\n    },[comment, auth.user._id])\r\n\r\n    const handleUpdate = () => {\r\n        if(comment.content !== content){\r\n            dispatch(updateComment({comment, post, content, auth}))\r\n            setOnEdit(false)\r\n        }else{\r\n            setOnEdit(false)\r\n        }\r\n    }\r\n\r\n\r\n    const handleLike = async () => {\r\n        if(loadLike) return;\r\n        setIsLike(true)\r\n\r\n        setLoadLike(true)\r\n        await dispatch(likeComment({comment, post, auth}))\r\n        setLoadLike(false)\r\n    }\r\n\r\n    const handleUnLike = async () => {\r\n        if(loadLike) return;\r\n        setIsLike(false)\r\n\r\n        setLoadLike(true)\r\n        await dispatch(unLikeComment({comment, post, auth}))\r\n        setLoadLike(false)\r\n    }\r\n\r\n\r\n    const handleReply = () => {\r\n        if(onReply) return setOnReply(false)\r\n        setOnReply({...comment, commentId})\r\n    }\r\n\r\n    const styleCard = {\r\n        opacity: comment._id ? 1 : 0.5,\r\n        pointerEvents: comment._id ? 'inherit' : 'none'\r\n    }\r\n\r\n    return (\r\n        <div className=\"comment_card mt-2\" style={styleCard}>\r\n            <Link to={`/profile/${comment.user._id}`} className=\"d-flex text-dark\">\r\n                <Avatar src={comment.user.avatar} size=\"small-avatar\" />\r\n                <h6 className=\"mx-1\">{comment.user.username}</h6>\r\n            </Link>\r\n\r\n            <div className=\"comment_content\">\r\n                <div className=\"flex-fill\" \r\n                style={{\r\n                    filter: theme ? 'invert(1)' : 'invert(0)',\r\n                    color: theme ? 'white' : '#111',\r\n                }}>\r\n                    {\r\n                        onEdit \r\n                        ? <textarea rows=\"5\" value={content}\r\n                        onChange={e => setContent(e.target.value)} />\r\n\r\n                        : <div>\r\n                            {\r\n                                comment.tag && comment.tag._id !== comment.user._id &&\r\n                                <Link to={`/profile/${comment.tag._id}`} className=\"mr-1\">\r\n                                    @{comment.tag.username}\r\n                                </Link>\r\n                            }\r\n                            <span>\r\n                                {\r\n                                    content.length < 100 ? content :\r\n                                    readMore ? content + ' ' : content.slice(0, 100) + '....'\r\n                                }\r\n                            </span>\r\n                            {\r\n                                content.length > 100 &&\r\n                                <span className=\"readMore\" onClick={() => setReadMore(!readMore)}>\r\n                                    {readMore ? 'Ẩn' : 'Thêm'}\r\n                                </span>\r\n                            }\r\n                        </div>\r\n                    }\r\n                    \r\n\r\n                    <div style={{cursor: 'pointer'}}>\r\n                        <small className=\"text-muted mr-3\">\r\n                            {moment(comment.createdAt).fromNow()}\r\n                        </small>\r\n\r\n                        <small className=\"font-weight-bold mr-3\">\r\n                            {comment.likes.length} likes\r\n                        </small>\r\n\r\n                        {\r\n                            onEdit\r\n                            ? <>\r\n                                <small className=\"font-weight-bold mr-3\"\r\n                                onClick={handleUpdate}>\r\n                                    sửa\r\n                                </small>\r\n                                <small className=\"font-weight-bold mr-3\"\r\n                                onClick={() => setOnEdit(false)}>\r\n                                    hủy\r\n                                </small>\r\n                            </>\r\n\r\n                            : <small className=\"font-weight-bold mr-3\"\r\n                            onClick={handleReply}>\r\n                                {onReply ? 'hủy' :'trả lời'}\r\n                            </small>\r\n                        }\r\n                        \r\n                    </div>\r\n                    \r\n                </div>\r\n\r\n\r\n                <div className=\"d-flex align-items-center mx-2\" style={{cursor: 'pointer'}}>\r\n                    <CommentMenu post={post} comment={comment} setOnEdit={setOnEdit} />\r\n                    <LikeButton isLike={isLike} handleLike={handleLike} handleUnLike={handleUnLike} />\r\n                </div>\r\n            </div> \r\n            \r\n            {\r\n                onReply &&\r\n                <InputComment post={post} onReply={onReply} setOnReply={setOnReply} >\r\n                    <Link to={`/profile/${onReply.user._id}`} className=\"mr-1\">\r\n                        @{onReply.user.username}:\r\n                    </Link>\r\n                </InputComment>\r\n            }\r\n\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CommentCard\r\n","import React, { useState, useEffect } from 'react'\r\nimport CommentCard from './CommentCard'\r\n\r\nconst CommentDisplay = ({comment, post, replyCm}) => {\r\n    const [showRep, setShowRep] = useState([])\r\n    const [next, setNext] = useState(1)\r\n\r\n    useEffect(() => {\r\n        setShowRep(replyCm.slice(replyCm.length - next))\r\n    },[replyCm, next])\r\n\r\n    return (\r\n        <div className=\"comment_display\">\r\n            <CommentCard comment={comment} post={post} commentId={comment._id} >\r\n                <div className=\"pl-4\">\r\n                    {\r\n                        showRep.map((item, index) => (\r\n                            item.reply &&\r\n                            <CommentCard\r\n                            key={index}\r\n                            comment={item}\r\n                            post={post}\r\n                            commentId={comment._id}\r\n                             />\r\n                        ))\r\n                    }\r\n\r\n                    {\r\n                        replyCm.length - next > 0\r\n                        ? <div style={{cursor: 'pointer', color: 'crimson'}}\r\n                        onClick={() => setNext(next + 10)}>\r\n                           Xem thêm ...\r\n                        </div>\r\n\r\n                        : replyCm.length > 1 &&\r\n                        <div style={{cursor: 'pointer', color: 'crimson'}}\r\n                        onClick={() => setNext(1)}>\r\n                           Ẩn bớt ...\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </CommentCard>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CommentDisplay\r\n","import React, { useState, useEffect } from 'react'\r\nimport CommentDisplay from './comments/CommentDisplay'\r\n\r\nconst Comments = ({post}) => {\r\n    const [comments, setComments] = useState([])\r\n    const [showComments, setShowComments] = useState([])\r\n    const [next, setNext] = useState(2)\r\n\r\n    const [replyComments, setReplyComments] = useState([])\r\n\r\n    useEffect(() => {\r\n        const newCm = post.comments.filter(cm => !cm.reply)\r\n        setComments(newCm)\r\n        setShowComments(newCm.slice(newCm.length - next))\r\n    },[post.comments, next])\r\n\r\n    useEffect(()=> {\r\n        const newRep = post.comments.filter(cm => cm.reply)\r\n        setReplyComments(newRep)\r\n    }, [post.comments])\r\n\r\n    return (\r\n        <div className=\"comments\">\r\n            {\r\n                showComments.map((comment, index) => (\r\n                    <CommentDisplay key={index} comment={comment} post={post}\r\n                    replyCm={replyComments.filter(item => item.reply === comment._id)} />\r\n                ))\r\n            }\r\n\r\n            {\r\n                comments.length - next > 0\r\n                ? <div className=\"p-2 border-top\"\r\n                style={{cursor: 'pointer', color: 'crimson'}}\r\n                onClick={() => setNext(next + 10)}>\r\n                   Xem thêm ...\r\n                </div>\r\n\r\n                : comments.length > 2 &&\r\n                <div className=\"p-2 border-top\"\r\n                style={{cursor: 'pointer', color: 'crimson'}}\r\n                onClick={() => setNext(2)}>\r\n                    Ẩn bình luận ...\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comments\r\n","import React from 'react'\r\nimport CardHeader from './home/post_card/CardHeader'\r\nimport CardBody from './home/post_card/CardBody'\r\nimport CardFooter from './home/post_card/CardFooter'\r\n\r\nimport Comments from './home/Comments'\r\nimport InputComment from './home/InputComment'\r\n\r\nconst PostCard = ({post, theme}) => {\r\n    return (\r\n        <div className=\"card my-3\"> \r\n            <CardHeader post={post} />\r\n            <CardBody post={post} theme={theme} />\r\n            <CardFooter post={post} />\r\n\r\n            <Comments post={post} />\r\n            <InputComment post={post} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostCard\r\n","import axios from 'axios'\r\n\r\nexport const getDataAPI = async (url, token) => {\r\n    const res = await axios.get(`/api/${url}`, {\r\n        headers: { Authorization: token}\r\n    })\r\n    return res;\r\n}\r\n\r\nexport const postDataAPI = async (url, post, token) => {\r\n    const res = await axios.post(`/api/${url}`, post, {\r\n        headers: { Authorization: token}\r\n    })\r\n    return res;\r\n}\r\n\r\nexport const putDataAPI = async (url, post, token) => {\r\n    const res = await axios.put(`/api/${url}`, post, {\r\n        headers: { Authorization: token}\r\n    })\r\n    return res;\r\n}\r\n\r\nexport const patchDataAPI = async (url, post, token) => {\r\n    const res = await axios.patch(`/api/${url}`, post, {\r\n        headers: { Authorization: token}\r\n    })\r\n    return res;\r\n}\r\n\r\nexport const deleteDataAPI = async (url, token) => {\r\n    const res = await axios.delete(`/api/${url}`, {\r\n        headers: { Authorization: token}\r\n    })\r\n    return res;\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { getPost } from '../../redux/actions/postAction'\r\nimport LoadIcon from '../../images/loading.gif'\r\nimport PostCard from '../../components/PostCard'\r\n\r\n\r\nconst Post = () => {\r\n    const { id } = useParams()\r\n    const [post, setPost] = useState([])\r\n\r\n    const { auth, detailPost } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(getPost({detailPost, id, auth}))\r\n\r\n        if(detailPost.length > 0){\r\n            const newArr = detailPost.filter(post => post._id === id)\r\n            setPost(newArr)\r\n        }\r\n    },[detailPost, dispatch, id, auth])\r\n\r\n    return (\r\n        <div className=\"posts\">\r\n            {\r\n                post.length === 0 &&\r\n                <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto my-4\" />\r\n            }\r\n\r\n            {\r\n                post.map(item => (\r\n                    <PostCard key={item._id} post={item} />\r\n                ))\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { checkImage } from '../../utils/imageUpload'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\nimport { updateProfileUser } from '../../redux/actions/profileAction'\r\n\r\nconst EditProfile = ({setOnEdit}) => {\r\n    const initState = {\r\n        fullname: '', mobile: '', address: '', website: '', story: '', gender: ''\r\n    }\r\n    const [userData, setUserData] = useState(initState)\r\n    const { fullname, mobile, address, website, story, gender } = userData\r\n\r\n    const [avatar, setAvatar] = useState('')\r\n\r\n    const { auth, theme } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        setUserData(auth.user)\r\n    }, [auth.user])\r\n\r\n\r\n    const changeAvatar = (e) => {\r\n        const file = e.target.files[0]\r\n\r\n        const err = checkImage(file)\r\n        if(err) return dispatch({\r\n            type: GLOBALTYPES.ALERT, payload: {error: err}\r\n        })\r\n\r\n        setAvatar(file)\r\n    }\r\n\r\n    const handleInput = e => {\r\n        const { name, value } = e.target\r\n        setUserData({ ...userData, [name]:value })\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        dispatch(updateProfileUser({userData, avatar, auth}))\r\n    }\r\n\r\n    return (\r\n        <div className=\"edit_profile\">\r\n            <button className=\"btn btn-danger btn_close\"\r\n            onClick={() => setOnEdit(false)}>\r\n                Thoát\r\n            </button>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"info_avatar\">\r\n                    <img src={avatar ? URL.createObjectURL(avatar) : auth.user.avatar} \r\n                    alt=\"avatar\" style={{filter: theme ? 'invert(1)' : 'invert(0)'}} />\r\n                    <span>\r\n                        <i className=\"fas fa-camera\" />\r\n                        <p>Thay đổi</p>\r\n                        <input type=\"file\" name=\"file\" id=\"file_up\"\r\n                        accept=\"image/*\" onChange={changeAvatar} />\r\n                    </span>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"fullname\">Họ và tên</label>\r\n                    <div className=\"position-relative\">\r\n                        <input type=\"text\" className=\"form-control\" id=\"fullname\"\r\n                        name=\"fullname\" value={fullname} onChange={handleInput} />\r\n                        <small className=\"text-danger position-absolute\"\r\n                        style={{top: '50%', right: '5px', transform: 'translateY(-50%)'}}>\r\n                            {fullname.length}/25\r\n                        </small>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"mobile\">Số điện thoại</label>\r\n                    <input type=\"text\" name=\"mobile\" value={mobile}\r\n                    className=\"form-control\" onChange={handleInput} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"address\">Địa chỉ</label>\r\n                    <input type=\"text\" name=\"address\" value={address}\r\n                    className=\"form-control\" onChange={handleInput} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"website\">Website</label>\r\n                    <input type=\"text\" name=\"website\" value={website}\r\n                    className=\"form-control\" onChange={handleInput} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"story\">Bio (Giới thiệu)</label>\r\n                    <textarea name=\"story\" value={story} cols=\"30\" rows=\"4\"\r\n                    className=\"form-control\" onChange={handleInput} />\r\n\r\n                    <small className=\"text-danger d-block text-right\">\r\n                        {story.length}/200\r\n                    </small>\r\n                </div>\r\n\r\n                <label htmlFor=\"gender\">Giới tính</label>\r\n                <div className=\"input-group-prepend px-0 mb-4\">\r\n                    <select name=\"gender\" id=\"gender\" value={gender}\r\n                    className=\"custom-select text-capitalize\"\r\n                    onChange={handleInput}>\r\n                        <option value=\"male\">Nam</option>\r\n                        <option value=\"female\">Nữ</option>\r\n                        <option value=\"other\">Khác</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <button className=\"btn btn-info w-100\" type=\"submit\">Lưu</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditProfile\r\n","import React from 'react'\r\nimport UserCard from '../UserCard'\r\nimport FollowBtn from '../FollowBtn'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Followers = ({users, setShowFollowers}) => {\r\n    const { auth } = useSelector(state => state)\r\n    return (\r\n        <div className=\"follow\">\r\n            <div className=\"follow_box\">\r\n                <h5 className=\"text-center\">Người theo dõi</h5>\r\n                <hr/>\r\n                \r\n                <div className=\"follow_content\">\r\n                    {\r\n                        users.map(user => (\r\n                            <UserCard key={user._id} user={user} setShowFollowers={setShowFollowers} >\r\n                                {\r\n                                    auth.user._id !== user._id && <FollowBtn user={user} />\r\n                                }\r\n                            </UserCard>\r\n                        ))\r\n                    }\r\n                </div>\r\n                \r\n\r\n                <div className=\"close\" onClick={() => setShowFollowers(false)}>\r\n                    &times;\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Followers\r\n","import React from 'react'\r\nimport UserCard from '../UserCard'\r\nimport FollowBtn from '../FollowBtn'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Following = ({users, setShowFollowing}) => {\r\n    const { auth } = useSelector(state => state)\r\n    return (\r\n        <div className=\"follow\">\r\n            <div className=\"follow_box\">\r\n                <h5 className=\"text-center\">Đang theo dõi</h5>\r\n                <hr/>\r\n\r\n                <div className=\"follow_content\">\r\n                    {\r\n                        users.map(user => (\r\n                            <UserCard key={user._id} user={user} setShowFollowing={setShowFollowing} >\r\n                                {\r\n                                    auth.user._id !== user._id && <FollowBtn user={user} />\r\n                                }\r\n                            </UserCard>\r\n                        ))\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"close\" onClick={() => setShowFollowing(false)}>\r\n                    &times;\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Following\r\n","import React, { useState, useEffect } from 'react'\r\nimport Avatar from '../Avatar'\r\nimport EditProfile from './EditProfile'\r\nimport FollowBtn from '../FollowBtn'\r\nimport Followers from './Followers'\r\nimport Following from './Following'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\n\r\nconst Info = ({id, auth, profile, dispatch}) => {\r\n    const [userData, setUserData] = useState([])\r\n    const [onEdit, setOnEdit] = useState(false)\r\n\r\n    const [showFollowers, setShowFollowers] = useState(false)\r\n    const [showFollowing, setShowFollowing] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if(id === auth.user._id){\r\n            setUserData([auth.user])\r\n        }else{\r\n            const newData = profile.users.filter(user => user._id === id)\r\n            setUserData(newData)\r\n        }\r\n    }, [id, auth, dispatch, profile.users])\r\n\r\n\r\n    useEffect(() => {\r\n        if(showFollowers || showFollowing || onEdit){\r\n            dispatch({ type: GLOBALTYPES.MODAL, payload: true})\r\n        }else{\r\n            dispatch({ type: GLOBALTYPES.MODAL, payload: false})\r\n        }\r\n    },[showFollowers, showFollowing, onEdit, dispatch])\r\n    \r\n\r\n    return (\r\n        <div className=\"info\">\r\n            {\r\n                userData.map(user => (\r\n                    <div className=\"info_container\" key={user._id}>\r\n                        <Avatar src={user.avatar} size=\"supper-avatar\" />\r\n\r\n                        <div className=\"info_content\">\r\n                            <div className=\"info_content_title\">\r\n                                <h2>{user.username}</h2>\r\n                                {\r\n                                    user._id === auth.user._id\r\n                                    ?  <button className=\"btn btn-outline-info\"\r\n                                    onClick={() => setOnEdit(true)}>\r\n                                        Thay đổi thông tin\r\n                                    </button>\r\n                                    \r\n                                    : <FollowBtn user={user} />\r\n                                }\r\n                               \r\n                                \r\n                            </div>\r\n\r\n                            <div className=\"follow_btn\">\r\n                                <span className=\"mr-4\" onClick={() => setShowFollowers(true)}>\r\n                                    {user.followers.length} Người theo dõi\r\n                                </span>\r\n                                <span className=\"ml-4\" onClick={() => setShowFollowing(true)}>\r\n                                    {user.following.length} Đang theo dõi\r\n                                </span>\r\n                            </div>\r\n\r\n                            <h6>{user.fullname} <span className=\"text-danger\">{user.mobile}</span></h6>\r\n                            <p className=\"m-0\">{user.address}</p>\r\n                            <h6 className=\"m-0\">{user.email}</h6>\r\n                            <a href={user.website} target=\"_blank\" rel=\"noreferrer\">\r\n                                {user.website}\r\n                            </a>\r\n                            <p>{user.story}</p>\r\n                        </div>\r\n\r\n                        {\r\n                            onEdit && <EditProfile setOnEdit={setOnEdit} />\r\n                        }\r\n\r\n                        {\r\n                            showFollowers &&\r\n                            <Followers \r\n                            users={user.followers} \r\n                            setShowFollowers={setShowFollowers} \r\n                            />\r\n                        }\r\n                        {\r\n                            showFollowing &&\r\n                            <Following \r\n                            users={user.following} \r\n                            setShowFollowing={setShowFollowing} \r\n                            />\r\n                        }\r\n                    </div>\r\n                ))\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Info\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst PostThumb = ({ posts, result }) => {\r\n  const { theme } = useSelector((state) => state);\r\n\r\n  if (result === 0)\r\n    return <h2 className=\"text-center text-danger\">Không có bài đăng</h2>;\r\n\r\n  return (\r\n    <div className=\"post_thumb\">\r\n      {posts.map((post) => (\r\n        <Link key={post._id} to={`/post/${post._id}`}>\r\n          <div className=\"post_thumb_display\">\r\n            {post.images[0].url.match(/video/i) ? (\r\n              <video\r\n                controls\r\n                src={post.images[0].url}\r\n                alt={post.images[0].url}\r\n                style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" }}\r\n              />\r\n            ) : (\r\n              <img\r\n                src={post.images[0].url}\r\n                alt={post.images[0].url}\r\n                style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" }}\r\n              />\r\n            )}\r\n\r\n            <div className=\"post_thumb_menu\">\r\n              <i className=\"far fa-heart\">{post.likes.length}</i>\r\n              <i className=\"far fa-comment\">{post.comments.length}</i>\r\n            </div>\r\n          </div>\r\n        </Link>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostThumb;\r\n","import React, { useState, useEffect } from 'react'\r\nimport PostThumb from '../PostThumb'\r\nimport LoadIcon from '../../images/loading.gif'\r\nimport LoadMoreBtn from '../LoadMoreBtn'\r\nimport { getDataAPI } from '../../utils/fetchData'\r\nimport { PROFILE_TYPES } from '../../redux/actions/profileAction'\r\n\r\nconst Posts = ({auth, id, dispatch, profile}) => {\r\n    const [posts, setPosts] = useState([])\r\n    const [result, setResult] = useState(9)\r\n    const [page, setPage] = useState(0)\r\n    const [load, setLoad] = useState(false)\r\n\r\n    useEffect(() => {\r\n        profile.posts.forEach(data => {\r\n            if(data._id === id){\r\n                setPosts(data.posts)\r\n                setResult(data.result)\r\n                setPage(data.page)\r\n            }\r\n        })\r\n    },[profile.posts, id])\r\n\r\n    const handleLoadMore = async () => {\r\n        setLoad(true)\r\n        const res = await getDataAPI(`user_posts/${id}?limit=${page * 9}`, auth.token)\r\n        const newData = {...res.data, page: page + 1, _id: id}\r\n        dispatch({type: PROFILE_TYPES.UPDATE_POST, payload: newData})\r\n        setLoad(false)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <PostThumb posts={posts} result={result} />\r\n\r\n            {\r\n                load && <img src={LoadIcon} alt=\"loading\" className=\"d-block mx-auto\" />\r\n            }\r\n\r\n            \r\n            <LoadMoreBtn result={result} page={page}\r\n            load={load} handleLoadMore={handleLoadMore} />\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Posts\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport Info from \"../../components/profile/Info\";\r\nimport Posts from \"../../components/profile/Posts\";\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport LoadIcon from \"../../images/loading.gif\";\r\nimport { getProfileUsers } from \"../../redux/actions/profileAction\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst Profile = () => {\r\n  const { profile, auth } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n\r\n  const { id } = useParams();\r\n  const [saveTab, setSaveTab] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (profile.ids.every((item) => item !== id)) {\r\n      dispatch(getProfileUsers({ id, auth }));\r\n    }\r\n  }, [id, auth, dispatch, profile.ids]);\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <Info auth={auth} profile={profile} dispatch={dispatch} id={id} />\r\n\r\n      {auth.user._id === id && (\r\n        <div className=\"profile_tab\">\r\n          <button\r\n            className={saveTab ? \"\" : \"active\"}\r\n            onClick={() => setSaveTab(false)}\r\n          >\r\n            Bài đăng\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {profile.loading ? (\r\n        <img className=\"d-block mx-auto\" src={LoadIcon} alt=\"loading\" />\r\n      ) : (\r\n        <>\r\n            <Posts auth={auth} profile={profile} dispatch={dispatch} id={id} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from 'react'\r\n\r\nconst Times = ({total}) => {\r\n    return (\r\n        <div>\r\n            <span>\r\n                {\r\n                    (parseInt(total/3600)).toString().length < 2\r\n                    ? '0' + (parseInt(total/3600))\r\n                    : (parseInt(total/3600))\r\n                }\r\n            </span>\r\n            <span>:</span>\r\n\r\n            <span>\r\n                {\r\n                    (parseInt(total/60)).toString().length < 2\r\n                    ? '0' + (parseInt(total/60))\r\n                    : (parseInt(total/60))\r\n                }\r\n            </span>\r\n            <span>:</span>\r\n\r\n            <span>\r\n                {\r\n                    (total%60).toString().length < 2\r\n                    ? '0' + (total%60) + 's'\r\n                    : (total%60) + 's'\r\n                }\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Times\r\n","import React from 'react'\r\nimport Avatar from '../Avatar'\r\nimport { imageShow, videoShow } from '../../utils/mediaShow'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { deleteMessages } from '../../redux/actions/messageAction'\r\nimport Times from './Times'\r\n\r\nconst MsgDisplay = ({user, msg, theme, data}) => {\r\n    const { auth } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const handleDeleteMessages = () => {\r\n        if(!data) return;\r\n        \r\n        if(window.confirm('Bạn có muốn xóa cuộc hội thoại?')){\r\n            dispatch(deleteMessages({msg, data, auth}))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"chat_title\">\r\n                <Avatar src={user.avatar} size=\"small-avatar\" />\r\n                <span>{user.username}</span>\r\n            </div>\r\n\r\n            <div className=\"you_content\">\r\n                { \r\n                    user._id === auth.user._id && \r\n                    <i className=\"fas fa-trash text-danger\"\r\n                    onClick={handleDeleteMessages} />\r\n                }\r\n\r\n                <div>\r\n                    {\r\n                        msg.text && \r\n                        <div className=\"chat_text\"\r\n                        style={{filter: theme ? 'invert(1)' : 'invert(0)'}}>\r\n                            {msg.text}\r\n                        </div>\r\n                    }\r\n                    {\r\n                        msg.media.map((item, index) => (\r\n                            <div key={index}>\r\n                                {\r\n                                    item.url.match(/video/i)\r\n                                    ? videoShow(item.url, theme)\r\n                                    : imageShow(item.url, theme)\r\n                                }\r\n                            </div>\r\n                        ))\r\n                    }\r\n                </div>\r\n            \r\n                {\r\n                    msg.call &&\r\n                    <button className=\"btn d-flex align-items-center py-3\"\r\n                    style={{background: '#eee', borderRadius: '10px'}}>\r\n\r\n                        <span className=\"material-icons font-weight-bold mr-1\"\r\n                        style={{ \r\n                            fontSize: '2.5rem', color: msg.call.times === 0 ? 'crimson' : 'green',\r\n                            filter: theme ? 'invert(1)' : 'invert(0)'\r\n                        }}>\r\n                            {\r\n                                msg.call.times === 0\r\n                                ? msg.call.video ? 'videocam_off' : 'phone_disabled'\r\n                                : msg.call.video ? 'video_camera_front' : 'call'\r\n                            }\r\n                        </span>\r\n\r\n                        <div className=\"text-left\">\r\n                            <h6>{msg.call.video ? 'Video Call' : 'Audio Call'}</h6>\r\n                            <small>\r\n                                {\r\n                                    msg.call.times > 0 \r\n                                    ? <Times total={msg.call.times} />\r\n                                    : new Date(msg.createdAt).toLocaleTimeString()\r\n                                }\r\n                            </small>\r\n                        </div>\r\n\r\n                    </button>\r\n                }\r\n            \r\n            </div>\r\n\r\n            <div className=\"chat_time\">\r\n                {new Date(msg.createdAt).toLocaleString()}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MsgDisplay\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport UserCard from '../UserCard'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useParams, useHistory } from 'react-router-dom'\r\nimport MsgDisplay from './MsgDisplay'\r\nimport Icons from '../Icons'\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes'\r\nimport { imageShow, videoShow } from '../../utils/mediaShow'\r\nimport { imageUpload } from '../../utils/imageUpload'\r\nimport { addMessage, getMessages, loadMoreMessages, deleteConversation } from '../../redux/actions/messageAction'\r\nimport LoadIcon from '../../images/loading.gif'\r\n\r\nconst RightSide = () => {\r\n    const { auth, message, theme, socket, peer } = useSelector(state => state)\r\n    const dispatch = useDispatch()\r\n\r\n    const { id } = useParams()\r\n    const [user, setUser] = useState([])\r\n    const [text, setText] = useState('')\r\n    const [media, setMedia] = useState([])\r\n    const [loadMedia, setLoadMedia] = useState(false)\r\n\r\n    const refDisplay = useRef()\r\n    const pageEnd = useRef()\r\n\r\n    const [data, setData] = useState([])\r\n    const [result, setResult] = useState(9)\r\n    const [page, setPage] = useState(0)\r\n    const [isLoadMore, setIsLoadMore] = useState(0)\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const newData = message.data.find(item => item._id === id)\r\n        if(newData){\r\n            setData(newData.messages)\r\n            setResult(newData.result)\r\n            setPage(newData.page)\r\n        }\r\n    },[message.data, id])\r\n\r\n    useEffect(() => {\r\n        if(id && message.users.length > 0){\r\n            setTimeout(() => {\r\n                refDisplay.current.scrollIntoView({behavior: 'smooth', block: 'end'})\r\n            },50)\r\n\r\n            const newUser = message.users.find(user => user._id === id)\r\n            if(newUser) setUser(newUser)\r\n        }\r\n    }, [message.users, id])\r\n\r\n    const handleChangeMedia = (e) => {\r\n        const files = [...e.target.files]\r\n        let err = \"\"\r\n        let newMedia = []\r\n\r\n        files.forEach(file => {\r\n            if(!file) return err = \"File không hợp lệ.\"\r\n\r\n            if(file.size > 1024 * 1024 * 25){\r\n                return err = \"Ảnh hoặc video chỉ tối đa dưới 25mb.\"\r\n            }\r\n\r\n            return newMedia.push(file)\r\n        })\r\n\r\n        if(err) dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err} })\r\n        setMedia([...media, ...newMedia])\r\n    }\r\n\r\n    const handleDeleteMedia = (index) => {\r\n        const newArr = [...media]\r\n        newArr.splice(index, 1)\r\n        setMedia(newArr)\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        if(!text.trim() && media.length === 0) return;\r\n        setText('')\r\n        setMedia([])\r\n        setLoadMedia(true)\r\n\r\n        let newArr = [];\r\n        if(media.length > 0) newArr = await imageUpload(media)\r\n\r\n        const msg = {\r\n            sender: auth.user._id,\r\n            recipient: id,\r\n            text, \r\n            media: newArr,\r\n            createdAt: new Date().toISOString()\r\n        }\r\n\r\n        setLoadMedia(false)\r\n        await dispatch(addMessage({msg, auth, socket}))\r\n        if(refDisplay.current){\r\n            refDisplay.current.scrollIntoView({behavior: 'smooth', block: 'end'})\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const getMessagesData = async () => {\r\n            if(message.data.every(item => item._id !== id)){\r\n                await dispatch(getMessages({auth, id}))\r\n                setTimeout(() => {\r\n                    refDisplay.current.scrollIntoView({behavior: 'smooth', block: 'end'})\r\n                },50)\r\n            }\r\n        }\r\n        getMessagesData()\r\n    },[id, dispatch, auth, message.data])\r\n\r\n\r\n    // Load More\r\n    useEffect(() => {\r\n        const observer = new IntersectionObserver(entries => {\r\n            if(entries[0].isIntersecting){\r\n                setIsLoadMore(p => p + 1)\r\n            }\r\n        },{\r\n            threshold: 0.1\r\n        })\r\n\r\n        observer.observe(pageEnd.current)\r\n    },[setIsLoadMore])\r\n\r\n    useEffect(() => {\r\n        if(isLoadMore > 1){\r\n            if(result >= page * 9){\r\n                dispatch(loadMoreMessages({auth, id, page: page + 1}))\r\n                setIsLoadMore(1)\r\n            }\r\n        }\r\n        // eslint-disable-next-line\r\n    },[isLoadMore])\r\n\r\n    const handleDeleteConversation = () => {\r\n        if(window.confirm('Bạn muốn xóa toàn bộ đoạn hội thoại?')){\r\n            dispatch(deleteConversation({auth, id}))\r\n            return history.push('/message')\r\n        }\r\n    }\r\n\r\n    // Call\r\n    const caller = ({video}) => {\r\n        const { _id, avatar, username, fullname } = user\r\n\r\n        const msg = {\r\n            sender: auth.user._id,\r\n            recipient: _id, \r\n            avatar, username, fullname, video\r\n        }\r\n        dispatch({ type: GLOBALTYPES.CALL, payload: msg })\r\n    }\r\n\r\n    const callUser = ({video}) => {\r\n        const { _id, avatar, username, fullname } = auth.user\r\n\r\n        const msg = {\r\n            sender: _id,\r\n            recipient: user._id, \r\n            avatar, username, fullname, video\r\n        }\r\n\r\n        if(peer.open) msg.peerId = peer._id\r\n\r\n        socket.emit('callUser', msg)\r\n    }\r\n\r\n    const handleAudioCall = () => {\r\n        caller({video: false})\r\n        callUser({video: false})\r\n    }\r\n    \r\n    const handleVideoCall = () => {\r\n        caller({video: true})\r\n        callUser({video: true})\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"message_header\" style={{cursor: 'pointer'}} >\r\n                {\r\n                    user.length !== 0 &&\r\n                    <UserCard user={user}>\r\n                        <div>\r\n                            <i className=\"fas fa-phone-alt\"\r\n                            onClick={handleAudioCall} />\r\n\r\n                            <i className=\"fas fa-video mx-3\"\r\n                            onClick={handleVideoCall} />\r\n\r\n                            <i className=\"fas fa-trash text-danger\"\r\n                            onClick={handleDeleteConversation} />\r\n                        </div>\r\n                    </UserCard>\r\n                }\r\n            </div>\r\n\r\n            <div className=\"chat_container\" \r\n            style={{height: media.length > 0 ? 'calc(100% - 180px)' : ''}} >\r\n                <div className=\"chat_display\" ref={refDisplay}>\r\n                    <button style={{marginTop: '-25px', opacity: 0}} ref={pageEnd}>\r\n                        Xem thêm\r\n                    </button>\r\n\r\n                    {\r\n                        data.map((msg, index) => (\r\n                                <div key={index}>\r\n                                    {\r\n                                        msg.sender !== auth.user._id &&\r\n                                        <div className=\"chat_row other_message\">\r\n                                            <MsgDisplay user={user} msg={msg} theme={theme} />\r\n                                        </div>\r\n                                    }\r\n\r\n                                    {\r\n                                        msg.sender === auth.user._id &&\r\n                                        <div className=\"chat_row you_message\">\r\n                                            <MsgDisplay user={auth.user} msg={msg} theme={theme} data={data} />\r\n                                        </div>\r\n                                    }\r\n                                </div>\r\n                        ))\r\n                    }\r\n                    \r\n\r\n                   {\r\n                       loadMedia && \r\n                       <div className=\"chat_row you_message\">\r\n                           <img src={LoadIcon} alt=\"loading\"/>\r\n                       </div>\r\n                   }\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"show_media\" style={{display: media.length > 0 ? 'grid' : 'none'}} >\r\n                {\r\n                    media.map((item, index) => (\r\n                        <div key={index} id=\"file_media\">\r\n                            {\r\n                                item.type.match(/video/i)\r\n                                ? videoShow(URL.createObjectURL(item), theme)\r\n                                : imageShow(URL.createObjectURL(item), theme)\r\n                            }\r\n                            <span onClick={() => handleDeleteMedia(index)} >&times;</span>\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n\r\n            <form className=\"chat_input\" onSubmit={handleSubmit} >\r\n                <input type=\"text\" placeholder=\"Enter you message...\"\r\n                value={text} onChange={e => setText(e.target.value)}\r\n                style={{\r\n                    filter: theme ? 'invert(1)' : 'invert(0)',\r\n                    background: theme ? '#040404' : '',\r\n                    color: theme ? 'white' : ''\r\n                }} />\r\n\r\n                <Icons setContent={setText} content={text} theme={theme} />\r\n\r\n                <div className=\"file_upload\">\r\n                    <i className=\"fas fa-image text-danger\" />\r\n                    <input type=\"file\" name=\"file\" id=\"file\"\r\n                    multiple accept=\"image/*,video/*\" onChange={handleChangeMedia} />\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"material-icons\" \r\n                disabled={(text || media.length > 0) ? false : true}>\r\n                    near_me\r\n                </button>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default RightSide\r\n","import React from 'react'\r\nimport LeftSide from '../../components/message/LeftSide'\r\nimport RightSide from '../../components/message/RightSide'\r\n\r\nconst Conversation = () => {\r\n    return (\r\n        <div className=\"message d-flex\">\r\n            <div className=\"col-md-4 border-right px-0 left_mess\">\r\n                <LeftSide />\r\n            </div>\r\n\r\n            <div className=\"col-md-8 px-0\">\r\n                <RightSide />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Conversation\r\n"],"sourceRoot":""}